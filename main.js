/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

var __defProp = Object.defineProperty;
var __getOwnPropDesc = Object.getOwnPropertyDescriptor;
var __getOwnPropNames = Object.getOwnPropertyNames;
var __hasOwnProp = Object.prototype.hasOwnProperty;
var __export = (target, all) => {
  for (var name in all)
    __defProp(target, name, { get: all[name], enumerable: true });
};
var __copyProps = (to, from, except, desc) => {
  if (from && typeof from === "object" || typeof from === "function") {
    for (let key of __getOwnPropNames(from))
      if (!__hasOwnProp.call(to, key) && key !== except)
        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });
  }
  return to;
};
var __toCommonJS = (mod) => __copyProps(__defProp({}, "__esModule", { value: true }), mod);

// src/main.ts
var main_exports = {};
__export(main_exports, {
  default: () => ReferencePlugin
});
module.exports = __toCommonJS(main_exports);
var import_obsidian6 = require("obsidian");

// src/state.ts
var import_state6 = require("@codemirror/state");

// src/references.ts
var import_obsidian4 = require("obsidian");

// node_modules/uuid/dist/esm-browser/regex.js
var regex_default = /^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;

// node_modules/uuid/dist/esm-browser/validate.js
function validate(uuid) {
  return typeof uuid === "string" && regex_default.test(uuid);
}
var validate_default = validate;

// node_modules/uuid/dist/esm-browser/stringify.js
var byteToHex = [];
for (let i = 0; i < 256; ++i) {
  byteToHex.push((i + 256).toString(16).slice(1));
}
function unsafeStringify(arr, offset = 0) {
  return byteToHex[arr[offset + 0]] + byteToHex[arr[offset + 1]] + byteToHex[arr[offset + 2]] + byteToHex[arr[offset + 3]] + "-" + byteToHex[arr[offset + 4]] + byteToHex[arr[offset + 5]] + "-" + byteToHex[arr[offset + 6]] + byteToHex[arr[offset + 7]] + "-" + byteToHex[arr[offset + 8]] + byteToHex[arr[offset + 9]] + "-" + byteToHex[arr[offset + 10]] + byteToHex[arr[offset + 11]] + byteToHex[arr[offset + 12]] + byteToHex[arr[offset + 13]] + byteToHex[arr[offset + 14]] + byteToHex[arr[offset + 15]];
}

// node_modules/uuid/dist/esm-browser/parse.js
function parse(uuid) {
  if (!validate_default(uuid)) {
    throw TypeError("Invalid UUID");
  }
  let v;
  const arr = new Uint8Array(16);
  arr[0] = (v = parseInt(uuid.slice(0, 8), 16)) >>> 24;
  arr[1] = v >>> 16 & 255;
  arr[2] = v >>> 8 & 255;
  arr[3] = v & 255;
  arr[4] = (v = parseInt(uuid.slice(9, 13), 16)) >>> 8;
  arr[5] = v & 255;
  arr[6] = (v = parseInt(uuid.slice(14, 18), 16)) >>> 8;
  arr[7] = v & 255;
  arr[8] = (v = parseInt(uuid.slice(19, 23), 16)) >>> 8;
  arr[9] = v & 255;
  arr[10] = (v = parseInt(uuid.slice(24, 36), 16)) / 1099511627776 & 255;
  arr[11] = v / 4294967296 & 255;
  arr[12] = v >>> 24 & 255;
  arr[13] = v >>> 16 & 255;
  arr[14] = v >>> 8 & 255;
  arr[15] = v & 255;
  return arr;
}
var parse_default = parse;

// node_modules/uuid/dist/esm-browser/v35.js
function stringToBytes(str) {
  str = unescape(encodeURIComponent(str));
  const bytes = [];
  for (let i = 0; i < str.length; ++i) {
    bytes.push(str.charCodeAt(i));
  }
  return bytes;
}
var DNS = "6ba7b810-9dad-11d1-80b4-00c04fd430c8";
var URL = "6ba7b811-9dad-11d1-80b4-00c04fd430c8";
function v35(name, version, hashfunc) {
  function generateUUID(value, namespace, buf, offset) {
    var _namespace;
    if (typeof value === "string") {
      value = stringToBytes(value);
    }
    if (typeof namespace === "string") {
      namespace = parse_default(namespace);
    }
    if (((_namespace = namespace) === null || _namespace === void 0 ? void 0 : _namespace.length) !== 16) {
      throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");
    }
    let bytes = new Uint8Array(16 + value.length);
    bytes.set(namespace);
    bytes.set(value, namespace.length);
    bytes = hashfunc(bytes);
    bytes[6] = bytes[6] & 15 | version;
    bytes[8] = bytes[8] & 63 | 128;
    if (buf) {
      offset = offset || 0;
      for (let i = 0; i < 16; ++i) {
        buf[offset + i] = bytes[i];
      }
      return buf;
    }
    return unsafeStringify(bytes);
  }
  try {
    generateUUID.name = name;
  } catch (err) {
  }
  generateUUID.DNS = DNS;
  generateUUID.URL = URL;
  return generateUUID;
}

// node_modules/uuid/dist/esm-browser/sha1.js
function f(s, x, y, z) {
  switch (s) {
    case 0:
      return x & y ^ ~x & z;
    case 1:
      return x ^ y ^ z;
    case 2:
      return x & y ^ x & z ^ y & z;
    case 3:
      return x ^ y ^ z;
  }
}
function ROTL(x, n) {
  return x << n | x >>> 32 - n;
}
function sha1(bytes) {
  const K = [1518500249, 1859775393, 2400959708, 3395469782];
  const H = [1732584193, 4023233417, 2562383102, 271733878, 3285377520];
  if (typeof bytes === "string") {
    const msg = unescape(encodeURIComponent(bytes));
    bytes = [];
    for (let i = 0; i < msg.length; ++i) {
      bytes.push(msg.charCodeAt(i));
    }
  } else if (!Array.isArray(bytes)) {
    bytes = Array.prototype.slice.call(bytes);
  }
  bytes.push(128);
  const l = bytes.length / 4 + 2;
  const N = Math.ceil(l / 16);
  const M = new Array(N);
  for (let i = 0; i < N; ++i) {
    const arr = new Uint32Array(16);
    for (let j = 0; j < 16; ++j) {
      arr[j] = bytes[i * 64 + j * 4] << 24 | bytes[i * 64 + j * 4 + 1] << 16 | bytes[i * 64 + j * 4 + 2] << 8 | bytes[i * 64 + j * 4 + 3];
    }
    M[i] = arr;
  }
  M[N - 1][14] = (bytes.length - 1) * 8 / Math.pow(2, 32);
  M[N - 1][14] = Math.floor(M[N - 1][14]);
  M[N - 1][15] = (bytes.length - 1) * 8 & 4294967295;
  for (let i = 0; i < N; ++i) {
    const W = new Uint32Array(80);
    for (let t = 0; t < 16; ++t) {
      W[t] = M[i][t];
    }
    for (let t = 16; t < 80; ++t) {
      W[t] = ROTL(W[t - 3] ^ W[t - 8] ^ W[t - 14] ^ W[t - 16], 1);
    }
    let a = H[0];
    let b = H[1];
    let c = H[2];
    let d = H[3];
    let e = H[4];
    for (let t = 0; t < 80; ++t) {
      const s = Math.floor(t / 20);
      const T = ROTL(a, 5) + f(s, b, c, d) + e + K[s] + W[t] >>> 0;
      e = d;
      d = c;
      c = ROTL(b, 30) >>> 0;
      b = a;
      a = T;
    }
    H[0] = H[0] + a >>> 0;
    H[1] = H[1] + b >>> 0;
    H[2] = H[2] + c >>> 0;
    H[3] = H[3] + d >>> 0;
    H[4] = H[4] + e >>> 0;
  }
  return [H[0] >> 24 & 255, H[0] >> 16 & 255, H[0] >> 8 & 255, H[0] & 255, H[1] >> 24 & 255, H[1] >> 16 & 255, H[1] >> 8 & 255, H[1] & 255, H[2] >> 24 & 255, H[2] >> 16 & 255, H[2] >> 8 & 255, H[2] & 255, H[3] >> 24 & 255, H[3] >> 16 & 255, H[3] >> 8 & 255, H[3] & 255, H[4] >> 24 & 255, H[4] >> 16 & 255, H[4] >> 8 & 255, H[4] & 255];
}
var sha1_default = sha1;

// node_modules/uuid/dist/esm-browser/v5.js
var v5 = v35("v5", 80, sha1_default);
var v5_default = v5;

// src/utils.ts
var import_obsidian3 = require("obsidian");

// src/constants.ts
var REFERENCE_REGEX = /\[\u2197\]\(urn:([^)]*)\)/g;
var ACTION_TYPE = {
  MOUSE: "mouse",
  CURSOR: "cursor",
  BACKLINK: "backlink"
};
var SVG_HOVER_COLOR = "rgb(187, 215, 230)";
var REFERENCE_ICON_HEIGHT = 20;
var PORTAL_TEXT_SLICE_SIZE = 100;

// src/workspace.ts
var import_obsidian = require("obsidian");
function collectLeavesByTab(split, result = []) {
  const type = split.type;
  if (!type)
    throw new Error("Split type not found");
  if (type == "tabs" || type == "split") {
    const children = split.children;
    if (!children)
      throw new Error("Split children not found");
    if (children) {
      for (const child of children) {
        let emptyList = [];
        collectLeavesByTab(child, result);
      }
    }
  } else if (type == "leaf") {
    const parentSplitId = split.parent.id;
    if (!parentSplitId)
      throw new Error("Split parent id not found");
    let idx = result.findIndex((tab) => {
      const tabId = tab[0].parent.id;
      return tabId == parentSplitId;
    });
    if (idx == -1) {
      result.push([split]);
    } else {
      result[idx].push(split);
    }
  }
  return result;
}
function collectLeavesByTabHelper() {
  const { workspace } = getThat();
  const currLeaf = workspace.getLeaf();
  const rootSplit = currLeaf.getRoot();
  return collectLeavesByTab(rootSplit);
}
function getCurrentTabIndex(leavesByTab, span) {
  let workspaceTab = span.closest(".workspace-tabs");
  let currTabIdx = leavesByTab.findIndex((tab) => {
    const leafTab = tab[0].view.containerEl.closest(".workspace-tabs");
    return leafTab == workspaceTab;
  });
  return currTabIdx;
}
function getAdjacentTabs(leavesByTab, currTabIdx, file) {
  let rightAdjacentTab = [];
  let leftAdjacentTab = [];
  let adjacentTabs = [];
  if (leavesByTab[currTabIdx + 1]) {
    rightAdjacentTab = leavesByTab[currTabIdx + 1];
    adjacentTabs = [...adjacentTabs, ...rightAdjacentTab];
  }
  if (leavesByTab[currTabIdx - 1]) {
    leftAdjacentTab = leavesByTab[currTabIdx - 1];
    adjacentTabs = [...adjacentTabs, ...leftAdjacentTab];
  }
  let index = adjacentTabs.findIndex(
    (x) => x.getViewState().state.file == file
  );
  return { adjacentTabs, rightAdjacentTab, leftAdjacentTab, index };
}
async function openFileInAdjacentTab(leavesByTab, currTabIdx, file, type) {
  let { adjacentTabs, rightAdjacentTab, leftAdjacentTab } = getAdjacentTabs(
    leavesByTab,
    currTabIdx,
    file
  );
  let allTabNames = leavesByTab.map(
    (tab) => tab.map((x) => x.getViewState().state.file)
  );
  let rightAdjacentTabNames = rightAdjacentTab.map(
    (x) => x.getViewState().state.file
  );
  let leftAdjacentTabNames = leftAdjacentTab.map(
    (x) => x.getViewState().state.file
  );
  const { workspace } = getThat();
  if (allTabNames.filter((v, i) => i != currTabIdx).flat().includes(file) && !rightAdjacentTabNames.includes(file) && !leftAdjacentTabNames.includes(file)) {
    let currentTabNames = [];
    let currentTab = [];
    allTabNames.forEach((tabNames, i) => {
      if (tabNames != rightAdjacentTabNames && tabNames != leftAdjacentTabNames && currTabIdx != i) {
        if (tabNames.includes(file)) {
          currentTabNames = tabNames;
          currentTab = leavesByTab[i];
        }
      }
    });
    const originalLeaf = currentTab.filter(
      (t) => t.containerEl.style.display != "none"
    )[0];
    let leaf = currentTab[currentTabNames.indexOf(file)];
    workspace.revealLeaf(leaf);
    return { newLeaf: leaf, temp: false, originalLeaf };
  } else if (rightAdjacentTabNames.includes(file)) {
    const originalLeaf = rightAdjacentTab.filter(
      (t) => t.containerEl.style.display != "none"
    )[0];
    let leaf = rightAdjacentTab[rightAdjacentTabNames.indexOf(file)];
    workspace.revealLeaf(leaf);
    return { newLeaf: leaf, temp: false, originalLeaf };
  } else if (leftAdjacentTabNames.includes(file)) {
    const originalLeaf = leftAdjacentTab.filter(
      (t) => t.containerEl.style.display != "none"
    )[0];
    let leaf = leftAdjacentTab[leftAdjacentTabNames.indexOf(file)];
    workspace.revealLeaf(leaf);
    return { newLeaf: leaf, temp: false, originalLeaf };
  } else if (rightAdjacentTab.length > 0) {
    const originalLeaf = rightAdjacentTab.filter(
      (t) => t.containerEl.style.display != "none"
    )[0];
    let currLeaf = workspace.getLeaf();
    workspace.setActiveLeaf(originalLeaf);
    let newLeaf = workspace.getLeaf(true);
    await openFileInLeaf(newLeaf, file);
    workspace.revealLeaf(newLeaf);
    workspace.setActiveLeaf(currLeaf);
    return { newLeaf, temp: true, originalLeaf };
  } else if (leftAdjacentTab.length > 0) {
    const originalLeaf = leftAdjacentTab.filter(
      (t) => t.containerEl.style.display != "none"
    )[0];
    let currLeaf = workspace.getLeaf();
    workspace.setActiveLeaf(originalLeaf);
    let newLeaf = workspace.getLeaf(true);
    await openFileInLeaf(newLeaf, file);
    workspace.revealLeaf(newLeaf);
    workspace.setActiveLeaf(currLeaf);
    return { newLeaf, temp: true, originalLeaf };
  } else {
    const currLeaf = workspace.getLeaf();
    let newLeaf = workspace.createLeafBySplit(currLeaf);
    await openFileInLeaf(newLeaf, file);
    return { newLeaf, temp: true };
  }
}
async function openFileInLeaf(leaf, file) {
  let targetFile = getThat().vault.getAbstractFileByPath(file);
  if (targetFile && targetFile instanceof import_obsidian.TFile)
    await leaf.openFile(targetFile, { active: false });
}

// src/effects.ts
var import_obsidian2 = require("obsidian");

// src/mark.ts
var import_view = require("@codemirror/view");
var import_state2 = require("@codemirror/state");
var addHighlight = import_state2.StateEffect.define({
  map: ({ from, to }, change) => ({
    from: change.mapPos(from),
    to: change.mapPos(to)
  })
});
var resetHighlight = import_state2.StateEffect.define({
  map: ({ from, to }, change) => ({
    from: change.mapPos(from),
    to: change.mapPos(to)
  })
});
var highlightField = import_state2.StateField.define({
  create() {
    return import_view.Decoration.none;
  },
  update(higlights, tr) {
    higlights = higlights.map(tr.changes);
    for (let e of tr.effects)
      if (e.is(addHighlight)) {
        higlights = higlights.update({
          add: [highlightMark.range(e.value.from, e.value.to)]
        });
      } else if (e.is(resetHighlight)) {
        higlights = higlights.update({ filter: (from, to) => false });
      }
    return higlights;
  },
  provide: (f2) => import_view.EditorView.decorations.from(f2)
});
var highlightMark = import_view.Decoration.mark({ class: "highlight" });
var highlightTheme = import_view.EditorView.baseTheme({
  ".highlight": {
    "background-color": "white",
    color: "black"
  }
});
var defaultHighlightTheme = import_view.EditorView.baseTheme({
  ".default-highlight": {
    "background-color": SVG_HOVER_COLOR,
    color: "black"
  }
});
function highlightSelection(view, from, to) {
  let effects = [addHighlight.of({ from, to })];
  if (!effects.length)
    return false;
  if (!view.state.field(highlightField, false))
    effects.push(import_state2.StateEffect.appendConfig.of([highlightField, highlightTheme]));
  view.dispatch({ effects });
  return true;
}
function removeHighlights(view) {
  if (!view)
    return;
  let effects = view.state.selection.ranges.map(
    ({ from, to }) => resetHighlight.of({ from, to })
  );
  if (effects.length) {
    view.dispatch({ effects });
    return true;
  }
  return false;
}

// src/effects.ts
var import_view2 = require("@codemirror/view");
function getEditorView(leaf) {
  var _a;
  if (!leaf)
    return null;
  const view = leaf.view;
  const editor = (_a = view.sourceMode) == null ? void 0 : _a.cmEditor;
  if (!editor.CodeMirror && editor.cm instanceof import_view2.EditorView) {
    const editorView = editor.cm;
    return editorView;
  }
  return null;
}
function checkSpanElementExists(span, containerEl) {
  const spanElements = containerEl.getElementsByTagName("span");
  for (let i = 0; i < spanElements.length; i++) {
    if (spanElements[i] === span) {
      return true;
    }
  }
  return false;
}
function parseCSSString(css) {
  const cssPropertiesRegex = /([\w-]+)\s*:\s*([^;]+)\s*;?/g;
  let cssPropertiesObject = {};
  let match;
  while ((match = cssPropertiesRegex.exec(css)) !== null) {
    cssPropertiesObject[match[1]] = match[2];
  }
  return cssPropertiesObject;
}
function delay(milliseconds) {
  return new Promise((resolve) => {
    setTimeout(resolve, milliseconds);
  });
}
function tempDirectionIndicator(leaf, text, prefix, suffix, dataString, isSame, user) {
  let positions = findTextPositions(
    leaf.view.data,
    text,
    prefix.slice(0, prefix.length - 1),
    suffix.slice(1, suffix.length)
  );
  if (!positions)
    throw new Error("Positions not found");
  let rangeStart = positions.rangeStart;
  let rangeEnd = positions.rangeEnd;
  console.log(user);
  if (user === ACTION_TYPE.BACKLINK) {
    let startTop = leaf.view.editor.getScrollInfo().top;
    console.log(rangeStart);
    leaf.view.editor.scrollIntoView(
      {
        from: Object.assign(rangeStart, { ch: 0 }),
        to: Object.assign(rangeEnd, { ch: 0 })
      },
      true
    );
    setTimeout(() => {
      let endTop = leaf.view.editor.getScrollInfo().top;
      if (startTop === endTop && isSame) {
        leaf.containerEl.querySelector(".view-content").style.boxShadow = "none";
      } else if (startTop === endTop || !isSame) {
        leaf.containerEl.querySelector(".view-content").style.boxShadow = "inset 0px 0px 10px 10px rgba(248, 255, 255)";
      } else if (startTop < endTop) {
        leaf.containerEl.querySelector(".view-content").style.boxShadow = "inset 0px 20px 20px 0px rgba(248, 255, 255)";
      } else {
        leaf.containerEl.querySelector(".view-content").style.boxShadow = "inset 0px -30px 20px 0px rgba(248, 255, 255)";
      }
    }, 10);
    return;
  }
  const editor = getMarkdownView(leaf).editor;
  const backlinkContainer = getBacklinkContainer(editor);
  const windowHeight = leaf.view.containerEl.querySelector(".cm-scroller").getBoundingClientRect().height;
  const scrollTop = leaf.view.containerEl.querySelector(".cm-scroller").scrollTop;
  const scrollBottom = scrollTop + windowHeight;
  let visibleElements = [];
  for (let i = 0; i < backlinkContainer.children.length; i++) {
    let style = backlinkContainer.children[i].getAttribute("style");
    if (style == null)
      continue;
    let cssProperties = parseCSSString(style);
    let top = parseFloat(cssProperties["top"].replace("px", ""));
    if (top == null)
      continue;
    if (scrollTop <= top && top <= scrollBottom && backlinkContainer.children[i]) {
      let reference = backlinkContainer.children[i].getAttribute("reference");
      if (reference) {
        visibleElements.push(JSON.parse(reference).dataString);
      }
    }
  }
  if (!visibleElements.includes(dataString)) {
    let startTop = leaf.view.editor.getScrollInfo().top;
    leaf.view.editor.scrollIntoView(
      {
        from: Object.assign(rangeStart, { ch: 0 }),
        to: Object.assign(rangeEnd, { ch: 0 })
      },
      true
    );
    setTimeout(() => {
      let endTop = leaf.view.editor.getScrollInfo().top;
      if (startTop == endTop && isSame) {
        leaf.containerEl.querySelector(".view-content").style.boxShadow = "inset 0px 20px 20px 0px rgba(248, 255, 255, 0)";
      } else if (startTop === endTop || !isSame) {
        leaf.containerEl.querySelector(".view-content").style.boxShadow = "inset 0px 0px 10px 10px rgba(248, 255, 255)";
      } else if (startTop < endTop) {
        leaf.containerEl.querySelector(".view-content").style.boxShadow = "inset 0px 20px 20px 0px rgba(248, 255, 255)";
      } else {
        leaf.containerEl.querySelector(".view-content").style.boxShadow = "inset 0px -30px 20px 0px rgba(248, 255, 255)";
      }
    }, 10);
  }
}
async function startBacklinkEffect(span) {
  let source = getBacklinkHover();
  let destination = getCursor();
  let updateState = updateBacklinkHover;
  if (source != null)
    return;
  updateState({
    type: `${ACTION_TYPE.BACKLINK}-start`
  });
  const referenceData = span.getAttribute("reference");
  if (!referenceData)
    throw new Error("Reference data not found");
  const backlink = JSON.parse(referenceData);
  const dataString = backlink.dataString;
  if (destination != null && destination.dataString == dataString) {
    updateState(destination);
    return;
  }
  let [prefix, text, suffix, file, from, to] = processURI(dataString);
  let leavesByTab = collectLeavesByTabHelper();
  let currTabIdx = getCurrentTabIndex(leavesByTab, span);
  let backlinkLeaf = leavesByTab[currTabIdx].filter((leaf) => {
    let containerEl = getContainerElement(leaf);
    const exists = checkSpanElementExists(span, containerEl);
    return exists;
  })[0];
  let backlinkLeafID = backlinkLeaf.id;
  if (!backlinkLeafID)
    throw new Error("Leaf id not found");
  if (backlinkLeaf && backlinkLeaf.view instanceof import_obsidian2.MarkdownView) {
    const editorView = getEditorView(backlinkLeaf);
    if (!editorView)
      throw new Error("Editor view not found");
    const viewport = backlinkLeaf.view.editor.getScrollInfo();
    highlightSelection(editorView, from, to);
    updateState({
      dataString,
      originalTop: editorView.documentTop,
      backlinkLeafId: backlinkLeafID
    });
  }
  let referencingFile = backlink.referencingLocation.filename;
  const { newLeaf, temp, originalLeaf } = await openFileInAdjacentTab(
    leavesByTab,
    currTabIdx,
    referencingFile
  );
  let id = newLeaf.id;
  if (!id)
    throw new Error("Leaf id not found");
  updateState({
    leafId: id,
    temp,
    peek: true
  });
  const originalLeafId = originalLeaf.id;
  const matches = [
    ...backlink.referencingLocation.text.matchAll(REFERENCE_REGEX)
  ];
  if (matches.length == 0)
    throw new Error("Matches not found");
  tempDirectionIndicator(
    newLeaf,
    backlink.referencingLocation.text,
    backlink.referencingLocation.prefix + "-",
    "-" + backlink.referencingLocation.suffix,
    matches[0][1],
    id === originalLeafId,
    ACTION_TYPE.BACKLINK
  );
  const cursorViewport = newLeaf.view.editor.getScrollInfo();
  updateState({
    cursorViewport
  });
  let backlinkSpan = newLeaf.containerEl.querySelector(
    `span[data="${backlink.dataString}"]`
  );
  if (backlinkSpan) {
    backlinkSpan.classList.add("reference-data-span-hovered");
  }
  if (id === originalLeafId) {
    newLeaf.containerEl.querySelector(".view-content").style.boxShadow = "none";
  }
  if (originalLeafId) {
    updateState({
      originalLeafId
    });
  }
  return;
}
async function startReferenceEffect(span, type) {
  var _a, _b;
  let source = type == ACTION_TYPE.MOUSE ? getHover() : getCursor();
  let destination = type == ACTION_TYPE.MOUSE ? getCursor() : getHover();
  let updateState = type == ACTION_TYPE.MOUSE ? updateHover : updateCursor;
  if (source != null)
    return;
  updateState({
    type: `${type}-start`
  });
  if (!span)
    return;
  (_b = (_a = span.parentElement) == null ? void 0 : _a.querySelector(".reference-span")) == null ? void 0 : _b.classList.add("reference-span-selected");
  span.classList.add("reference-data-span-selected");
  const dataString = span.getAttribute("data");
  if (!dataString)
    return;
  if (destination != null && destination.dataString == dataString) {
    updateHover(destination);
    return;
  }
  let [prefix, text, suffix, file, from, to] = processURI(dataString);
  let leavesByTab = collectLeavesByTabHelper();
  let currTabIdx = getCurrentTabIndex(leavesByTab, span);
  let currLeaf = getThat().workspace.getLeaf();
  let currLeafID = currLeaf.id;
  if (!currLeafID)
    throw new Error("currLeafID id not found");
  const { newLeaf, temp, originalLeaf } = await openFileInAdjacentTab(
    leavesByTab,
    currTabIdx,
    file,
    type
  );
  await delay(50);
  let id = newLeaf.id;
  if (!id)
    throw new Error("Leaf id not found");
  updateState({
    leafId: id,
    temp,
    peek: true
  });
  const originalLeafId = originalLeaf.id;
  if (newLeaf && newLeaf.view instanceof import_obsidian2.MarkdownView) {
    const editorView = getEditorView(newLeaf);
    if (!editorView)
      throw new Error("Editor view not found");
    const viewport = newLeaf.view.editor.getScrollInfo();
    highlightSelection(editorView, from, to);
    tempDirectionIndicator(
      newLeaf,
      text,
      prefix,
      suffix,
      dataString,
      id === originalLeafId
    );
    const cursorViewport = newLeaf.view.editor.getScrollInfo();
    updateState({
      dataString,
      originalTop: editorView.documentTop,
      // originalLeafId: currLeafID,
      cursorViewport
    });
  }
  if (id != originalLeafId && (newLeaf.containerEl.querySelector(".view-content").style.boxShadow == "none" || newLeaf.containerEl.querySelector(".view-content").style.boxShadow == "")) {
    newLeaf.containerEl.querySelector(".view-content").style.boxShadow = "inset 0px 0px 10px 10px rgba(248, 255, 255)";
  }
  if (originalLeafId) {
    updateState({
      originalLeafId
    });
  }
}
async function endReferenceCursorEffect() {
  var _a, _b, _c, _d, _e, _f;
  if (!getCursor() || Object.keys(getCursor()).length == 0) {
    resetCursor();
    return;
  }
  const { dataString, leafId, originalLeafId, temp, cursorViewport, peek } = getCursor();
  if (getHover() != null && getHover().dataString == dataString) {
    resetCursor();
    return;
  }
  const { workspace } = getThat();
  let targetLeaf = workspace.getLeafById(leafId);
  if (!targetLeaf) {
    resetHover();
    throw new Error("Target leaf not found");
  }
  const activeLeaf = getThat().workspace.getLeaf();
  const activeLeafId = activeLeaf.id;
  let editorView = getEditorView(targetLeaf);
  removeHighlights(editorView);
  if (activeLeafId === leafId) {
    resetCursor();
    let containerEl = getContainerElement(targetLeaf);
    if (containerEl != null) {
      (_a = containerEl.querySelector(".view-content")) == null ? void 0 : _a.setAttribute("style", "");
    }
    let activeContainerEl = getContainerElement(activeLeaf);
    if (activeContainerEl != null) {
      (_b = activeContainerEl.querySelector(".reference-span-selected")) == null ? void 0 : _b.classList.remove("reference-span-selected");
      (_c = activeContainerEl.querySelector(".reference-data-span-selected")) == null ? void 0 : _c.classList.remove("reference-data-span-selected");
    }
    return;
  }
  if (cursorViewport && targetLeaf && targetLeaf.view instanceof import_obsidian2.MarkdownView) {
    const view = targetLeaf.view;
    view.editor.scrollTo(0, cursorViewport.top);
    if (getHover() != null) {
      const { dataString: dataString2, cursorViewport: cursorViewport2, leafId: leafId2, originalLeafId: originalLeafId2 } = getHover();
      let [prefix, text, suffix, file, from, to] = processURI(dataString2);
      const cursorLeaf = workspace.getLeafById(leafId2);
      workspace.revealLeaf(cursorLeaf);
      const editorView2 = getEditorView(cursorLeaf);
      highlightSelection(editorView2, from, to);
    } else {
      let containerEl = getContainerElement(targetLeaf);
      if (containerEl != null) {
        (_d = containerEl.querySelector(".view-content")) == null ? void 0 : _d.setAttribute("style", "");
      }
    }
    let activeContainerEl = getContainerElement(activeLeaf);
    if (activeContainerEl != null) {
      (_e = activeContainerEl.querySelector(".reference-span-selected")) == null ? void 0 : _e.classList.remove("reference-span-selected");
      (_f = activeContainerEl.querySelector(".reference-data-span-selected")) == null ? void 0 : _f.classList.remove("reference-data-span-selected");
    }
  }
  if (temp && targetLeaf) {
    targetLeaf.detach();
  }
  if (peek) {
    let originalLeaf = workspace.getLeafById(originalLeafId);
    if (!originalLeaf)
      throw new Error("Original leaf not found");
    workspace.revealLeaf(originalLeaf);
  }
  resetCursor();
}
async function endReferenceHoverEffect() {
  var _a, _b, _c;
  if (!getHover() || Object.keys(getHover()).length == 0) {
    resetHover();
    return;
  }
  const { dataString, leafId, originalLeafId, temp, cursorViewport, peek } = getHover();
  if (getCursor() != null && getCursor().dataString == dataString) {
    resetHover();
    return;
  }
  const { workspace } = getThat();
  let targetLeaf = workspace.getLeafById(leafId);
  if (!targetLeaf) {
    resetHover();
    throw new Error("Target leaf not found");
  }
  const activeLeaf = getThat().workspace.getLeaf();
  let editorView = getEditorView(targetLeaf);
  removeHighlights(editorView);
  if (cursorViewport && targetLeaf && targetLeaf.view instanceof import_obsidian2.MarkdownView) {
    const view = targetLeaf.view;
    view.editor.scrollTo(0, cursorViewport.top);
    if (getCursor() != null) {
      const { dataString: dataString2, cursorViewport: cursorViewport2, leafId: leafId2, originalLeafId: originalLeafId2 } = getCursor();
      let [prefix, text, suffix, file, from, to] = processURI(dataString2);
      const cursorLeaf = workspace.getLeafById(leafId2);
      workspace.revealLeaf(cursorLeaf);
      const editorView2 = getEditorView(cursorLeaf);
      if (!editorView2)
        throw new Error("Editor view not found");
      highlightSelection(editorView2, from, to);
    } else {
      let containerEl = getContainerElement(targetLeaf);
      if (containerEl != null) {
        (_a = containerEl.querySelector(".view-content")) == null ? void 0 : _a.setAttribute("style", "");
      }
    }
    let activeContainerEl = getContainerElement(activeLeaf);
    if (activeContainerEl != null) {
      (_b = activeContainerEl.querySelector(".reference-span-selected")) == null ? void 0 : _b.classList.remove("reference-span-selected");
      (_c = activeContainerEl.querySelector(".reference-data-span-selected")) == null ? void 0 : _c.classList.remove("reference-data-span-selected");
    }
  }
  if (temp && targetLeaf) {
    targetLeaf.detach();
    let originalLeaf = workspace.getLeafById(originalLeafId);
    if (!originalLeaf)
      throw new Error("Original leaf not found");
    workspace.revealLeaf(originalLeaf);
  }
  if (peek) {
    let originalLeaf = workspace.getLeafById(originalLeafId);
    if (!originalLeaf) {
      resetHover();
      throw new Error("Original leaf not found");
    }
    workspace.revealLeaf(originalLeaf);
  }
  resetHover();
}
async function endBacklinkHoverEffect() {
  var _a;
  if (!getBacklinkHover() || Object.keys(getBacklinkHover()).length == 0) {
    resetBacklinkHover();
    return;
  }
  const {
    dataString,
    leafId,
    originalLeafId,
    backlinkLeafId,
    temp,
    cursorViewport,
    originalTab,
    peek
  } = getBacklinkHover();
  if (getCursor() != null && getCursor().dataString == dataString) {
    resetBacklinkHover();
    return;
  }
  const { workspace } = getThat();
  let targetLeaf = workspace.getLeafById(leafId);
  if (!targetLeaf) {
    resetBacklinkHover();
    throw new Error("Target leaf not found");
  }
  let backlinkSpan = targetLeaf.containerEl.querySelector(
    `span[data="${dataString}"]`
  );
  if (backlinkSpan) {
    backlinkSpan.classList.remove("reference-data-span-hovered");
  }
  if (cursorViewport && targetLeaf && targetLeaf.view instanceof import_obsidian2.MarkdownView) {
    const view = targetLeaf.view;
    view.editor.scrollTo(0, cursorViewport.top);
  }
  let containerEl = getContainerElement(targetLeaf);
  if (containerEl != null) {
    (_a = containerEl.querySelector(".view-content")) == null ? void 0 : _a.setAttribute("style", "");
  }
  let editorView = getEditorView(targetLeaf);
  removeHighlights(editorView);
  const originalLeaf = workspace.getLeafById(backlinkLeafId);
  if (!originalLeaf) {
    resetBacklinkHover();
    throw new Error("Original leaf not found");
  }
  let originalEditorView = getEditorView(originalLeaf);
  removeHighlights(originalEditorView);
  if (getCursor() != null) {
    const { dataString: dataString2, cursorViewport: cursorViewport2, leafId: leafId2, originalLeafId: originalLeafId2 } = getCursor();
    let [prefix, text, suffix, file, from, to] = processURI(dataString2);
    const cursorLeaf = workspace.getLeafById(leafId2);
    workspace.revealLeaf(cursorLeaf);
    const editorView2 = getEditorView(cursorLeaf);
    highlightSelection(editorView2, from, to);
  }
  if (temp && targetLeaf) {
    targetLeaf.detach();
  }
  if (peek) {
    let originalLeaf2 = workspace.getLeafById(originalLeafId);
    if (!originalLeaf2) {
      resetBacklinkHover();
      throw new Error("Original leaf not found");
    }
    workspace.revealLeaf(originalLeaf2);
  }
  resetBacklinkHover();
}

// src/utils.ts
function encodeURIComponentString(str) {
  return encodeURIComponent(str).replace(/[:()]/g, function(c) {
    return "%" + c.charCodeAt(0).toString(16);
  });
}
function decodeURIComponentString2(str) {
  return decodeURIComponent(
    str.replace(/%3A/g, ":").replace(/%28/g, "(").replace(/%29/g, ")")
  );
}
function processURI(dataString) {
  let [prefix, text, suffix, file, from, to, portal] = dataString.split(":");
  prefix = decodeURIComponentString2(prefix);
  text = decodeURIComponentString2(text);
  suffix = decodeURIComponentString2(suffix);
  file = decodeURIComponentString2(file);
  from = decodeURIComponentString2(from);
  to = decodeURIComponentString2(to);
  if (portal)
    portal = decodeURIComponentString2(portal);
  return [prefix, text, suffix, file, parseInt(from), parseInt(to), portal];
}
function getPrefixAndSuffix(document2, from, to) {
  let prefix = document2.slice(from - 25, from).split("\n").slice(-1)[0];
  let suffix = document2.slice(to, to + 25).split("\n")[0];
  return { prefix, suffix };
}
function findTextPositions(text, searchTerm, prefix = "", suffix = "") {
  let rollingIndex = 0;
  const lines = text.split("\n").map((line, i) => {
    let data = { line, index: rollingIndex, length: line.length + 1, i };
    rollingIndex += data.length;
    return data;
  });
  if (text.includes(prefix + searchTerm + suffix)) {
    let matchIndex = text.indexOf(prefix + searchTerm + suffix);
    let startIndex = lines.findIndex((line) => line.index > matchIndex + prefix.length) - 1;
    let endIndex = lines.findIndex(
      (line) => line.index > matchIndex + prefix.length + searchTerm.length
    ) - 1;
    if (startIndex == -2)
      startIndex = lines.length - 1;
    if (endIndex == -2)
      endIndex = lines.length - 1;
    return {
      rangeStart: {
        line: startIndex,
        ch: matchIndex + prefix.length - lines[startIndex].index
      },
      rangeEnd: {
        line: endIndex,
        ch: matchIndex + prefix.length + searchTerm.length - lines[endIndex].index
      },
      lines
    };
  }
  return null;
}
function checkCursorPositionAtDatastring(evt) {
  const activeView = this.app.workspace.getActiveViewOfType(import_obsidian3.MarkdownView);
  const cursorFrom = activeView == null ? void 0 : activeView.editor.getCursor("from");
  const cursorTo = activeView == null ? void 0 : activeView.editor.getCursor("to");
  let matched = false;
  let matchSpan = void 0;
  if (cursorFrom && cursorTo && cursorFrom.ch == cursorTo.ch && cursorFrom.line == cursorTo.line) {
    const lineText = activeView == null ? void 0 : activeView.editor.getLine(cursorFrom.line);
    if (lineText) {
      const matches = [...lineText.matchAll(REFERENCE_REGEX)];
      matches.forEach((match) => {
        var _a;
        if ((_a = match.index) == null ? void 0 : _a.toString()) {
          const start = match.index;
          const end = start + match[0].length;
          if (end == cursorTo.ch && evt.target) {
            const dataString = match[1];
            let checkContainer = evt.target instanceof Element;
            if (!checkContainer)
              throw new Error("Element not instance of Element");
            let container = evt.target;
            let activeLine;
            if (container.classList.contains("cm-active")) {
              activeLine = container;
            } else {
              activeLine = container.querySelector(".cm-active");
            }
            if (!activeLine)
              throw new Error("Element not instance of Element");
            let span = activeLine.querySelector(`span[data="${dataString}"]`);
            if (span && span instanceof HTMLSpanElement) {
              matched = true;
              matchSpan = span;
            } else {
            }
          }
        }
      });
    }
  }
  return { matched, span: matchSpan };
}
function handleRemoveHoveredCursor2(user) {
  if (getHoveredCursor()) {
    let nonCursors = getHoveredCursor().filter((element) => {
      return element.user !== user;
    }).map((element) => element.cursor.closest("span"));
    getHoveredCursor().filter((element) => element.user === user).forEach((element) => {
      if (!nonCursors.includes(element.cursor.closest("span"))) {
        let svg = element.cursor;
        if (!svg)
          throw new Error("SVG not found");
        if (svg.classList.contains("reference-icon"))
          svg.style.backgroundColor = "white";
        else {
          svg.setAttribute("fill", "white");
          svg.style.backgroundColor = "";
        }
        element.cursor.style.backgroundColor = "white";
      }
    });
    removeHoveredCursor(user);
  }
}
function checkFocusCursor(evt) {
  let { matched, span } = checkCursorPositionAtDatastring(evt);
  console.log(span);
  if (matched && span) {
    updateHoveredCursorColor(span, ACTION_TYPE.CURSOR);
    endReferenceCursorEffect();
    startReferenceEffect(span, ACTION_TYPE.CURSOR);
  } else {
    endReferenceCursorEffect();
    handleRemoveHoveredCursor2(ACTION_TYPE.CURSOR);
  }
}

// src/references.ts
function createReferenceIcon(portalText = null) {
  const span = document.createElement("span");
  span.style.cursor = "pointer";
  const height = REFERENCE_ICON_HEIGHT;
  const width = height * 0.9;
  if (portalText == null) {
    const svg2 = document.createElementNS("http://www.w3.org/2000/svg", "svg");
    svg2.setAttribute("width", `${width}`);
    svg2.setAttribute("height", `${height}`);
    svg2.setAttribute("viewBox", `0 0 ${width} ${height}`);
    svg2.setAttribute("fill", "white");
    svg2.setAttribute("xmlns", "http://www.w3.org/2000/svg");
    svg2.style.border = "3px solid grey";
    svg2.style.backgroundColor = "white";
    svg2.style.borderRadius = "3px";
    svg2.style.cursor = "pointer";
    svg2.classList.add("reference-icon");
    const line = document.createElementNS("http://www.w3.org/2000/svg", "line");
    line.setAttribute("x1", "3");
    line.setAttribute("y1", `${(height - 3) / 3}`);
    line.setAttribute("x2", "12");
    line.setAttribute("y2", `${(height - 3) / 3}`);
    line.setAttribute("stroke-width", "2");
    line.setAttribute("stroke", "grey");
    svg2.appendChild(line);
    const line2 = document.createElementNS(
      "http://www.w3.org/2000/svg",
      "line"
    );
    line2.setAttribute("x1", "3");
    line2.setAttribute("y1", `${(height - 3) / 3 * 2}`);
    line2.setAttribute("x2", "15");
    line2.setAttribute("y2", `${(height - 3) / 3 * 2}`);
    line2.setAttribute("stroke-width", "2");
    line2.setAttribute("stroke", "grey");
    svg2.appendChild(line2);
    const line3 = document.createElementNS(
      "http://www.w3.org/2000/svg",
      "line"
    );
    line3.setAttribute("x1", "3");
    line3.setAttribute("y1", `${(height - 3) / 3 * 3}`);
    line3.setAttribute("x2", "10");
    line3.setAttribute("y2", `${(height - 3) / 3 * 3}`);
    line3.setAttribute("stroke-width", "2");
    line3.setAttribute("stroke", "grey");
    svg2.appendChild(line3);
    span.appendChild(svg2);
    return { span, svg: svg2 };
  }
  const svg = document.createElementNS("http://www.w3.org/2000/svg", "svg");
  svg.setAttribute("width", `${width}`);
  svg.setAttribute("height", `${height}`);
  svg.setAttribute("viewBox", `0 0 ${width} ${height}`);
  svg.setAttribute("fill", "white");
  svg.setAttribute("xmlns", "http://www.w3.org/2000/svg");
  svg.classList.add("portal-icon");
  const path = document.createElementNS("http://www.w3.org/2000/svg", "path");
  path.setAttribute(
    "d",
    "M4 6H13M4 10H14M3.99643 1.00037C7.0853 0.999923 11.1618 0.999881 14.0043 1.00025C15.6603 1.00046 17 2.34315 17 3.99923V11.3601C17 12.9951 15.6909 14.3276 14.0563 14.3582L7.34301 14.4842C6.79168 14.4945 6.25387 14.6566 5.78866 14.9527L2.53688 17.022C1.87115 17.4456 1 16.9674 1 16.1783V3.99993C1 2.34351 2.34001 1.0006 3.99643 1.00037Z"
  );
  path.setAttribute("stroke", "gray");
  path.setAttribute("stroke-width", "2");
  span.style.backgroundColor = "";
  svg.appendChild(path);
  span.appendChild(svg);
  if (portalText != "inline reference widget |*|") {
    let portal = document.createElement("div");
    portal.style.color = "black";
    portal.classList.add("portal");
    portal.innerHTML = portalText;
    portal.style.userSelect = "none";
    portal.style.pointerEvents = "none";
    span.appendChild(portal);
  }
  return { span, svg };
}
function updateHoveredCursorColor(span, user) {
  const svg = span.querySelector("svg");
  const portal = span.querySelector(".portal");
  if (span && svg && !portal) {
    handleRemoveHoveredCursor2(user);
    if (svg.classList.contains("reference-icon"))
      svg.style.backgroundColor = SVG_HOVER_COLOR;
    else {
      span = span.querySelector("span");
      span.style.backgroundColor = SVG_HOVER_COLOR;
    }
    updateHoveredCursor3(svg, user);
  }
}
function getCodeMirrorEditorView(editor) {
  return editor.cm;
}
function getContainerElement(editorOrLeaf) {
  return editorOrLeaf.containerEl;
}
function getBacklinkID(backlink) {
  const jsonString = JSON.stringify(backlink);
  const id = v5_default(jsonString, "fb813ebb-1b53-4306-aa9c-655627447f0b");
  return `backlink-${id}`;
}
function getBacklinkContainer(editor) {
  const containerEl = getContainerElement(editor);
  const referenceMarkContainerID = "referenceMarkContainer";
  const container = containerEl.querySelector(`#${referenceMarkContainerID}`);
  if (container) {
    return container;
  } else {
    const newContainer = document.createElement("div");
    newContainer.id = referenceMarkContainerID;
    containerEl.querySelector(".cm-scroller").appendChild(newContainer);
    return newContainer;
  }
}
function getLeafBBoxElements2(leaf) {
  const title = getContainerElement(leaf).querySelector(".inline-title");
  if (!title) {
    throw new Error("Missing title");
  }
  const titleBbox = title.getBoundingClientRect();
  const line = getContainerElement(leaf).querySelector(".cm-line");
  if (!line) {
    throw new Error("Document has no lines");
  }
  const lineBbox = line.getBoundingClientRect();
  return { titleBbox, lineBbox };
}
function updateBacklinkMarkPosition2(leaf, backlinksToLeaf, showPortals) {
  const editor = getMarkdownView(leaf).editor;
  const backlinkContainer = getBacklinkContainer(editor);
  let backlinks2 = [];
  for (let i = 0; i < backlinkContainer.children.length; i++) {
    backlinks2.push(backlinkContainer.children.item(i));
  }
  let backlinkIds = backlinksToLeaf.map((x) => getBacklinkID(x));
  backlinks2.map((x) => x.id).forEach((id) => {
    if (!backlinkIds.includes(id)) {
      let element = document.getElementById(id);
      if (element)
        element.remove();
    }
  });
  const { titleBbox, lineBbox } = getLeafBBoxElements2(leaf);
  let referenceMarkers = backlinksToLeaf.map((backlink) => {
    const { from } = backlink.referencedLocation;
    const bbox = getCodeMirrorEditorView(editor).coordsAtPos(from);
    if (!bbox)
      return;
    let referenceMarker = backlinkContainer.querySelector(
      `#${getBacklinkID(backlink)}`
    );
    if (referenceMarker === null) {
      referenceMarker = createBacklinkMark(backlink);
      backlinkContainer.appendChild(referenceMarker);
    }
    if (bbox) {
      referenceMarker.style.position = "absolute";
      referenceMarker.setAttribute("top", bbox.top.toString());
      referenceMarker.style.top = bbox.top - titleBbox.top + 32 + "px";
      referenceMarker.style.left = lineBbox.width + 40 + "px";
    }
    return referenceMarker;
  });
  let lastYBottom = -Infinity;
  let margin = 4;
  referenceMarkers.sort(
    (a, b) => parseInt(a.getAttribute("top")) - parseInt(b.getAttribute("top"))
  ).forEach((marker) => {
    if (!marker)
      return;
    const portal = marker.querySelector(".portal");
    const svg = marker.querySelector("svg");
    if (showPortals) {
      if (svg && !portal)
        svg.style.display = "inline";
      else if (svg)
        svg.style.display = "none";
      if (portal) {
        portal.style.display = "inline";
        marker.style.border = "3px solid grey";
        marker.style.padding = "3px";
        marker.style.borderRadius = "3px";
      }
    } else {
      if (svg)
        svg.style.display = "inline";
      if (portal) {
        portal.style.display = "none";
        marker.style.border = "none";
        marker.style.padding = "0px";
        marker.style.borderRadius = "0px";
      }
    }
    let top = parseInt(marker.getAttribute("top"));
    top = Math.max(top, lastYBottom + margin);
    lastYBottom = top + marker.getBoundingClientRect().height + margin;
    marker.setAttribute("top", top.toString());
    marker.style.top = top - titleBbox.top + 32 + "px";
    marker.style.left = lineBbox.width + 40 + "px";
  });
}
var debounceTimer;
async function updateBacklinkMarkPositions2() {
  clearTimeout(debounceTimer);
  debounceTimer = setTimeout(() => {
    const leaves = getThat().workspace.getLeavesOfType(
      "markdown"
    );
    setTimeout(async () => {
      const allBacklinks = await recomputeReferencesForPage();
      leaves.forEach((leaf) => {
        const backlinksToLeaf = allBacklinks.filter(
          // @ts-ignore
          (b) => b.referencedLocation.filename == leaf.view.file.path
        );
        const showPortals = getContainerElement(leaf).innerWidth > 900;
        updateBacklinkMarkPosition2(leaf, backlinksToLeaf, showPortals);
      });
    }, 500);
  }, 100);
}
function createBacklinkMark(backlink) {
  let { span, svg } = createReferenceIcon(backlink.portalText);
  const portal = span.querySelector(".portal");
  span.style.position = "absolute";
  span.id = getBacklinkID(backlink);
  span.setAttribute("reference", JSON.stringify(backlink));
  span.addEventListener("mouseenter", async () => {
    if (portal && portal.style.display != "none") {
      span.style.backgroundColor = SVG_HOVER_COLOR;
    } else {
      span.style.backgroundColor = "";
      svg.setAttribute("fill", SVG_HOVER_COLOR);
    }
    updateHoveredCursorColor(span, ACTION_TYPE.BACKLINK);
  });
  span.addEventListener("mouseleave", async () => {
    if (portal && portal.style.display != "none") {
      span.style.backgroundColor = "white";
    } else {
      span.style.backgroundColor = "";
      if (portal) {
        svg.setAttribute("fill", "white");
      } else {
        svg.style.backgroundColor = "white";
      }
    }
    handleRemoveHoveredCursor2(ACTION_TYPE.BACKLINK);
  });
  const resizeObserver = new ResizeObserver((entries) => {
    if (portal && portal.style.display != "none") {
      span.style.backgroundColor = "white";
    } else {
      span.style.backgroundColor = "";
    }
  });
  resizeObserver.observe(span);
  span.addEventListener("click", openBacklinkReference);
  return span;
}
function addReferencesToLeaf(leaf) {
  const markdownView = getMarkdownView(leaf);
  let workspaceTabs = markdownView.containerEl.closest(".workspace-tabs");
  if (!workspaceTabs) {
    throw new Error("Missing workspace tabs");
  }
  updateBacklinkMarkPositions2();
  getContainerElement(markdownView.editor).querySelector(".cm-scroller").addEventListener("scroll", () => {
    updateBacklinkMarkPositions2();
  });
  let resizeObserver = new ResizeObserver(() => {
    updateBacklinkMarkPositions2();
  });
  resizeObserver.observe(workspaceTabs);
}
function getMarkdownView(leaf) {
  if (!(leaf.view instanceof import_obsidian4.MarkdownView)) {
    throw new Error("Unexpected non-markdown view");
  }
  return leaf.view;
}
function createBacklinkData(referencingFileData, referencingFile) {
  let backlinks2 = [];
  let matches = [...referencingFileData.matchAll(REFERENCE_REGEX)];
  matches.forEach((match) => {
    let [prefix, text, suffix, filename, from, to, portal] = processURI(
      match[1]
    );
    const referencedLocation = {
      prefix,
      text,
      suffix,
      filename,
      from,
      to
    };
    let index = referencingFileData.indexOf(match[0]);
    const referencingSurroundingStrings = getPrefixAndSuffix(
      referencingFileData,
      index,
      index + match[0].length
    );
    const referencingLocation = {
      // prefix: referencingFileData.slice(index - 25, index),
      prefix: referencingSurroundingStrings.prefix,
      text: referencingFileData.slice(index, index + match[0].length),
      // suffix: referencingFileData.slice(
      // 	index + match[0].length,
      // 	index + match[0].length + 25
      // ),
      suffix: referencingSurroundingStrings.suffix,
      filename: referencingFile.path,
      from: match.index,
      // TODO do weird string format
      to: match.index + match[0].length
      // TODO do weird string format
    };
    if (portal == "portal") {
      const getLineText = (text2, index2) => {
        const startOfLine = text2.lastIndexOf("\n", index2 - 1) + 1;
        const endOfLine = text2.indexOf("\n", index2);
        return text2.slice(
          startOfLine,
          endOfLine !== -1 ? endOfLine : void 0
        );
      };
      let line = getLineText(referencingFileData, index);
      let portalText = line.replace(new RegExp(REFERENCE_REGEX, "g"), "");
      let portalTextSlice = portalText.slice(0, PORTAL_TEXT_SLICE_SIZE);
      backlinks2.push({
        referencedLocation,
        referencingLocation,
        dataString: match[1],
        portalText: portalTextSlice
      });
    } else {
      backlinks2.push({
        referencedLocation,
        referencingLocation,
        dataString: match[1]
      });
    }
  });
  return backlinks2;
}
function generateBacklinks() {
  console.log("generating references");
  let backlinks2 = [];
  let markdownFiles = this.app.vault.getMarkdownFiles();
  Promise.all(
    markdownFiles.map((file) => this.app.vault.read(file))
  ).then((files) => {
    const zippedArray = markdownFiles.map((file, index) => ({
      markdownFile: file,
      fileData: files[index]
    }));
    zippedArray.forEach((file) => {
      let fileBacklinks = createBacklinkData(file.fileData, file.markdownFile);
      updateBacklinks(fileBacklinks);
      backlinks2.push(...fileBacklinks);
    });
    const leaves = this.app.workspace.getLeavesOfType("markdown");
    leaves.forEach((leaf) => {
      addReferencesToLeaf(leaf);
    });
  });
}
async function recomputeReferencesForPage() {
  const leaves = getThat().workspace.getLeavesOfType("markdown");
  let references = [];
  let markdownFiles = this.app.vault.getMarkdownFiles();
  let promises = markdownFiles.map((file) => this.app.vault.read(file));
  let files = await Promise.all(promises);
  const zippedArray = markdownFiles.map((file, index) => ({
    markdownFile: file,
    fileData: files[index]
  }));
  zippedArray.forEach((file) => {
    let fileBacklinks = createBacklinkData(file.fileData, file.markdownFile);
    updateBacklinks(fileBacklinks);
    references.push(...fileBacklinks);
  });
  return references;
}
async function openBacklinkReference(ev) {
  let cursor = getCursor();
  let hover = getBacklinkHover();
  let leaf = getThat().workspace.getLeafById(hover.leafId);
  let container = leaf.containerEl;
  if (!container)
    throw new Error("Container not found");
  container.querySelector(".view-content").style.boxShadow = "none";
  if (cursor && hover && cursor.dataString && hover.dataString && cursor.dataString == hover.dataString) {
    updateCursor({
      temp: false,
      cursorViewport: null,
      peek: false
    });
  }
  updateBacklinkHover({
    temp: false,
    cursorViewport: null,
    peek: false
  });
  handleRemoveHoveredCursor2(ACTION_TYPE.CURSOR);
  resetCursor();
}
async function openReference(ev) {
  let cursor = getCursor();
  let hover = getHover();
  let leaf = getThat().workspace.getLeafById(hover.leafId);
  let container = leaf.containerEl;
  if (!container)
    throw new Error("Container not found");
  container.querySelector(".view-content").style.boxShadow = "none";
  if (cursor && hover && cursor.dataString && hover.dataString && cursor.dataString == hover.dataString) {
    updateCursor({
      temp: false,
      cursorViewport: null,
      peek: false
    });
  }
  updateHover({
    temp: false,
    cursorViewport: null,
    peek: false
  });
  handleRemoveHoveredCursor2(ACTION_TYPE.CURSOR);
  resetCursor();
}

// src/state.ts
var that = import_state6.StateField.define({
  create() {
    return null;
  },
  update(value, tr) {
    if (tr["annotations"].length == 2 && tr["annotations"][0].value.type == "that") {
      return tr["annotations"][0].value.that.app;
    }
    return value;
  }
});
var hoveredCursor = import_state6.StateField.define({
  create() {
    return null;
  },
  update(value, tr) {
    if (tr["annotations"].length == 2 && tr["annotations"][0].value.type == "hoveredCursor") {
      if (value)
        return [
          ...value.filter(
            (cursor) => cursor.user != tr["annotations"][0].value.user
          ),
          {
            cursor: tr["annotations"][0].value.cursor,
            user: tr["annotations"][0].value.user
          }
        ];
      return [
        {
          cursor: tr["annotations"][0].value.cursor,
          user: tr["annotations"][0].value.user
        }
      ];
    } else if (tr["annotations"].length == 2 && tr["annotations"][0].value.type == "removeHoveredCursor") {
      if (value)
        return value.filter(
          (cursor) => cursor.user != tr["annotations"][0].value.user
        );
      return value;
    }
    return value;
  }
});
var backlinks = import_state6.StateField.define({
  create() {
    return [];
  },
  update(value, tr) {
    if (tr.effects.length > 0) {
      try {
        let data = JSON.parse(
          tr.effects[0].value
        );
        if (data.type == "backlink") {
          if (data.backlinks.length == 0)
            return value;
          let referencingLocation = data.backlinks[0]["referencingLocation"]["filename"];
          let filteredValues = value.filter(
            (backlink) => backlink.referencingLocation.filename != referencingLocation
          );
          return [...filteredValues, ...data.backlinks];
        }
        return value;
      } catch (e) {
        console.log(e);
        return value;
      }
    }
    return value;
  }
});
var hoverElement = import_state6.StateField.define({
  create() {
    return null;
  },
  update(value, tr) {
    if (tr.effects.length > 0) {
      try {
        let data = JSON.parse(tr.effects[0].value);
        if (data.type == "hover-start") {
          return Object.assign({}, data);
        } else if (data.type == "hover") {
          if (value)
            return Object.assign(value, data);
          return data;
        } else if (data.type == "hover-off") {
          return null;
        }
        return value;
      } catch (e) {
        console.log(e);
        return value;
      }
    }
    return value;
  }
});
var backlinkHoverElement = import_state6.StateField.define({
  create() {
    return null;
  },
  update(value, tr) {
    if (tr.effects.length > 0) {
      try {
        let data = JSON.parse(tr.effects[0].value);
        if (data.type == "backlink-start") {
          return Object.assign({}, data);
        } else if (data.type == "backlink-update") {
          if (value)
            return Object.assign(value, data);
          return data;
        } else if (data.type == "backlink-off") {
          return null;
        }
        return value;
      } catch (e) {
        console.log(e);
        return value;
      }
    }
    return value;
  }
});
var cursorElement = import_state6.StateField.define({
  create() {
    return null;
  },
  update(value, tr) {
    if (tr.effects.length > 0) {
      try {
        let data = JSON.parse(tr.effects[0].value);
        if (data.type == "cursor-start") {
          return {};
        } else if (data.type == "cursor") {
          if (value)
            return Object.assign(value, data);
          return data;
        } else if (data.type == "cursor-off") {
          return null;
        }
        return value;
      } catch (e) {
        console.log(e);
        return value;
      }
    }
    return value;
  }
});
var editorChange = import_state6.StateField.define({
  create() {
    return null;
  },
  update(value, tr) {
    if (tr.effects.length > 0) {
      try {
        let data = JSON.parse(tr.effects[0].value);
        if (data.type == "sync") {
          updateBacklinkMarkPositions2();
          return value;
        }
        return value;
      } catch (e) {
        console.log(e);
        return value;
      }
    }
    return value;
  }
});
var thatAnnotation = import_state6.Annotation.define();
var hoveredCursorAnnotation = import_state6.Annotation.define();
var hoverEffect = import_state6.StateEffect.define();
var backlinkHoverEffect = import_state6.StateEffect.define();
var cursorEffect = import_state6.StateEffect.define();
var backlinkEffect = import_state6.StateEffect.define();
var state3 = import_state6.EditorState.create({
  extensions: [
    that,
    hoveredCursor,
    backlinks,
    hoverElement,
    backlinkHoverElement,
    cursorElement,
    editorChange
  ]
});
function getThat() {
  return state3.field(that);
}
function updateThat(that2) {
  state3 = state3.update({
    annotations: thatAnnotation.of({
      type: "that",
      that: that2
    })
  }).state;
}
function getHoveredCursor() {
  return state3.field(hoveredCursor);
}
function updateHoveredCursor3(cursor, user) {
  state3 = state3.update({
    annotations: hoveredCursorAnnotation.of({
      type: "hoveredCursor",
      cursor,
      user
    })
  }).state;
}
function removeHoveredCursor(user) {
  state3 = state3.update({
    annotations: hoveredCursorAnnotation.of({
      type: "removeHoveredCursor",
      user
    })
  }).state;
}
function getHover() {
  return state3.field(hoverElement);
}
function updateHover(value) {
  state3 = state3.update({
    effects: hoverEffect.of(
      JSON.stringify(Object.assign(value, { type: "hover" }))
    )
  }).state;
}
function resetHover() {
  state3 = state3.update({
    effects: hoverEffect.of(
      JSON.stringify({
        type: "hover-off"
      })
    )
  }).state;
}
function getBacklinkHover() {
  return state3.field(backlinkHoverElement);
}
function updateBacklinkHover(value) {
  state3 = state3.update({
    effects: backlinkHoverEffect.of(
      JSON.stringify(Object.assign(value, { type: "backlink-update" }))
    )
  }).state;
}
function resetBacklinkHover() {
  state3 = state3.update({
    effects: backlinkHoverEffect.of(
      JSON.stringify({
        type: "backlink-off"
      })
    )
  }).state;
}
function getCursor() {
  return state3.field(cursorElement);
}
function updateCursor(value) {
  state3 = state3.update({
    effects: cursorEffect.of(
      JSON.stringify(Object.assign(value, { type: "cursor" }))
    )
  }).state;
}
function resetCursor() {
  state3 = state3.update({
    effects: cursorEffect.of(
      JSON.stringify({
        type: "cursor-off"
      })
    )
  }).state;
}
function getBacklinks2() {
  return state3.field(backlinks);
}
function updateBacklinks(value) {
  state3 = state3.update({
    effects: backlinkEffect.of(
      JSON.stringify(Object.assign({ backlinks: value }, { type: "backlink" }))
    )
  }).state;
}

// src/widget/highlightWidget.ts
var import_view3 = require("@codemirror/view");
var HighlighterWidget = class extends import_view3.WidgetType {
  constructor(name, view) {
    super();
    this.name = name;
    this.view = view;
  }
  eq(other) {
    return this.name === other.name;
  }
  toDOM() {
    const span = document.createElement("fragment");
    span.textContent = this.name;
    span.style.backgroundColor = SVG_HOVER_COLOR;
    span.style.color = "black";
    return span;
  }
};
var highlighterDecoration = (match, view) => import_view3.Decoration.replace({
  widget: new HighlighterWidget(match[1], view)
});
var highlightMatcher = new import_view3.MatchDecorator({
  regexp: /\+\+\+(.*?)\+\+\+/g,
  decoration: (match, view, pos) => {
    return highlighterDecoration(match, view);
  }
});
var highlights = import_view3.ViewPlugin.fromClass(
  class {
    constructor(view) {
      this.highlights = highlightMatcher.createDeco(view);
    }
    update(update) {
      this.highlights = highlightMatcher.updateDeco(update, this.highlights);
    }
    destroy() {
      this.highlights = import_view3.Decoration.none;
    }
  },
  {
    decorations: (instance) => instance.highlights,
    provide: (plugin) => import_view3.EditorView.atomicRanges.of((view) => {
      var _a;
      return ((_a = view.plugin(plugin)) == null ? void 0 : _a.highlights) || import_view3.Decoration.none;
    })
  }
);

// src/widget/referenceWidget.ts
var import_view4 = require("@codemirror/view");
var ReferenceWidget = class extends import_view4.WidgetType {
  constructor(name, view, pos) {
    super();
    this.name = name;
    this.view = view;
    this.pos = pos;
  }
  eq(other) {
    return this.name === other.name;
  }
  async updateName(name) {
    const from = this.pos;
    const to = this.pos + name.length;
    const transaction = this.view.state.update({
      changes: { from, to, insert: name }
    });
    this.view.dispatch(transaction);
    await updateBacklinkMarkPositions2();
    this.name = name;
  }
  getView() {
    return this.view;
  }
  toDOM() {
    const regex = /\[\]\(urn:([^)]*)\)/g;
    let content = regex.exec(this.name);
    if (!content)
      throw new Error("Invalid reference");
    const [prefix, text, suffix, file, from, to, portal, toggle = "f"] = content[1].split(":");
    const { span, svg } = createReferenceIcon(
      portal == "portal" ? "inline reference widget |*|" : null
    );
    if (content)
      span.setAttribute("data", content[1]);
    span.classList.add("reference-data-span");
    const containerSpan = document.createElement("span");
    containerSpan.classList.add("reference-container-span");
    const referenceSpan = document.createElement("span");
    referenceSpan.classList.add("reference-span");
    referenceSpan.innerHTML = decodeURIComponentString2(text);
    referenceSpan.classList.toggle("reference-span-hidden", toggle === "f");
    containerSpan.appendChild(referenceSpan);
    containerSpan.appendChild(span);
    const observer = new MutationObserver(async (mutationsList) => {
      for (const mutation of mutationsList) {
        if (mutation.type === "attributes" && mutation.attributeName === "class") {
          let newToggle = referenceSpan.classList.contains(
            "reference-span-hidden"
          ) ? "f" : "t";
          let reference = `[\u2197](urn:${prefix}:${text}:${suffix}:${file}:${from}:${to}:${portal}:${newToggle})`;
          await this.updateName(reference);
        }
      }
    });
    observer.observe(referenceSpan, { attributes: true });
    containerSpan.addEventListener("click", (ev) => {
      if (ev.metaKey || ev.ctrlKey) {
        referenceSpan.classList.toggle("reference-span-hidden");
      } else {
        openReference(ev);
      }
    });
    return containerSpan;
  }
};
var referenceDecoration = (match, view, pos) => {
  let decoration = import_view4.Decoration.replace({
    widget: new ReferenceWidget(match[0], view, pos)
  });
  return decoration;
};
var referenceMatcher = new import_view4.MatchDecorator({
  // regexp: /\[\u2197\]\(urn:[\s\S^\)]*\)/g,
  // regexp: /\[\u2197\]\(urn:([^:]*:){5,6}[^:]*\)/g,
  // regexp: /\[\u2197\]\(urn:([^:]*:){6}[^:)]*\)/g,
  regexp: /\[\u2197\]\(urn:([^:]*:){7}[^:)]*\)/g,
  decoration: (match, view, pos) => {
    return referenceDecoration(match, view, pos);
  }
});
var referenceResources = import_view4.ViewPlugin.fromClass(
  class {
    constructor(view) {
      this.referenceResources = referenceMatcher.createDeco(view);
    }
    update(update) {
      this.referenceResources = referenceMatcher.updateDeco(
        update,
        this.referenceResources
      );
    }
    destroy() {
      this.referenceResources = import_view4.Decoration.none;
    }
  },
  {
    decorations: (instance) => instance.referenceResources,
    provide: (plugin) => import_view4.EditorView.atomicRanges.of((view) => {
      var _a;
      return ((_a = view.plugin(plugin)) == null ? void 0 : _a.referenceResources) || import_view4.Decoration.none;
    })
  }
);

// src/clipboard.ts
var import_obsidian5 = require("obsidian");
async function updateClipboard(toggle = false, only = false) {
  const view = this.app.workspace.getActiveViewOfType(import_obsidian5.MarkdownView);
  if (view) {
    let selection = view.editor.getSelection();
    if (view.file) {
      const text = view.data;
      const from = view.editor.posToOffset(view.editor.getCursor("from"));
      const to = view.editor.posToOffset(view.editor.getCursor("to"));
      const { prefix, suffix } = getPrefixAndSuffix(text, from, to);
      let reference = `[\u2197](urn:${encodeURIComponentString(
        prefix
      )}-:${encodeURIComponentString(selection)}:-${encodeURIComponentString(
        suffix
      )}:${encodeURIComponentString(view.file.path)}:${from}:${to}:${only ? "portal" : "no-portal"}:${toggle ? "t" : "f"})`;
      await navigator.clipboard.writeText(reference);
    }
  }
}

// src/main.ts
var import_view5 = require("@codemirror/view");
var ReferencePlugin = class extends import_obsidian6.Plugin {
  onload() {
    setTimeout(() => {
      generateBacklinks();
      this.registerEvent(
        this.app.workspace.on("active-leaf-change", (ev) => {
          try {
            const activeView = this.app.workspace.getActiveViewOfType(import_obsidian6.MarkdownView);
            if ((activeView == null ? void 0 : activeView.leaf) != null) {
              addReferencesToLeaf(activeView.leaf);
            }
          } catch (e) {
            console.log(e);
          }
        })
      );
    }, 4e3);
    updateThat(this);
    this.registerEditorExtension([
      highlights,
      referenceResources,
      import_view5.EditorView.updateListener.of(function(e) {
        if (Math.abs(e.changes.desc.newLength - e.changes.desc.length) > 1) {
          updateBacklinkMarkPositions2();
        }
      })
    ]);
    this.registerDomEvent(document, "mousemove", async (evt) => {
      if (evt.metaKey || evt.ctrlKey)
        return;
      let span;
      let dataString;
      if (evt.target && (evt.target instanceof HTMLSpanElement || evt.target instanceof SVGElement || evt.target instanceof SVGPathElement)) {
        span = evt.target;
        while (!(span instanceof HTMLSpanElement) && span.parentElement != null) {
          span = span.parentElement;
        }
      }
      console.log(span);
      if (span && span instanceof HTMLSpanElement && (span == null ? void 0 : span.parentElement) && (span == null ? void 0 : span.parentElement.classList.contains("reference-container-span"))) {
        console.log("start hover effect");
        if (!span.getAttribute("data")) {
          span = span.parentElement;
          span = span.querySelector(".reference-data-span");
          if (!span)
            throw new Error("Span element not found");
        }
        updateHoveredCursorColor(span, ACTION_TYPE.MOUSE);
        startReferenceEffect(span, ACTION_TYPE.MOUSE);
      } else if (span && span instanceof HTMLSpanElement && span.getAttribute("reference")) {
        startBacklinkEffect(span);
      } else if (getHover() != null) {
        endReferenceHoverEffect();
        handleRemoveHoveredCursor2(ACTION_TYPE.MOUSE);
      } else if (getBacklinks2() != null) {
        endBacklinkHoverEffect();
      } else {
        endReferenceHoverEffect();
        handleRemoveHoveredCursor2(ACTION_TYPE.MOUSE);
      }
    });
    this.registerDomEvent(document, "click", async (evt) => {
      if (evt.metaKey || evt.ctrlKey)
        return;
      checkFocusCursor(evt);
      updateBacklinkMarkPositions2();
    });
    this.registerDomEvent(document, "keyup", async (evt) => {
      if (evt.metaKey || evt.ctrlKey)
        return;
      checkFocusCursor(evt);
      updateBacklinkMarkPositions2();
    });
    this.registerDomEvent(document, "keydown", async (evt) => {
      var _a;
      if (evt.key == "\xC7" && evt.metaKey && evt.shiftKey && evt.altKey) {
        updateClipboard(false);
        new import_obsidian6.Notice("Copied reference to clipboard");
      } else if (evt.key == "c" && evt.metaKey && evt.shiftKey) {
        updateClipboard(true);
        new import_obsidian6.Notice("Copied reference to clipboard");
      } else if (evt.key == "s" && evt.metaKey && evt.shiftKey) {
        const editor = (_a = this.app.workspace.getActiveViewOfType(import_obsidian6.MarkdownView)) == null ? void 0 : _a.editor;
        if (!editor)
          return;
        const cursor = editor.getCursor();
        const element = editor.getDoc().cm.contentDOM;
        const lines = element.querySelectorAll(".cm-line");
        const currentLine = lines[cursor.line];
        const spans = Array.from(
          currentLine.querySelectorAll(".reference-span")
        );
        if (spans.every(
          (span) => span.classList.contains("reference-span-hidden")
        )) {
          spans.forEach((span) => {
            span.classList.toggle("reference-span-hidden", false);
          });
          new import_obsidian6.Notice("Toggle annotations on");
        } else {
          spans.forEach((span) => {
            spans.forEach((span2) => {
              span2.classList.toggle("reference-span-hidden", true);
            });
          });
          new import_obsidian6.Notice("Toggle annotations on");
        }
      }
    });
  }
  onunload() {
  }
};
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsic3JjL21haW4udHMiLCAic3JjL3N0YXRlLnRzIiwgInNyYy9yZWZlcmVuY2VzLnRzIiwgIm5vZGVfbW9kdWxlcy91dWlkL2Rpc3QvZXNtLWJyb3dzZXIvcmVnZXguanMiLCAibm9kZV9tb2R1bGVzL3V1aWQvZGlzdC9lc20tYnJvd3Nlci92YWxpZGF0ZS5qcyIsICJub2RlX21vZHVsZXMvdXVpZC9kaXN0L2VzbS1icm93c2VyL3N0cmluZ2lmeS5qcyIsICJub2RlX21vZHVsZXMvdXVpZC9kaXN0L2VzbS1icm93c2VyL3BhcnNlLmpzIiwgIm5vZGVfbW9kdWxlcy91dWlkL2Rpc3QvZXNtLWJyb3dzZXIvdjM1LmpzIiwgIm5vZGVfbW9kdWxlcy91dWlkL2Rpc3QvZXNtLWJyb3dzZXIvc2hhMS5qcyIsICJub2RlX21vZHVsZXMvdXVpZC9kaXN0L2VzbS1icm93c2VyL3Y1LmpzIiwgInNyYy91dGlscy50cyIsICJzcmMvY29uc3RhbnRzLnRzIiwgInNyYy93b3Jrc3BhY2UudHMiLCAic3JjL2VmZmVjdHMudHMiLCAic3JjL21hcmsudHMiLCAic3JjL3dpZGdldC9oaWdobGlnaHRXaWRnZXQudHMiLCAic3JjL3dpZGdldC9yZWZlcmVuY2VXaWRnZXQudHMiLCAic3JjL2NsaXBib2FyZC50cyJdLAogICJzb3VyY2VzQ29udGVudCI6IFsiaW1wb3J0IHsgUGx1Z2luLCBNYXJrZG93blZpZXcsIE5vdGljZSwgRWRpdG9yIH0gZnJvbSBcIm9ic2lkaWFuXCI7XG5cbmltcG9ydCB7IHVwZGF0ZVRoYXQsIGdldFRoYXQsIGdldEhvdmVyLCBnZXRCYWNrbGlua3MgfSBmcm9tIFwiLi9zdGF0ZVwiO1xuaW1wb3J0IHsgaGlnaGxpZ2h0cywgcmVmZXJlbmNlUmVzb3VyY2VzIH0gZnJvbSBcIi4vd2lkZ2V0XCI7XG5pbXBvcnQgeyB1cGRhdGVDbGlwYm9hcmQgfSBmcm9tIFwiLi9jbGlwYm9hcmRcIjtcbmltcG9ydCB7XG5cdGdlbmVyYXRlQmFja2xpbmtzLFxuXHRhZGRSZWZlcmVuY2VzVG9MZWFmLFxuXHR1cGRhdGVCYWNrbGlua01hcmtQb3NpdGlvbnMsXG5cdHVwZGF0ZUhvdmVyZWRDdXJzb3JDb2xvcixcbn0gZnJvbSBcIi4vcmVmZXJlbmNlc1wiO1xuaW1wb3J0IHtcblx0c3RhcnRSZWZlcmVuY2VFZmZlY3QsXG5cdGVuZFJlZmVyZW5jZUhvdmVyRWZmZWN0LFxuXHRzdGFydEJhY2tsaW5rRWZmZWN0LFxuXHRlbmRCYWNrbGlua0hvdmVyRWZmZWN0LFxufSBmcm9tIFwiLi9lZmZlY3RzXCI7XG5pbXBvcnQgeyBjaGVja0ZvY3VzQ3Vyc29yLCBoYW5kbGVSZW1vdmVIb3ZlcmVkQ3Vyc29yIH0gZnJvbSBcIi4vdXRpbHNcIjtcbmltcG9ydCB7IEFDVElPTl9UWVBFLCBTVkdfSE9WRVJfQ09MT1IgfSBmcm9tIFwiLi9jb25zdGFudHNcIjtcbmltcG9ydCB7IEVkaXRvclZpZXcsIFZpZXdVcGRhdGUgfSBmcm9tIFwiQGNvZGVtaXJyb3Ivdmlld1wiO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBSZWZlcmVuY2VQbHVnaW4gZXh0ZW5kcyBQbHVnaW4ge1xuXHRvbmxvYWQoKSB7XG5cdFx0c2V0VGltZW91dCgoKSA9PiB7XG5cdFx0XHRnZW5lcmF0ZUJhY2tsaW5rcygpO1xuXHRcdFx0dGhpcy5yZWdpc3RlckV2ZW50KFxuXHRcdFx0XHR0aGlzLmFwcC53b3Jrc3BhY2Uub24oXCJhY3RpdmUtbGVhZi1jaGFuZ2VcIiwgKGV2KSA9PiB7XG5cdFx0XHRcdFx0Ly8gY29uc29sZS5sb2coXCJhY3RpdmUtbGVhZi1jaGFuZ2VkOlwiKTtcblx0XHRcdFx0XHQvLyBUaGlzIHNob3VsZCBjcmVhdGUgcmVmZXJlbmNlTWFya2VycyBpZiB0aGV5IGRvbid0IGV4aXN0IGFuZCB1cGRhdGVcblx0XHRcdFx0XHQvLyBlbHNlIHVwZGF0ZSBvbmx5XG5cblx0XHRcdFx0XHR0cnkge1xuXHRcdFx0XHRcdFx0Y29uc3QgYWN0aXZlVmlldyA9XG5cdFx0XHRcdFx0XHRcdHRoaXMuYXBwLndvcmtzcGFjZS5nZXRBY3RpdmVWaWV3T2ZUeXBlKE1hcmtkb3duVmlldyk7XG5cdFx0XHRcdFx0XHRpZiAoYWN0aXZlVmlldz8ubGVhZiAhPSBudWxsKSB7XG5cdFx0XHRcdFx0XHRcdGFkZFJlZmVyZW5jZXNUb0xlYWYoYWN0aXZlVmlldy5sZWFmKTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9IGNhdGNoIChlKSB7XG5cdFx0XHRcdFx0XHRjb25zb2xlLmxvZyhlKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH0pXG5cdFx0XHQpO1xuXHRcdH0sIDQwMDApO1xuXG5cdFx0dXBkYXRlVGhhdCh0aGlzKTtcblxuXHRcdHRoaXMucmVnaXN0ZXJFZGl0b3JFeHRlbnNpb24oW1xuXHRcdFx0aGlnaGxpZ2h0cyxcblx0XHRcdHJlZmVyZW5jZVJlc291cmNlcyxcblx0XHRcdEVkaXRvclZpZXcudXBkYXRlTGlzdGVuZXIub2YoZnVuY3Rpb24gKGUpIHtcblx0XHRcdFx0aWYgKE1hdGguYWJzKGUuY2hhbmdlcy5kZXNjLm5ld0xlbmd0aCAtIGUuY2hhbmdlcy5kZXNjLmxlbmd0aCkgPiAxKSB7XG5cdFx0XHRcdFx0dXBkYXRlQmFja2xpbmtNYXJrUG9zaXRpb25zKCk7XG5cdFx0XHRcdH1cblx0XHRcdH0pLFxuXHRcdF0pO1xuXG5cdFx0dGhpcy5yZWdpc3RlckRvbUV2ZW50KGRvY3VtZW50LCBcIm1vdXNlbW92ZVwiLCBhc3luYyAoZXZ0KSA9PiB7XG5cdFx0XHRpZiAoZXZ0Lm1ldGFLZXkgfHwgZXZ0LmN0cmxLZXkpIHJldHVybjtcblxuXHRcdFx0Ly8gY29uc3Qgc2VtaU1vZGUgPSBldnQubWV0YUtleSB8fCBldnQuY3RybEtleTtcblx0XHRcdGxldCBzcGFuO1xuXHRcdFx0bGV0IGRhdGFTdHJpbmc7XG5cdFx0XHRpZiAoXG5cdFx0XHRcdGV2dC50YXJnZXQgJiZcblx0XHRcdFx0KGV2dC50YXJnZXQgaW5zdGFuY2VvZiBIVE1MU3BhbkVsZW1lbnQgfHxcblx0XHRcdFx0XHRldnQudGFyZ2V0IGluc3RhbmNlb2YgU1ZHRWxlbWVudCB8fFxuXHRcdFx0XHRcdGV2dC50YXJnZXQgaW5zdGFuY2VvZiBTVkdQYXRoRWxlbWVudClcblx0XHRcdCkge1xuXHRcdFx0XHQvLyBJZiBlbGVtZW50IGlzIHN2ZywgZmluZCB0aGUgY29udGFpbmluZyBwYXJlbnQgc3BhblxuXHRcdFx0XHRzcGFuID0gZXZ0LnRhcmdldDtcblxuXHRcdFx0XHR3aGlsZSAoXG5cdFx0XHRcdFx0IShzcGFuIGluc3RhbmNlb2YgSFRNTFNwYW5FbGVtZW50KSAmJlxuXHRcdFx0XHRcdHNwYW4ucGFyZW50RWxlbWVudCAhPSBudWxsXG5cdFx0XHRcdCkge1xuXHRcdFx0XHRcdHNwYW4gPSBzcGFuLnBhcmVudEVsZW1lbnQ7XG5cdFx0XHRcdH1cblx0XHRcdH1cblxuXHRcdFx0Y29uc29sZS5sb2coc3Bhbik7XG5cblx0XHRcdGlmIChcblx0XHRcdFx0c3BhbiAmJlxuXHRcdFx0XHRzcGFuIGluc3RhbmNlb2YgSFRNTFNwYW5FbGVtZW50ICYmXG5cdFx0XHRcdHNwYW4/LnBhcmVudEVsZW1lbnQgJiZcblx0XHRcdFx0c3Bhbj8ucGFyZW50RWxlbWVudC5jbGFzc0xpc3QuY29udGFpbnMoXCJyZWZlcmVuY2UtY29udGFpbmVyLXNwYW5cIilcblx0XHRcdCkge1xuXHRcdFx0XHRjb25zb2xlLmxvZyhcInN0YXJ0IGhvdmVyIGVmZmVjdFwiKTtcblxuXHRcdFx0XHRpZiAoIXNwYW4uZ2V0QXR0cmlidXRlKFwiZGF0YVwiKSkge1xuXHRcdFx0XHRcdHNwYW4gPSBzcGFuLnBhcmVudEVsZW1lbnQ7XG5cdFx0XHRcdFx0c3BhbiA9IHNwYW4ucXVlcnlTZWxlY3RvcihcIi5yZWZlcmVuY2UtZGF0YS1zcGFuXCIpIGFzIEhUTUxTcGFuRWxlbWVudDtcblx0XHRcdFx0XHRpZiAoIXNwYW4pIHRocm93IG5ldyBFcnJvcihcIlNwYW4gZWxlbWVudCBub3QgZm91bmRcIik7XG5cdFx0XHRcdH1cblx0XHRcdFx0Ly8gc3BhbiA9IHNwYW4ucGFyZW50RWxlbWVudDtcblx0XHRcdFx0Ly8gaWYgKCFzcGFuKSB0aHJvdyBuZXcgRXJyb3IoXCJTcGFuIGVsZW1lbnQgbm90IGZvdW5kXCIpO1xuXHRcdFx0XHQvLyBjb25zb2xlLmxvZyhzcGFuKTtcblxuXHRcdFx0XHQvLyBjb25zb2xlLmxvZyhcInN0YXJ0IGhvdmVyIHJlZmVyZW5jZSBlZmZlY3RcIik7XG5cdFx0XHRcdHVwZGF0ZUhvdmVyZWRDdXJzb3JDb2xvcihzcGFuLCBBQ1RJT05fVFlQRS5NT1VTRSk7XG5cdFx0XHRcdHN0YXJ0UmVmZXJlbmNlRWZmZWN0KHNwYW4sIEFDVElPTl9UWVBFLk1PVVNFKTtcblx0XHRcdH0gZWxzZSBpZiAoXG5cdFx0XHRcdHNwYW4gJiZcblx0XHRcdFx0c3BhbiBpbnN0YW5jZW9mIEhUTUxTcGFuRWxlbWVudCAmJlxuXHRcdFx0XHRzcGFuLmdldEF0dHJpYnV0ZShcInJlZmVyZW5jZVwiKVxuXHRcdFx0KSB7XG5cdFx0XHRcdC8vIGNvbnNvbGUubG9nKFwic3RhcnQgYmFja2xpbmsgZWZmZWN0XCIpO1xuXHRcdFx0XHQvLyB1cGRhdGVIb3ZlcmVkQ3Vyc29yQ29sb3Ioc3BhbiwgQUNUSU9OX1RZUEUuQkFDS0xJTkspO1xuXHRcdFx0XHRzdGFydEJhY2tsaW5rRWZmZWN0KHNwYW4pO1xuXHRcdFx0fSBlbHNlIGlmIChnZXRIb3ZlcigpICE9IG51bGwpIHtcblx0XHRcdFx0Ly8gY29uc29sZS5sb2coXCJlbmQgaG92ZXIgcmVmZXJlbmNlIGVmZmVjdFwiKTtcblx0XHRcdFx0ZW5kUmVmZXJlbmNlSG92ZXJFZmZlY3QoKTtcblx0XHRcdFx0aGFuZGxlUmVtb3ZlSG92ZXJlZEN1cnNvcihBQ1RJT05fVFlQRS5NT1VTRSk7XG5cdFx0XHR9IGVsc2UgaWYgKGdldEJhY2tsaW5rcygpICE9IG51bGwpIHtcblx0XHRcdFx0Ly8gY29uc29sZS5sb2coXCJlbmQgYmFja2xpbmsgcmVmZXJlbmNlIGVmZmVjdFwiKTtcblx0XHRcdFx0ZW5kQmFja2xpbmtIb3ZlckVmZmVjdCgpO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0Ly8gY29uc29sZS5sb2coXCJlbmQgaG92ZXIgcmVmZXJlbmNlIGVmZmVjdFwiKTtcblx0XHRcdFx0ZW5kUmVmZXJlbmNlSG92ZXJFZmZlY3QoKTtcblx0XHRcdFx0aGFuZGxlUmVtb3ZlSG92ZXJlZEN1cnNvcihBQ1RJT05fVFlQRS5NT1VTRSk7XG5cdFx0XHR9XG5cdFx0fSk7XG5cblx0XHQvLyBvbiBzZWxlY3Rpb24gY2hhbmdlcywgZXZlbnQgb3ZlciBjbGljayBhbmQga2V5ZG93blxuXG5cdFx0dGhpcy5yZWdpc3RlckRvbUV2ZW50KGRvY3VtZW50LCBcImNsaWNrXCIsIGFzeW5jIChldnQpID0+IHtcblx0XHRcdGlmIChldnQubWV0YUtleSB8fCBldnQuY3RybEtleSkgcmV0dXJuO1xuXHRcdFx0Y2hlY2tGb2N1c0N1cnNvcihldnQpO1xuXHRcdFx0dXBkYXRlQmFja2xpbmtNYXJrUG9zaXRpb25zKCk7XG5cdFx0fSk7XG5cblx0XHR0aGlzLnJlZ2lzdGVyRG9tRXZlbnQoZG9jdW1lbnQsIFwia2V5dXBcIiwgYXN5bmMgKGV2dCkgPT4ge1xuXHRcdFx0aWYgKGV2dC5tZXRhS2V5IHx8IGV2dC5jdHJsS2V5KSByZXR1cm47XG5cblx0XHRcdC8vIGNvbnNvbGUubG9nKFwia2V5dXBcIik7XG5cdFx0XHRjaGVja0ZvY3VzQ3Vyc29yKGV2dCk7XG5cdFx0XHQvLyB1cGRhdGVCYWNrbGlua01hcmtQb3NpdGlvbnMoKTtcblx0XHRcdHVwZGF0ZUJhY2tsaW5rTWFya1Bvc2l0aW9ucygpO1xuXHRcdH0pO1xuXG5cdFx0dGhpcy5yZWdpc3RlckRvbUV2ZW50KGRvY3VtZW50LCBcImtleWRvd25cIiwgYXN5bmMgKGV2dCkgPT4ge1xuXHRcdFx0Ly8gY29uc29sZS5sb2coXCJrZXlkb3duXCIpO1xuXG5cdFx0XHRpZiAoZXZ0LmtleSA9PSBcIlx1MDBDN1wiICYmIGV2dC5tZXRhS2V5ICYmIGV2dC5zaGlmdEtleSAmJiBldnQuYWx0S2V5KSB7XG5cdFx0XHRcdC8vIGNvbnNvbGUubG9nKFwiY1wiKTtcblx0XHRcdFx0dXBkYXRlQ2xpcGJvYXJkKGZhbHNlKTtcblx0XHRcdFx0bmV3IE5vdGljZShcIkNvcGllZCByZWZlcmVuY2UgdG8gY2xpcGJvYXJkXCIpO1xuXHRcdFx0fSBlbHNlIGlmIChldnQua2V5ID09IFwiY1wiICYmIGV2dC5tZXRhS2V5ICYmIGV2dC5zaGlmdEtleSkge1xuXHRcdFx0XHQvLyBjb25zb2xlLmxvZyhcInJcIik7XG5cdFx0XHRcdHVwZGF0ZUNsaXBib2FyZCh0cnVlKTtcblx0XHRcdFx0bmV3IE5vdGljZShcIkNvcGllZCByZWZlcmVuY2UgdG8gY2xpcGJvYXJkXCIpO1xuXHRcdFx0fVxuXHRcdFx0Ly8gZWxzZSBpZiAoZXZ0LmtleSA9PSBcImVcIiAmJiBldnQubWV0YUtleSAmJiBldnQuc2hpZnRLZXkpIHtcblx0XHRcdC8vIFx0Ly8gZmluZCB0aGUgYW5ub3RhdGlvbnMgZmlsZVxuXHRcdFx0Ly8gXHQvLyBpZiBpdCBkb2Vzbid0IGV4aXN0LCBjcmVhdGUgaXRcblx0XHRcdC8vIFx0Ly8gaWYgaXQgZXhpc3RzLCBvcGVuIGl0IGluIGFkamFjZW50IHBhbmVsXG5cdFx0XHQvLyBcdC8vIGFkZCBuZXcgYW5ub3RhdGlvblxuXHRcdFx0Ly8gXHR1cGRhdGVDbGlwYm9hcmQoZmFsc2UsIHRydWUpO1xuXHRcdFx0Ly8gXHRuZXcgTm90aWNlKFwiTmV3IGFubm90YXRpb25cIik7XG5cdFx0XHQvLyB9XG5cdFx0XHRlbHNlIGlmIChldnQua2V5ID09IFwic1wiICYmIGV2dC5tZXRhS2V5ICYmIGV2dC5zaGlmdEtleSkge1xuXHRcdFx0XHRjb25zdCBlZGl0b3I6IEVkaXRvciB8IHVuZGVmaW5lZCA9XG5cdFx0XHRcdFx0dGhpcy5hcHAud29ya3NwYWNlLmdldEFjdGl2ZVZpZXdPZlR5cGUoTWFya2Rvd25WaWV3KT8uZWRpdG9yO1xuXHRcdFx0XHRpZiAoIWVkaXRvcikgcmV0dXJuO1xuXHRcdFx0XHRjb25zdCBjdXJzb3IgPSBlZGl0b3IuZ2V0Q3Vyc29yKCk7XG5cblx0XHRcdFx0Ly8gQHRzLWlnbm9yZVxuXHRcdFx0XHRjb25zdCBlbGVtZW50ID0gZWRpdG9yLmdldERvYygpLmNtLmNvbnRlbnRET007XG5cdFx0XHRcdGNvbnN0IGxpbmVzID0gZWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLmNtLWxpbmVcIik7XG5cdFx0XHRcdGNvbnN0IGN1cnJlbnRMaW5lID0gbGluZXNbY3Vyc29yLmxpbmVdO1xuXG5cdFx0XHRcdGNvbnN0IHNwYW5zID0gQXJyYXkuZnJvbTxIVE1MU3BhbkVsZW1lbnQ+KFxuXHRcdFx0XHRcdGN1cnJlbnRMaW5lLnF1ZXJ5U2VsZWN0b3JBbGwoXCIucmVmZXJlbmNlLXNwYW5cIilcblx0XHRcdFx0KTtcblxuXHRcdFx0XHRpZiAoXG5cdFx0XHRcdFx0c3BhbnMuZXZlcnkoKHNwYW4pID0+XG5cdFx0XHRcdFx0XHRzcGFuLmNsYXNzTGlzdC5jb250YWlucyhcInJlZmVyZW5jZS1zcGFuLWhpZGRlblwiKVxuXHRcdFx0XHRcdClcblx0XHRcdFx0KSB7XG5cdFx0XHRcdFx0c3BhbnMuZm9yRWFjaCgoc3BhbikgPT4ge1xuXHRcdFx0XHRcdFx0c3Bhbi5jbGFzc0xpc3QudG9nZ2xlKFwicmVmZXJlbmNlLXNwYW4taGlkZGVuXCIsIGZhbHNlKTtcblx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHRuZXcgTm90aWNlKFwiVG9nZ2xlIGFubm90YXRpb25zIG9uXCIpO1xuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdHNwYW5zLmZvckVhY2goKHNwYW46IEhUTUxTcGFuRWxlbWVudCkgPT4ge1xuXHRcdFx0XHRcdFx0c3BhbnMuZm9yRWFjaCgoc3BhbikgPT4ge1xuXHRcdFx0XHRcdFx0XHRzcGFuLmNsYXNzTGlzdC50b2dnbGUoXCJyZWZlcmVuY2Utc3Bhbi1oaWRkZW5cIiwgdHJ1ZSk7XG5cdFx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHRuZXcgTm90aWNlKFwiVG9nZ2xlIGFubm90YXRpb25zIG9uXCIpO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0Ly8gRmluZCB0aGUgZWxlbWVudCBhdCBsaW5lXG5cdFx0XHRcdC8vIGdldCBhbGwgc3BhbiBlbGVtZW50cywgdXBkYXRlIHRoZWlyIGRpc3BsYXkgc3R5bGVcblx0XHRcdFx0Ly8gdGhlIGFwcHJvcHJpYXRlIHVwZGF0ZXMgdG8gc3RhdGUgd2lsbCBvY2N1ciBhdXRvbWF0aWNhbGx5IHZpYSBvYnNlcnZlclxuXHRcdFx0fVxuXHRcdH0pO1xuXG5cdFx0Ly8gZ2V0VGhhdCgpLndvcmtzcGFjZS5vbihcImVkaXRvci1jaGFuZ2VcIiwgKGV2KSA9PiB7XG5cdFx0Ly8gXHRjb25zb2xlLmxvZyhldik7XG5cdFx0Ly8gfSk7XG5cblx0XHQvLyB0aGlzLnJlZ2lzdGVyRXZlbnQoXG5cdFx0Ly8gXHR0aGlzLmFwcC53b3Jrc3BhY2Uub24oXCJ3aW5kb3ctY2xvc2VcIiwgKGV2KSA9PiB7XG5cdFx0Ly8gXHRcdGNvbnNvbGUubG9nKFwid2luZG93IGNsb3NlZDpcIik7XG5cdFx0Ly8gXHRcdGNvbnNvbGUubG9nKGV2KTtcblx0XHQvLyBcdH0pXG5cdFx0Ly8gKTtcblxuXHRcdC8vIHRoaXMucmVnaXN0ZXJFdmVudChcblx0XHQvLyBcdHRoaXMuYXBwLndvcmtzcGFjZS5vbihcImVkaXRvci1kcm9wXCIsIChldikgPT4ge1xuXHRcdC8vIFx0XHRjb25zb2xlLmxvZyhcIkVkaXRvciBkcm9wcGVkOlwiKTtcblx0XHQvLyBcdFx0Y29uc29sZS5sb2coZXYpO1xuXHRcdC8vIFx0fSlcblx0XHQvLyApO1xuXG5cdFx0Ly8gdGhpcy5yZWdpc3RlckV2ZW50KFxuXHRcdC8vIFx0dGhpcy5hcHAud29ya3NwYWNlLm9uKFwid2luZG93LW9wZW5cIiwgKGV2KSA9PiB7XG5cdFx0Ly8gXHRcdGNvbnNvbGUubG9nKFwid2luZG93IG9wZW5lZDpcIik7XG5cdFx0Ly8gXHRcdC8vIGNvbnNvbGUubG9nKGV2KTtcblx0XHQvLyBcdH0pXG5cdFx0Ly8gKTtcblxuXHRcdC8vIHRoaXMucmVnaXN0ZXJFdmVudChcblx0XHQvLyBcdHRoaXMuYXBwLndvcmtzcGFjZS5vbihcInJlc2l6ZVwiLCAoKSA9PiB7XG5cdFx0Ly8gXHRcdGNvbnNvbGUubG9nKFwicmVzaXplXCIpO1xuXHRcdC8vIFx0fSlcblx0XHQvLyApO1xuXG5cdFx0Ly8gdGhpcy5yZWdpc3RlckV2ZW50KFxuXHRcdC8vIFx0dGhpcy5hcHAud29ya3NwYWNlLm9uKFwiZmlsZS1vcGVuXCIsIChldikgPT4ge1xuXHRcdC8vIFx0XHRjb25zb2xlLmxvZyhcImZpbGUgb3BlbmVkOlwiKTtcblx0XHQvLyBcdFx0Ly8gY29uc29sZS5sb2coZXYpO1xuXHRcdC8vIFx0XHQvLyBjb25zb2xlLmxvZyhnZXRSZWZlcmVuY2VzKCkpO1xuXG5cdFx0Ly8gXHRcdGxldCBjdXJyZW50TGVhZjogYW55ID0gdGhpcy5hcHAud29ya3NwYWNlLmdldExlYWYoKTtcblxuXHRcdC8vIFx0XHQvLyBjaGVjayBpdCByZWZlcmVuY2VzIGhhdmUgYWxyZWFkeSBiZWVuIGNyZWF0ZWQsIGVsc2UgY3JlYXRlIHJlZmVyZW5jZXNcblx0XHQvLyBcdH0pXG5cdFx0Ly8gKTtcblxuXHRcdC8vIHRoaXMucmVnaXN0ZXJFdmVudChcblx0XHQvLyBcdHRoaXMuYXBwLndvcmtzcGFjZS5vbihcImxheW91dC1jaGFuZ2VcIiwgKCkgPT4ge1xuXHRcdC8vIFx0XHRjb25zb2xlLmxvZyhcImxheW91dC1jaGFuZ2VkOlwiKTtcblx0XHQvLyBcdH0pXG5cdFx0Ly8gKTtcblx0fVxuXG5cdG9udW5sb2FkKCkge31cbn1cbiIsICJpbXBvcnQge1xuXHRFZGl0b3JTdGF0ZSxcblx0U3RhdGVGaWVsZCxcblx0QW5ub3RhdGlvbixcblx0U3RhdGVFZmZlY3QsXG59IGZyb20gXCJAY29kZW1pcnJvci9zdGF0ZVwiO1xuaW1wb3J0IHsgQmFja2xpbmsgfSBmcm9tIFwiLi90eXBlc1wiO1xuaW1wb3J0IHsgdXBkYXRlQmFja2xpbmtNYXJrUG9zaXRpb25zIH0gZnJvbSBcIi4vcmVmZXJlbmNlc1wiO1xuaW1wb3J0IHsgQXBwIH0gZnJvbSBcIm9ic2lkaWFuXCI7XG5cbmV4cG9ydCBsZXQgdGhhdCA9IFN0YXRlRmllbGQuZGVmaW5lPEFwcCB8IG51bGw+KHtcblx0Y3JlYXRlKCkge1xuXHRcdHJldHVybiBudWxsO1xuXHR9LFxuXHR1cGRhdGUodmFsdWUsIHRyOiBhbnkpIHtcblx0XHRpZiAoXG5cdFx0XHR0cltcImFubm90YXRpb25zXCJdLmxlbmd0aCA9PSAyICYmXG5cdFx0XHR0cltcImFubm90YXRpb25zXCJdWzBdLnZhbHVlLnR5cGUgPT0gXCJ0aGF0XCJcblx0XHQpIHtcblx0XHRcdHJldHVybiB0cltcImFubm90YXRpb25zXCJdWzBdLnZhbHVlLnRoYXQuYXBwO1xuXHRcdH1cblx0XHRyZXR1cm4gdmFsdWU7XG5cdH0sXG59KTtcblxuZXhwb3J0IGxldCBob3ZlcmVkQ3Vyc29yID0gU3RhdGVGaWVsZC5kZWZpbmU8YW55Pih7XG5cdGNyZWF0ZSgpIHtcblx0XHRyZXR1cm4gbnVsbDtcblx0fSxcblx0dXBkYXRlKHZhbHVlLCB0cjogYW55KSB7XG5cdFx0aWYgKFxuXHRcdFx0dHJbXCJhbm5vdGF0aW9uc1wiXS5sZW5ndGggPT0gMiAmJlxuXHRcdFx0dHJbXCJhbm5vdGF0aW9uc1wiXVswXS52YWx1ZS50eXBlID09IFwiaG92ZXJlZEN1cnNvclwiXG5cdFx0KSB7XG5cdFx0XHRpZiAodmFsdWUpXG5cdFx0XHRcdHJldHVybiBbXG5cdFx0XHRcdFx0Li4udmFsdWUuZmlsdGVyKFxuXHRcdFx0XHRcdFx0KGN1cnNvcjogYW55KSA9PiBjdXJzb3IudXNlciAhPSB0cltcImFubm90YXRpb25zXCJdWzBdLnZhbHVlLnVzZXJcblx0XHRcdFx0XHQpLFxuXHRcdFx0XHRcdHtcblx0XHRcdFx0XHRcdGN1cnNvcjogdHJbXCJhbm5vdGF0aW9uc1wiXVswXS52YWx1ZS5jdXJzb3IsXG5cdFx0XHRcdFx0XHR1c2VyOiB0cltcImFubm90YXRpb25zXCJdWzBdLnZhbHVlLnVzZXIsXG5cdFx0XHRcdFx0fSxcblx0XHRcdFx0XTtcblx0XHRcdHJldHVybiBbXG5cdFx0XHRcdHtcblx0XHRcdFx0XHRjdXJzb3I6IHRyW1wiYW5ub3RhdGlvbnNcIl1bMF0udmFsdWUuY3Vyc29yLFxuXHRcdFx0XHRcdHVzZXI6IHRyW1wiYW5ub3RhdGlvbnNcIl1bMF0udmFsdWUudXNlcixcblx0XHRcdFx0fSxcblx0XHRcdF07XG5cdFx0fSBlbHNlIGlmIChcblx0XHRcdHRyW1wiYW5ub3RhdGlvbnNcIl0ubGVuZ3RoID09IDIgJiZcblx0XHRcdHRyW1wiYW5ub3RhdGlvbnNcIl1bMF0udmFsdWUudHlwZSA9PSBcInJlbW92ZUhvdmVyZWRDdXJzb3JcIlxuXHRcdCkge1xuXHRcdFx0aWYgKHZhbHVlKVxuXHRcdFx0XHRyZXR1cm4gdmFsdWUuZmlsdGVyKFxuXHRcdFx0XHRcdChjdXJzb3I6IGFueSkgPT4gY3Vyc29yLnVzZXIgIT0gdHJbXCJhbm5vdGF0aW9uc1wiXVswXS52YWx1ZS51c2VyXG5cdFx0XHRcdCk7XG5cdFx0XHRyZXR1cm4gdmFsdWU7XG5cdFx0fVxuXHRcdHJldHVybiB2YWx1ZTtcblx0fSxcbn0pO1xuXG5leHBvcnQgbGV0IGJhY2tsaW5rcyA9IFN0YXRlRmllbGQuZGVmaW5lPEJhY2tsaW5rW10+KHtcblx0Y3JlYXRlKCkge1xuXHRcdHJldHVybiBbXTtcblx0fSxcblx0dXBkYXRlKHZhbHVlLCB0cikge1xuXHRcdC8qXG5cdFx0XHRJICB3YW50IHRvIGdldCB0aGUgY3VycmVudCBhY3RpdmVMZWFmIGFuZCByZWNvbXB1dGUgdGhlIHJlZmVyZW5jZXNcblx0XHRcdG1lcmdlIHRoaXMgaW50byB0aGUgcmVmZXJlbmNlcyBmaWVsZFxuXHRcdCovXG5cblx0XHRpZiAodHIuZWZmZWN0cy5sZW5ndGggPiAwKSB7XG5cdFx0XHR0cnkge1xuXHRcdFx0XHRsZXQgZGF0YTogeyB0eXBlOiBzdHJpbmc7IGJhY2tsaW5rczogQmFja2xpbmtbXSB9ID0gSlNPTi5wYXJzZShcblx0XHRcdFx0XHR0ci5lZmZlY3RzWzBdLnZhbHVlXG5cdFx0XHRcdCk7XG5cdFx0XHRcdGlmIChkYXRhLnR5cGUgPT0gXCJiYWNrbGlua1wiKSB7XG5cdFx0XHRcdFx0aWYgKGRhdGEuYmFja2xpbmtzLmxlbmd0aCA9PSAwKSByZXR1cm4gdmFsdWU7XG5cdFx0XHRcdFx0bGV0IHJlZmVyZW5jaW5nTG9jYXRpb24gPVxuXHRcdFx0XHRcdFx0ZGF0YS5iYWNrbGlua3NbMF1bXCJyZWZlcmVuY2luZ0xvY2F0aW9uXCJdW1wiZmlsZW5hbWVcIl07XG5cdFx0XHRcdFx0bGV0IGZpbHRlcmVkVmFsdWVzID0gdmFsdWUuZmlsdGVyKFxuXHRcdFx0XHRcdFx0KGJhY2tsaW5rKSA9PlxuXHRcdFx0XHRcdFx0XHRiYWNrbGluay5yZWZlcmVuY2luZ0xvY2F0aW9uLmZpbGVuYW1lICE9IHJlZmVyZW5jaW5nTG9jYXRpb25cblx0XHRcdFx0XHQpO1xuXHRcdFx0XHRcdHJldHVybiBbLi4uZmlsdGVyZWRWYWx1ZXMsIC4uLmRhdGEuYmFja2xpbmtzXTtcblx0XHRcdFx0fVxuXHRcdFx0XHRyZXR1cm4gdmFsdWU7XG5cdFx0XHR9IGNhdGNoIChlKSB7XG5cdFx0XHRcdGNvbnNvbGUubG9nKGUpO1xuXHRcdFx0XHRyZXR1cm4gdmFsdWU7XG5cdFx0XHR9XG5cdFx0fVxuXHRcdHJldHVybiB2YWx1ZTtcblx0fSxcbn0pO1xuXG5leHBvcnQgbGV0IGhvdmVyRWxlbWVudCA9IFN0YXRlRmllbGQuZGVmaW5lPG9iamVjdCB8IG51bGw+KHtcblx0Y3JlYXRlKCkge1xuXHRcdHJldHVybiBudWxsO1xuXHR9LFxuXHR1cGRhdGUodmFsdWUsIHRyKSB7XG5cdFx0aWYgKHRyLmVmZmVjdHMubGVuZ3RoID4gMCkge1xuXHRcdFx0dHJ5IHtcblx0XHRcdFx0bGV0IGRhdGEgPSBKU09OLnBhcnNlKHRyLmVmZmVjdHNbMF0udmFsdWUpO1xuXHRcdFx0XHRpZiAoZGF0YS50eXBlID09IFwiaG92ZXItc3RhcnRcIikge1xuXHRcdFx0XHRcdHJldHVybiBPYmplY3QuYXNzaWduKHt9LCBkYXRhKTtcblx0XHRcdFx0fSBlbHNlIGlmIChkYXRhLnR5cGUgPT0gXCJob3ZlclwiKSB7XG5cdFx0XHRcdFx0aWYgKHZhbHVlKSByZXR1cm4gT2JqZWN0LmFzc2lnbih2YWx1ZSwgZGF0YSk7XG5cdFx0XHRcdFx0cmV0dXJuIGRhdGE7XG5cdFx0XHRcdH0gZWxzZSBpZiAoZGF0YS50eXBlID09IFwiaG92ZXItb2ZmXCIpIHtcblx0XHRcdFx0XHRyZXR1cm4gbnVsbDtcblx0XHRcdFx0fVxuXHRcdFx0XHRyZXR1cm4gdmFsdWU7XG5cdFx0XHR9IGNhdGNoIChlKSB7XG5cdFx0XHRcdGNvbnNvbGUubG9nKGUpO1xuXHRcdFx0XHRyZXR1cm4gdmFsdWU7XG5cdFx0XHR9XG5cdFx0fVxuXHRcdHJldHVybiB2YWx1ZTtcblx0fSxcbn0pO1xuXG5leHBvcnQgbGV0IGJhY2tsaW5rSG92ZXJFbGVtZW50ID0gU3RhdGVGaWVsZC5kZWZpbmU8b2JqZWN0IHwgbnVsbD4oe1xuXHRjcmVhdGUoKSB7XG5cdFx0cmV0dXJuIG51bGw7XG5cdH0sXG5cdHVwZGF0ZSh2YWx1ZSwgdHIpIHtcblx0XHRpZiAodHIuZWZmZWN0cy5sZW5ndGggPiAwKSB7XG5cdFx0XHR0cnkge1xuXHRcdFx0XHRsZXQgZGF0YSA9IEpTT04ucGFyc2UodHIuZWZmZWN0c1swXS52YWx1ZSk7XG5cdFx0XHRcdGlmIChkYXRhLnR5cGUgPT0gXCJiYWNrbGluay1zdGFydFwiKSB7XG5cdFx0XHRcdFx0cmV0dXJuIE9iamVjdC5hc3NpZ24oe30sIGRhdGEpO1xuXHRcdFx0XHR9IGVsc2UgaWYgKGRhdGEudHlwZSA9PSBcImJhY2tsaW5rLXVwZGF0ZVwiKSB7XG5cdFx0XHRcdFx0aWYgKHZhbHVlKSByZXR1cm4gT2JqZWN0LmFzc2lnbih2YWx1ZSwgZGF0YSk7XG5cdFx0XHRcdFx0cmV0dXJuIGRhdGE7XG5cdFx0XHRcdH0gZWxzZSBpZiAoZGF0YS50eXBlID09IFwiYmFja2xpbmstb2ZmXCIpIHtcblx0XHRcdFx0XHRyZXR1cm4gbnVsbDtcblx0XHRcdFx0fVxuXHRcdFx0XHRyZXR1cm4gdmFsdWU7XG5cdFx0XHR9IGNhdGNoIChlKSB7XG5cdFx0XHRcdGNvbnNvbGUubG9nKGUpO1xuXHRcdFx0XHRyZXR1cm4gdmFsdWU7XG5cdFx0XHR9XG5cdFx0fVxuXHRcdHJldHVybiB2YWx1ZTtcblx0fSxcbn0pO1xuXG5leHBvcnQgbGV0IGN1cnNvckVsZW1lbnQgPSBTdGF0ZUZpZWxkLmRlZmluZTxvYmplY3QgfCBudWxsPih7XG5cdGNyZWF0ZSgpIHtcblx0XHRyZXR1cm4gbnVsbDtcblx0fSxcblx0dXBkYXRlKHZhbHVlLCB0cikge1xuXHRcdGlmICh0ci5lZmZlY3RzLmxlbmd0aCA+IDApIHtcblx0XHRcdHRyeSB7XG5cdFx0XHRcdGxldCBkYXRhID0gSlNPTi5wYXJzZSh0ci5lZmZlY3RzWzBdLnZhbHVlKTtcblx0XHRcdFx0aWYgKGRhdGEudHlwZSA9PSBcImN1cnNvci1zdGFydFwiKSB7XG5cdFx0XHRcdFx0cmV0dXJuIHt9O1xuXHRcdFx0XHR9IGVsc2UgaWYgKGRhdGEudHlwZSA9PSBcImN1cnNvclwiKSB7XG5cdFx0XHRcdFx0aWYgKHZhbHVlKSByZXR1cm4gT2JqZWN0LmFzc2lnbih2YWx1ZSwgZGF0YSk7XG5cdFx0XHRcdFx0cmV0dXJuIGRhdGE7XG5cdFx0XHRcdH0gZWxzZSBpZiAoZGF0YS50eXBlID09IFwiY3Vyc29yLW9mZlwiKSB7XG5cdFx0XHRcdFx0cmV0dXJuIG51bGw7XG5cdFx0XHRcdH1cblx0XHRcdFx0cmV0dXJuIHZhbHVlO1xuXHRcdFx0fSBjYXRjaCAoZSkge1xuXHRcdFx0XHRjb25zb2xlLmxvZyhlKTtcblx0XHRcdFx0cmV0dXJuIHZhbHVlO1xuXHRcdFx0fVxuXHRcdH1cblx0XHRyZXR1cm4gdmFsdWU7XG5cdH0sXG59KTtcblxuZXhwb3J0IGxldCBlZGl0b3JDaGFuZ2UgPSBTdGF0ZUZpZWxkLmRlZmluZTxudWxsPih7XG5cdGNyZWF0ZSgpIHtcblx0XHRyZXR1cm4gbnVsbDtcblx0fSxcblx0dXBkYXRlKHZhbHVlLCB0cikge1xuXHRcdGlmICh0ci5lZmZlY3RzLmxlbmd0aCA+IDApIHtcblx0XHRcdHRyeSB7XG5cdFx0XHRcdGxldCBkYXRhID0gSlNPTi5wYXJzZSh0ci5lZmZlY3RzWzBdLnZhbHVlKTtcblx0XHRcdFx0aWYgKGRhdGEudHlwZSA9PSBcInN5bmNcIikge1xuXHRcdFx0XHRcdHVwZGF0ZUJhY2tsaW5rTWFya1Bvc2l0aW9ucygpO1xuXHRcdFx0XHRcdHJldHVybiB2YWx1ZTtcblx0XHRcdFx0fVxuXHRcdFx0XHRyZXR1cm4gdmFsdWU7XG5cdFx0XHR9IGNhdGNoIChlKSB7XG5cdFx0XHRcdGNvbnNvbGUubG9nKGUpO1xuXHRcdFx0XHRyZXR1cm4gdmFsdWU7XG5cdFx0XHR9XG5cdFx0fVxuXHRcdHJldHVybiB2YWx1ZTtcblx0fSxcbn0pO1xuXG5leHBvcnQgY29uc3QgdGhhdEFubm90YXRpb24gPSBBbm5vdGF0aW9uLmRlZmluZTxhbnk+KCk7XG5leHBvcnQgY29uc3QgaG92ZXJlZEN1cnNvckFubm90YXRpb24gPSBBbm5vdGF0aW9uLmRlZmluZTxhbnk+KCk7XG5leHBvcnQgY29uc3QgaG92ZXJFZmZlY3QgPSBTdGF0ZUVmZmVjdC5kZWZpbmU8c3RyaW5nPigpO1xuZXhwb3J0IGNvbnN0IGJhY2tsaW5rSG92ZXJFZmZlY3QgPSBTdGF0ZUVmZmVjdC5kZWZpbmU8c3RyaW5nPigpO1xuZXhwb3J0IGNvbnN0IGN1cnNvckVmZmVjdCA9IFN0YXRlRWZmZWN0LmRlZmluZTxzdHJpbmc+KCk7XG5leHBvcnQgY29uc3QgYmFja2xpbmtFZmZlY3QgPSBTdGF0ZUVmZmVjdC5kZWZpbmU8c3RyaW5nPigpO1xuXG5leHBvcnQgbGV0IHN0YXRlOiBhbnkgPSBFZGl0b3JTdGF0ZS5jcmVhdGUoe1xuXHRleHRlbnNpb25zOiBbXG5cdFx0dGhhdCxcblx0XHRob3ZlcmVkQ3Vyc29yLFxuXHRcdGJhY2tsaW5rcyxcblx0XHRob3ZlckVsZW1lbnQsXG5cdFx0YmFja2xpbmtIb3ZlckVsZW1lbnQsXG5cdFx0Y3Vyc29yRWxlbWVudCxcblx0XHRlZGl0b3JDaGFuZ2UsXG5cdF0sXG59KTtcblxuZXhwb3J0IGZ1bmN0aW9uIHN5bmNCYWNrbGlua3MoKSB7XG5cdHN0YXRlID0gc3RhdGUudXBkYXRlKHtcblx0XHRlZmZlY3RzOiBiYWNrbGlua0VmZmVjdC5vZihKU09OLnN0cmluZ2lmeSh7IHR5cGU6IFwic3luY1wiIH0pKSxcblx0fSkuc3RhdGU7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRUaGF0KCk6IEFwcCB7XG5cdHJldHVybiBzdGF0ZS5maWVsZCh0aGF0KTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHVwZGF0ZVRoYXQodGhhdDogYW55KSB7XG5cdHN0YXRlID0gc3RhdGUudXBkYXRlKHtcblx0XHRhbm5vdGF0aW9uczogdGhhdEFubm90YXRpb24ub2Yoe1xuXHRcdFx0dHlwZTogXCJ0aGF0XCIsXG5cdFx0XHR0aGF0LFxuXHRcdH0pLFxuXHR9KS5zdGF0ZTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGdldEhvdmVyZWRDdXJzb3IoKSB7XG5cdHJldHVybiBzdGF0ZS5maWVsZChob3ZlcmVkQ3Vyc29yKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHVwZGF0ZUhvdmVyZWRDdXJzb3IoY3Vyc29yOiBIVE1MT3JTVkdFbGVtZW50LCB1c2VyOiBzdHJpbmcpIHtcblx0c3RhdGUgPSBzdGF0ZS51cGRhdGUoe1xuXHRcdGFubm90YXRpb25zOiBob3ZlcmVkQ3Vyc29yQW5ub3RhdGlvbi5vZih7XG5cdFx0XHR0eXBlOiBcImhvdmVyZWRDdXJzb3JcIixcblx0XHRcdGN1cnNvcixcblx0XHRcdHVzZXIsXG5cdFx0fSksXG5cdH0pLnN0YXRlO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gcmVtb3ZlSG92ZXJlZEN1cnNvcih1c2VyOiBzdHJpbmcpIHtcblx0c3RhdGUgPSBzdGF0ZS51cGRhdGUoe1xuXHRcdGFubm90YXRpb25zOiBob3ZlcmVkQ3Vyc29yQW5ub3RhdGlvbi5vZih7XG5cdFx0XHR0eXBlOiBcInJlbW92ZUhvdmVyZWRDdXJzb3JcIixcblx0XHRcdHVzZXIsXG5cdFx0fSksXG5cdH0pLnN0YXRlO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZ2V0SG92ZXIoKSB7XG5cdHJldHVybiBzdGF0ZS5maWVsZChob3ZlckVsZW1lbnQpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gdXBkYXRlSG92ZXIodmFsdWU6IG9iamVjdCkge1xuXHRzdGF0ZSA9IHN0YXRlLnVwZGF0ZSh7XG5cdFx0ZWZmZWN0czogaG92ZXJFZmZlY3Qub2YoXG5cdFx0XHRKU09OLnN0cmluZ2lmeShPYmplY3QuYXNzaWduKHZhbHVlLCB7IHR5cGU6IFwiaG92ZXJcIiB9KSlcblx0XHQpLFxuXHR9KS5zdGF0ZTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHJlc2V0SG92ZXIoKSB7XG5cdHN0YXRlID0gc3RhdGUudXBkYXRlKHtcblx0XHRlZmZlY3RzOiBob3ZlckVmZmVjdC5vZihcblx0XHRcdEpTT04uc3RyaW5naWZ5KHtcblx0XHRcdFx0dHlwZTogXCJob3Zlci1vZmZcIixcblx0XHRcdH0pXG5cdFx0KSxcblx0fSkuc3RhdGU7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRCYWNrbGlua0hvdmVyKCkge1xuXHRyZXR1cm4gc3RhdGUuZmllbGQoYmFja2xpbmtIb3ZlckVsZW1lbnQpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gdXBkYXRlQmFja2xpbmtIb3Zlcih2YWx1ZTogb2JqZWN0KSB7XG5cdHN0YXRlID0gc3RhdGUudXBkYXRlKHtcblx0XHRlZmZlY3RzOiBiYWNrbGlua0hvdmVyRWZmZWN0Lm9mKFxuXHRcdFx0SlNPTi5zdHJpbmdpZnkoT2JqZWN0LmFzc2lnbih2YWx1ZSwgeyB0eXBlOiBcImJhY2tsaW5rLXVwZGF0ZVwiIH0pKVxuXHRcdCksXG5cdH0pLnN0YXRlO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gcmVzZXRCYWNrbGlua0hvdmVyKCkge1xuXHRzdGF0ZSA9IHN0YXRlLnVwZGF0ZSh7XG5cdFx0ZWZmZWN0czogYmFja2xpbmtIb3ZlckVmZmVjdC5vZihcblx0XHRcdEpTT04uc3RyaW5naWZ5KHtcblx0XHRcdFx0dHlwZTogXCJiYWNrbGluay1vZmZcIixcblx0XHRcdH0pXG5cdFx0KSxcblx0fSkuc3RhdGU7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRDdXJzb3IoKSB7XG5cdHJldHVybiBzdGF0ZS5maWVsZChjdXJzb3JFbGVtZW50KTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHVwZGF0ZUN1cnNvcih2YWx1ZTogb2JqZWN0KSB7XG5cdHN0YXRlID0gc3RhdGUudXBkYXRlKHtcblx0XHRlZmZlY3RzOiBjdXJzb3JFZmZlY3Qub2YoXG5cdFx0XHRKU09OLnN0cmluZ2lmeShPYmplY3QuYXNzaWduKHZhbHVlLCB7IHR5cGU6IFwiY3Vyc29yXCIgfSkpXG5cdFx0KSxcblx0fSkuc3RhdGU7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiByZXNldEN1cnNvcigpIHtcblx0c3RhdGUgPSBzdGF0ZS51cGRhdGUoe1xuXHRcdGVmZmVjdHM6IGN1cnNvckVmZmVjdC5vZihcblx0XHRcdEpTT04uc3RyaW5naWZ5KHtcblx0XHRcdFx0dHlwZTogXCJjdXJzb3Itb2ZmXCIsXG5cdFx0XHR9KVxuXHRcdCksXG5cdH0pLnN0YXRlO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZ2V0QmFja2xpbmtzKCk6IEJhY2tsaW5rW10ge1xuXHRyZXR1cm4gc3RhdGUuZmllbGQoYmFja2xpbmtzKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHVwZGF0ZUJhY2tsaW5rcyh2YWx1ZTogQmFja2xpbmtbXSkge1xuXHRzdGF0ZSA9IHN0YXRlLnVwZGF0ZSh7XG5cdFx0ZWZmZWN0czogYmFja2xpbmtFZmZlY3Qub2YoXG5cdFx0XHRKU09OLnN0cmluZ2lmeShPYmplY3QuYXNzaWduKHsgYmFja2xpbmtzOiB2YWx1ZSB9LCB7IHR5cGU6IFwiYmFja2xpbmtcIiB9KSlcblx0XHQpLFxuXHR9KS5zdGF0ZTtcbn1cbiIsICJpbXBvcnQgeyBFZGl0b3IsIFRGaWxlLCBXb3Jrc3BhY2VMZWFmLCBNYXJrZG93blZpZXcgfSBmcm9tIFwib2JzaWRpYW5cIjtcbmltcG9ydCB7IEVkaXRvclZpZXcgfSBmcm9tIFwiQGNvZGVtaXJyb3Ivdmlld1wiO1xuaW1wb3J0IHsgdjUgYXMgdXVpZHY1IH0gZnJvbSBcInV1aWRcIjtcblxuaW1wb3J0IHtcblx0c3RhdGUsXG5cdHVwZGF0ZUhvdmVyLFxuXHRnZXRUaGF0LFxuXHRnZXRCYWNrbGlua3MsXG5cdHVwZGF0ZUJhY2tsaW5rcyxcblx0dXBkYXRlQ3Vyc29yLFxuXHRnZXRDdXJzb3IsXG5cdGdldEhvdmVyLFxuXHRyZXNldEN1cnNvcixcblx0dXBkYXRlSG92ZXJlZEN1cnNvcixcblx0dXBkYXRlQmFja2xpbmtIb3Zlcixcblx0Z2V0QmFja2xpbmtIb3Zlcixcbn0gZnJvbSBcIi4vc3RhdGVcIjtcbmltcG9ydCB7XG5cdHByb2Nlc3NVUkksXG5cdGdldFByZWZpeEFuZFN1ZmZpeCxcblx0aGFuZGxlUmVtb3ZlSG92ZXJlZEN1cnNvcixcblx0Y2hlY2tGb2N1c0N1cnNvcixcbn0gZnJvbSBcIi4vdXRpbHNcIjtcbmltcG9ydCB7XG5cdEFDVElPTl9UWVBFLFxuXHRQT1JUQUxfVEVYVF9TTElDRV9TSVpFLFxuXHRSRUZFUkVOQ0VfSUNPTl9IRUlHSFQsXG5cdFJFRkVSRU5DRV9SRUdFWCxcblx0U1ZHX0hPVkVSX0NPTE9SLFxuXHRTVkdfSE9WRVJfQ09MT1JfTElHSFQsXG59IGZyb20gXCIuL2NvbnN0YW50c1wiO1xuaW1wb3J0IHsgY29sbGVjdExlYXZlc0J5VGFiSGVscGVyIH0gZnJvbSBcIi4vd29ya3NwYWNlXCI7XG5pbXBvcnQgeyBEb2N1bWVudExvY2F0aW9uLCBCYWNrbGluayB9IGZyb20gXCIuL3R5cGVzXCI7XG5pbXBvcnQgeyBlbmRSZWZlcmVuY2VDdXJzb3JFZmZlY3QgfSBmcm9tIFwiLi9lZmZlY3RzXCI7XG5pbXBvcnQgeyBjcmVhdGUgfSBmcm9tIFwiZG9tYWluXCI7XG5cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVSZWZlcmVuY2VJY29uKHBvcnRhbFRleHQ6IHN0cmluZyB8IG51bGwgPSBudWxsKToge1xuXHRzcGFuOiBIVE1MU3BhbkVsZW1lbnQ7XG5cdHN2ZzogU1ZHRWxlbWVudDtcbn0ge1xuXHRjb25zdCBzcGFuID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInNwYW5cIik7XG5cdHNwYW4uc3R5bGUuY3Vyc29yID0gXCJwb2ludGVyXCI7XG5cblx0Y29uc3QgaGVpZ2h0ID0gUkVGRVJFTkNFX0lDT05fSEVJR0hUO1xuXHRjb25zdCB3aWR0aCA9IGhlaWdodCAqIDAuOTtcblxuXHRpZiAocG9ydGFsVGV4dCA9PSBudWxsKSB7XG5cdFx0Y29uc3Qgc3ZnID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudE5TKFwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIiwgXCJzdmdcIik7XG5cdFx0c3ZnLnNldEF0dHJpYnV0ZShcIndpZHRoXCIsIGAke3dpZHRofWApO1xuXHRcdHN2Zy5zZXRBdHRyaWJ1dGUoXCJoZWlnaHRcIiwgYCR7aGVpZ2h0fWApO1xuXHRcdHN2Zy5zZXRBdHRyaWJ1dGUoXCJ2aWV3Qm94XCIsIGAwIDAgJHt3aWR0aH0gJHtoZWlnaHR9YCk7XG5cdFx0c3ZnLnNldEF0dHJpYnV0ZShcImZpbGxcIiwgXCJ3aGl0ZVwiKTtcblx0XHRzdmcuc2V0QXR0cmlidXRlKFwieG1sbnNcIiwgXCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiKTtcblx0XHRzdmcuc3R5bGUuYm9yZGVyID0gXCIzcHggc29saWQgZ3JleVwiO1xuXHRcdHN2Zy5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSBcIndoaXRlXCI7XG5cdFx0c3ZnLnN0eWxlLmJvcmRlclJhZGl1cyA9IFwiM3B4XCI7XG5cdFx0c3ZnLnN0eWxlLmN1cnNvciA9IFwicG9pbnRlclwiO1xuXHRcdHN2Zy5jbGFzc0xpc3QuYWRkKFwicmVmZXJlbmNlLWljb25cIik7XG5cblx0XHRjb25zdCBsaW5lID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudE5TKFwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIiwgXCJsaW5lXCIpO1xuXHRcdGxpbmUuc2V0QXR0cmlidXRlKFwieDFcIiwgXCIzXCIpO1xuXHRcdGxpbmUuc2V0QXR0cmlidXRlKFwieTFcIiwgYCR7KGhlaWdodCAtIDMpIC8gM31gKTtcblx0XHRsaW5lLnNldEF0dHJpYnV0ZShcIngyXCIsIFwiMTJcIik7XG5cdFx0bGluZS5zZXRBdHRyaWJ1dGUoXCJ5MlwiLCBgJHsoaGVpZ2h0IC0gMykgLyAzfWApO1xuXHRcdGxpbmUuc2V0QXR0cmlidXRlKFwic3Ryb2tlLXdpZHRoXCIsIFwiMlwiKTsgLy8gU2V0IHRoZSBzdHJva2Ugd2VpZ2h0IHRvIDFcblx0XHRsaW5lLnNldEF0dHJpYnV0ZShcInN0cm9rZVwiLCBcImdyZXlcIik7IC8vIFNldCB0aGUgc3Ryb2tlIGNvbG9yIHRvIGJsYWNrXG5cblx0XHRzdmcuYXBwZW5kQ2hpbGQobGluZSk7XG5cblx0XHRjb25zdCBsaW5lMiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnROUyhcblx0XHRcdFwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIixcblx0XHRcdFwibGluZVwiXG5cdFx0KTtcblx0XHRsaW5lMi5zZXRBdHRyaWJ1dGUoXCJ4MVwiLCBcIjNcIik7XG5cdFx0bGluZTIuc2V0QXR0cmlidXRlKFwieTFcIiwgYCR7KChoZWlnaHQgLSAzKSAvIDMpICogMn1gKTtcblx0XHRsaW5lMi5zZXRBdHRyaWJ1dGUoXCJ4MlwiLCBcIjE1XCIpO1xuXHRcdGxpbmUyLnNldEF0dHJpYnV0ZShcInkyXCIsIGAkeygoaGVpZ2h0IC0gMykgLyAzKSAqIDJ9YCk7XG5cdFx0bGluZTIuc2V0QXR0cmlidXRlKFwic3Ryb2tlLXdpZHRoXCIsIFwiMlwiKTsgLy8gU2V0IHRoZSBzdHJva2Ugd2VpZ2h0IHRvIDFcblx0XHRsaW5lMi5zZXRBdHRyaWJ1dGUoXCJzdHJva2VcIiwgXCJncmV5XCIpOyAvLyBTZXQgdGhlIHN0cm9rZSBjb2xvciB0byBibGFja1xuXG5cdFx0c3ZnLmFwcGVuZENoaWxkKGxpbmUyKTtcblxuXHRcdGNvbnN0IGxpbmUzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudE5TKFxuXHRcdFx0XCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiLFxuXHRcdFx0XCJsaW5lXCJcblx0XHQpO1xuXHRcdGxpbmUzLnNldEF0dHJpYnV0ZShcIngxXCIsIFwiM1wiKTtcblx0XHRsaW5lMy5zZXRBdHRyaWJ1dGUoXCJ5MVwiLCBgJHsoKGhlaWdodCAtIDMpIC8gMykgKiAzfWApO1xuXHRcdGxpbmUzLnNldEF0dHJpYnV0ZShcIngyXCIsIFwiMTBcIik7XG5cdFx0bGluZTMuc2V0QXR0cmlidXRlKFwieTJcIiwgYCR7KChoZWlnaHQgLSAzKSAvIDMpICogM31gKTtcblx0XHRsaW5lMy5zZXRBdHRyaWJ1dGUoXCJzdHJva2Utd2lkdGhcIiwgXCIyXCIpOyAvLyBTZXQgdGhlIHN0cm9rZSB3ZWlnaHQgdG8gMVxuXHRcdGxpbmUzLnNldEF0dHJpYnV0ZShcInN0cm9rZVwiLCBcImdyZXlcIik7IC8vIFNldCB0aGUgc3Ryb2tlIGNvbG9yIHRvIGJsYWNrXG5cblx0XHRzdmcuYXBwZW5kQ2hpbGQobGluZTMpO1xuXG5cdFx0c3Bhbi5hcHBlbmRDaGlsZChzdmcpO1xuXHRcdHJldHVybiB7IHNwYW46IHNwYW4sIHN2ZyB9O1xuXHR9XG5cblx0Y29uc3Qgc3ZnID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudE5TKFwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIiwgXCJzdmdcIik7XG5cdHN2Zy5zZXRBdHRyaWJ1dGUoXCJ3aWR0aFwiLCBgJHt3aWR0aH1gKTtcblx0c3ZnLnNldEF0dHJpYnV0ZShcImhlaWdodFwiLCBgJHtoZWlnaHR9YCk7XG5cdHN2Zy5zZXRBdHRyaWJ1dGUoXCJ2aWV3Qm94XCIsIGAwIDAgJHt3aWR0aH0gJHtoZWlnaHR9YCk7XG5cdHN2Zy5zZXRBdHRyaWJ1dGUoXCJmaWxsXCIsIFwid2hpdGVcIik7XG5cdHN2Zy5zZXRBdHRyaWJ1dGUoXCJ4bWxuc1wiLCBcImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCIpO1xuXHQvLyBzdmcuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gXCJ3aGl0ZVwiO1xuXHRzdmcuY2xhc3NMaXN0LmFkZChcInBvcnRhbC1pY29uXCIpO1xuXG5cdC8vIDxwYXRoIGQ9XCJNNCA2SDEzTTQgMTBIMTRNMy45OTY0MyAxLjAwMDM3QzcuMDg1MyAwLjk5OTkyMyAxMS4xNjE4IDAuOTk5ODgxIDE0LjAwNDMgMS4wMDAyNUMxNS42NjAzIDEuMDAwNDYgMTcgMi4zNDMxNSAxNyAzLjk5OTIzVjExLjM2MDFDMTcgMTIuOTk1MSAxNS42OTA5IDE0LjMyNzYgMTQuMDU2MyAxNC4zNTgyTDcuMzQzMDEgMTQuNDg0MkM2Ljc5MTY4IDE0LjQ5NDUgNi4yNTM4NyAxNC42NTY2IDUuNzg4NjYgMTQuOTUyN0wyLjUzNjg4IDE3LjAyMkMxLjg3MTE1IDE3LjQ0NTYgMSAxNi45Njc0IDEgMTYuMTc4M1YzLjk5OTkzQzEgMi4zNDM1MSAyLjM0MDAxIDEuMDAwNiAzLjk5NjQzIDEuMDAwMzdaXCIgc3Ryb2tlPVwiYmxhY2tcIiBzdHJva2Utd2lkdGg9XCIyXCIvPlxuXHRjb25zdCBwYXRoID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudE5TKFwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIiwgXCJwYXRoXCIpO1xuXHRwYXRoLnNldEF0dHJpYnV0ZShcblx0XHRcImRcIixcblx0XHRcIk00IDZIMTNNNCAxMEgxNE0zLjk5NjQzIDEuMDAwMzdDNy4wODUzIDAuOTk5OTIzIDExLjE2MTggMC45OTk4ODEgMTQuMDA0MyAxLjAwMDI1QzE1LjY2MDMgMS4wMDA0NiAxNyAyLjM0MzE1IDE3IDMuOTk5MjNWMTEuMzYwMUMxNyAxMi45OTUxIDE1LjY5MDkgMTQuMzI3NiAxNC4wNTYzIDE0LjM1ODJMNy4zNDMwMSAxNC40ODQyQzYuNzkxNjggMTQuNDk0NSA2LjI1Mzg3IDE0LjY1NjYgNS43ODg2NiAxNC45NTI3TDIuNTM2ODggMTcuMDIyQzEuODcxMTUgMTcuNDQ1NiAxIDE2Ljk2NzQgMSAxNi4xNzgzVjMuOTk5OTNDMSAyLjM0MzUxIDIuMzQwMDEgMS4wMDA2IDMuOTk2NDMgMS4wMDAzN1pcIlxuXHQpO1xuXHRwYXRoLnNldEF0dHJpYnV0ZShcInN0cm9rZVwiLCBcImdyYXlcIik7XG5cdHBhdGguc2V0QXR0cmlidXRlKFwic3Ryb2tlLXdpZHRoXCIsIFwiMlwiKTtcblxuXHRzcGFuLnN0eWxlLmJhY2tncm91bmRDb2xvciA9IFwiXCI7XG5cblx0c3ZnLmFwcGVuZENoaWxkKHBhdGgpO1xuXG5cdHNwYW4uYXBwZW5kQ2hpbGQoc3ZnKTtcblxuXHRpZiAocG9ydGFsVGV4dCAhPSBcImlubGluZSByZWZlcmVuY2Ugd2lkZ2V0IHwqfFwiKSB7XG5cdFx0bGV0IHBvcnRhbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG5cdFx0cG9ydGFsLnN0eWxlLmNvbG9yID0gXCJibGFja1wiO1xuXHRcdHBvcnRhbC5jbGFzc0xpc3QuYWRkKFwicG9ydGFsXCIpO1xuXHRcdHBvcnRhbC5pbm5lckhUTUwgPSBwb3J0YWxUZXh0O1xuXHRcdC8vIHNwYW4uc3R5bGUuYmFja2dyb3VuZENvbG9yID0gXCJ3aGl0ZVwiO1xuXHRcdHBvcnRhbC5zdHlsZS51c2VyU2VsZWN0ID0gXCJub25lXCI7XG5cdFx0cG9ydGFsLnN0eWxlLnBvaW50ZXJFdmVudHMgPSBcIm5vbmVcIjtcblx0XHRzcGFuLmFwcGVuZENoaWxkKHBvcnRhbCk7XG5cdH1cblxuXHRyZXR1cm4geyBzcGFuOiBzcGFuLCBzdmcgfTtcblxuXHQvLyBsZXQgbmV3U3BhbjogSFRNTFNwYW5FbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInNwYW5cIik7XG5cdC8vIG5ld1NwYW4uaW5uZXJIVE1MID0gXCJcdUQ4M0RcdURDQzRcIjtcblx0Ly8gbmV3U3Bhbi5zdHlsZS5jdXJzb3IgPSBcInBvaW50ZXJcIjtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHVwZGF0ZUhvdmVyZWRDdXJzb3JDb2xvcihzcGFuOiBIVE1MU3BhbkVsZW1lbnQsIHVzZXI6IHN0cmluZykge1xuXHQvLyByZW1vdmUgZXhpc3RpbmcgY3Vyc29yc1xuXHRjb25zdCBzdmcgPSBzcGFuLnF1ZXJ5U2VsZWN0b3IoXCJzdmdcIik7XG5cdGNvbnN0IHBvcnRhbDogSFRNTEVsZW1lbnQgfCBudWxsID0gc3Bhbi5xdWVyeVNlbGVjdG9yKFwiLnBvcnRhbFwiKTtcblxuXHRpZiAoc3BhbiAmJiBzdmcgJiYgIXBvcnRhbCkge1xuXHRcdGhhbmRsZVJlbW92ZUhvdmVyZWRDdXJzb3IodXNlcik7IC8vIHJlbW92ZSBhbnkgZXhpc3RpbmcgaG92ZXJlZCByZWZlcmVuY2UgaWNvblxuXHRcdGlmIChzdmcuY2xhc3NMaXN0LmNvbnRhaW5zKFwicmVmZXJlbmNlLWljb25cIikpXG5cdFx0XHRzdmcuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gU1ZHX0hPVkVSX0NPTE9SO1xuXHRcdGVsc2Uge1xuXHRcdFx0Ly8gc3ZnLnNldEF0dHJpYnV0ZShcImZpbGxcIiwgU1ZHX0hPVkVSX0NPTE9SKTtcblx0XHRcdHNwYW4gPSBzcGFuLnF1ZXJ5U2VsZWN0b3IoXCJzcGFuXCIpIGFzIEhUTUxTcGFuRWxlbWVudDtcblx0XHRcdHNwYW4uc3R5bGUuYmFja2dyb3VuZENvbG9yID0gU1ZHX0hPVkVSX0NPTE9SO1xuXHRcdH1cblxuXHRcdHVwZGF0ZUhvdmVyZWRDdXJzb3Ioc3ZnLCB1c2VyKTsgLy8gYWRkIHRoZSBjdXJyZW50bHkgaG92ZXJlZCByZWZlcmVuY2UgaWNvblxuXHR9XG59XG5cbmZ1bmN0aW9uIGdldENvZGVNaXJyb3JFZGl0b3JWaWV3KGVkaXRvcjogRWRpdG9yKTogRWRpdG9yVmlldyB7XG5cdC8vIEB0cy1pZ25vcmUgdGhpcyB0eXBlIGlzIG1pc3NpbmcuLi4gYnV0IHRoZSBPYnNpZGlhbiBkb2NzIHRlbGwgdXMgdG8gZG8gaXQgdGhpcyB3YXk/P1xuXHRyZXR1cm4gZWRpdG9yLmNtIGFzIEVkaXRvclZpZXc7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRDb250YWluZXJFbGVtZW50KFxuXHRlZGl0b3JPckxlYWY6IEVkaXRvciB8IFdvcmtzcGFjZUxlYWZcbik6IEhUTUxFbGVtZW50IHtcblx0Ly8gQHRzLWlnbm9yZSBUT0RPOiBmaW5kIGEgYmV0dGVyIHdheSB0byBhY2Nlc3MgdGhpcy4uLiBFWFRSRU1FTFkgU0tFVENIWVxuXHRyZXR1cm4gZWRpdG9yT3JMZWFmLmNvbnRhaW5lckVsO1xufVxuXG5mdW5jdGlvbiBnZXRCYWNrbGlua0lEKGJhY2tsaW5rOiBCYWNrbGluayk6IHN0cmluZyB7XG5cdGNvbnN0IGpzb25TdHJpbmcgPSBKU09OLnN0cmluZ2lmeShiYWNrbGluayk7XG5cdGNvbnN0IGlkID0gdXVpZHY1KGpzb25TdHJpbmcsIFwiZmI4MTNlYmItMWI1My00MzA2LWFhOWMtNjU1NjI3NDQ3ZjBiXCIpO1xuXHRyZXR1cm4gYGJhY2tsaW5rLSR7aWR9YDtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGdldEJhY2tsaW5rQ29udGFpbmVyKGVkaXRvcjogRWRpdG9yKTogSFRNTEVsZW1lbnQge1xuXHRjb25zdCBjb250YWluZXJFbDogSFRNTEVsZW1lbnQgPSBnZXRDb250YWluZXJFbGVtZW50KGVkaXRvcik7XG5cdGNvbnN0IHJlZmVyZW5jZU1hcmtDb250YWluZXJJRCA9IFwicmVmZXJlbmNlTWFya0NvbnRhaW5lclwiO1xuXHRjb25zdCBjb250YWluZXIgPSBjb250YWluZXJFbC5xdWVyeVNlbGVjdG9yKGAjJHtyZWZlcmVuY2VNYXJrQ29udGFpbmVySUR9YCk7XG5cdGlmIChjb250YWluZXIpIHtcblx0XHRyZXR1cm4gY29udGFpbmVyIGFzIEhUTUxFbGVtZW50O1xuXHR9IGVsc2Uge1xuXHRcdGNvbnN0IG5ld0NvbnRhaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG5cdFx0bmV3Q29udGFpbmVyLmlkID0gcmVmZXJlbmNlTWFya0NvbnRhaW5lcklEO1xuXHRcdGNvbnRhaW5lckVsLnF1ZXJ5U2VsZWN0b3IoXCIuY20tc2Nyb2xsZXJcIikhLmFwcGVuZENoaWxkKG5ld0NvbnRhaW5lcik7XG5cdFx0cmV0dXJuIG5ld0NvbnRhaW5lcjtcblx0fVxufVxuXG5mdW5jdGlvbiBnZXRSZWZlcmVuY2VNYXJrcyhlZGl0b3I6IEVkaXRvcik6IEhUTUxFbGVtZW50W10ge1xuXHRjb25zdCBjb250YWluZXIgPSBnZXRCYWNrbGlua0NvbnRhaW5lcihlZGl0b3IpO1xuXHRjb25zdCBlbGVtZW50czogSFRNTEVsZW1lbnRbXSA9IFtdO1xuXHRmb3IgKGxldCBpID0gMDsgaSA8IGNvbnRhaW5lci5jaGlsZHJlbi5sZW5ndGg7IGkrKykge1xuXHRcdGVsZW1lbnRzLnB1c2goY29udGFpbmVyLmNoaWxkcmVuLml0ZW0oaSkgYXMgSFRNTEVsZW1lbnQpO1xuXHR9XG5cdHJldHVybiBlbGVtZW50cztcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGdldExlYWZCQm94RWxlbWVudHMobGVhZjogV29ya3NwYWNlTGVhZikge1xuXHRjb25zdCB0aXRsZSA9IGdldENvbnRhaW5lckVsZW1lbnQobGVhZikucXVlcnlTZWxlY3RvcihcIi5pbmxpbmUtdGl0bGVcIik7XG5cdGlmICghdGl0bGUpIHtcblx0XHR0aHJvdyBuZXcgRXJyb3IoXCJNaXNzaW5nIHRpdGxlXCIpO1xuXHR9XG5cdGNvbnN0IHRpdGxlQmJveCA9IHRpdGxlLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuXHRjb25zdCBsaW5lID0gZ2V0Q29udGFpbmVyRWxlbWVudChsZWFmKS5xdWVyeVNlbGVjdG9yKFwiLmNtLWxpbmVcIik7XG5cdGlmICghbGluZSkge1xuXHRcdHRocm93IG5ldyBFcnJvcihcIkRvY3VtZW50IGhhcyBubyBsaW5lc1wiKTtcblx0fVxuXHRjb25zdCBsaW5lQmJveCA9IGxpbmUuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG5cblx0cmV0dXJuIHsgdGl0bGVCYm94LCBsaW5lQmJveCB9O1xufVxuXG5leHBvcnQgZnVuY3Rpb24gdXBkYXRlQmFja2xpbmtNYXJrUG9zaXRpb24oXG5cdGxlYWY6IFdvcmtzcGFjZUxlYWYsXG5cdGJhY2tsaW5rc1RvTGVhZjogQmFja2xpbmtbXSxcblx0c2hvd1BvcnRhbHM6IGJvb2xlYW5cbikge1xuXHRjb25zdCBlZGl0b3IgPSBnZXRNYXJrZG93blZpZXcobGVhZikuZWRpdG9yO1xuXHRjb25zdCBiYWNrbGlua0NvbnRhaW5lciA9IGdldEJhY2tsaW5rQ29udGFpbmVyKGVkaXRvcik7XG5cblx0bGV0IGJhY2tsaW5rcyA9IFtdO1xuXHRmb3IgKGxldCBpID0gMDsgaSA8IGJhY2tsaW5rQ29udGFpbmVyLmNoaWxkcmVuLmxlbmd0aDsgaSsrKSB7XG5cdFx0YmFja2xpbmtzLnB1c2goYmFja2xpbmtDb250YWluZXIuY2hpbGRyZW4uaXRlbShpKSBhcyBIVE1MRWxlbWVudCk7XG5cdH1cblx0bGV0IGJhY2tsaW5rSWRzOiBzdHJpbmdbXSA9IGJhY2tsaW5rc1RvTGVhZi5tYXAoKHgpID0+IGdldEJhY2tsaW5rSUQoeCkpO1xuXG5cdGJhY2tsaW5rc1xuXHRcdC5tYXAoKHg6IEhUTUxTcGFuRWxlbWVudCkgPT4geC5pZClcblx0XHQuZm9yRWFjaCgoaWQpID0+IHtcblx0XHRcdGlmICghYmFja2xpbmtJZHMuaW5jbHVkZXMoaWQpKSB7XG5cdFx0XHRcdGxldCBlbGVtZW50ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoaWQpO1xuXHRcdFx0XHRpZiAoZWxlbWVudCkgZWxlbWVudC5yZW1vdmUoKTtcblx0XHRcdH1cblx0XHR9KTtcblxuXHRjb25zdCB7IHRpdGxlQmJveCwgbGluZUJib3ggfSA9IGdldExlYWZCQm94RWxlbWVudHMobGVhZik7XG5cblx0bGV0IHJlZmVyZW5jZU1hcmtlcnMgPSBiYWNrbGlua3NUb0xlYWYubWFwKChiYWNrbGluaykgPT4ge1xuXHRcdGNvbnN0IHsgZnJvbSB9ID0gYmFja2xpbmsucmVmZXJlbmNlZExvY2F0aW9uO1xuXG5cdFx0Y29uc3QgYmJveCA9IGdldENvZGVNaXJyb3JFZGl0b3JWaWV3KGVkaXRvcikuY29vcmRzQXRQb3MoZnJvbSk7XG5cdFx0aWYgKCFiYm94KSByZXR1cm47XG5cblx0XHRsZXQgcmVmZXJlbmNlTWFya2VyID0gYmFja2xpbmtDb250YWluZXIucXVlcnlTZWxlY3Rvcihcblx0XHRcdGAjJHtnZXRCYWNrbGlua0lEKGJhY2tsaW5rKX1gXG5cdFx0KSBhcyBIVE1MRWxlbWVudCB8IG51bGw7XG5cblx0XHRpZiAocmVmZXJlbmNlTWFya2VyID09PSBudWxsKSB7XG5cdFx0XHRyZWZlcmVuY2VNYXJrZXIgPSBjcmVhdGVCYWNrbGlua01hcmsoYmFja2xpbmspO1xuXHRcdFx0YmFja2xpbmtDb250YWluZXIuYXBwZW5kQ2hpbGQocmVmZXJlbmNlTWFya2VyKTtcblx0XHR9XG5cblx0XHRpZiAoYmJveCkge1xuXHRcdFx0cmVmZXJlbmNlTWFya2VyLnN0eWxlLnBvc2l0aW9uID0gXCJhYnNvbHV0ZVwiO1xuXG5cdFx0XHRyZWZlcmVuY2VNYXJrZXIuc2V0QXR0cmlidXRlKFwidG9wXCIsIGJib3gudG9wLnRvU3RyaW5nKCkpO1xuXHRcdFx0cmVmZXJlbmNlTWFya2VyLnN0eWxlLnRvcCA9IGJib3gudG9wIC0gdGl0bGVCYm94LnRvcCArIDMyICsgXCJweFwiO1xuXHRcdFx0cmVmZXJlbmNlTWFya2VyLnN0eWxlLmxlZnQgPSBsaW5lQmJveC53aWR0aCArIDQwICsgXCJweFwiO1xuXHRcdH1cblxuXHRcdHJldHVybiByZWZlcmVuY2VNYXJrZXI7XG5cdH0pO1xuXG5cdGxldCBsYXN0WUJvdHRvbSA9IC1JbmZpbml0eTsgLy8gZm9yIGxhcmdlIGRvY3VtZW50cyBcdUQ4M0RcdURFMDFcblx0bGV0IG1hcmdpbiA9IDQ7XG5cdHJlZmVyZW5jZU1hcmtlcnNcblx0XHQuc29ydChcblx0XHRcdChhLCBiKSA9PlxuXHRcdFx0XHRwYXJzZUludChhIS5nZXRBdHRyaWJ1dGUoXCJ0b3BcIikhKSAtIHBhcnNlSW50KGIhLmdldEF0dHJpYnV0ZShcInRvcFwiKSEpXG5cdFx0KVxuXHRcdC5mb3JFYWNoKChtYXJrZXIpID0+IHtcblx0XHRcdGlmICghbWFya2VyKSByZXR1cm47XG5cdFx0XHQvLyB0b2dnbGUgcG9ydGFsc1xuXHRcdFx0Y29uc3QgcG9ydGFsOiBIVE1MRWxlbWVudCB8IG51bGwgPSBtYXJrZXIucXVlcnlTZWxlY3RvcihcIi5wb3J0YWxcIik7XG5cdFx0XHRjb25zdCBzdmcgPSBtYXJrZXIucXVlcnlTZWxlY3RvcihcInN2Z1wiKTtcblx0XHRcdGlmIChzaG93UG9ydGFscykge1xuXHRcdFx0XHRpZiAoc3ZnICYmICFwb3J0YWwpIHN2Zy5zdHlsZS5kaXNwbGF5ID0gXCJpbmxpbmVcIjtcblx0XHRcdFx0ZWxzZSBpZiAoc3ZnKSBzdmcuc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xuXG5cdFx0XHRcdGlmIChwb3J0YWwpIHtcblx0XHRcdFx0XHRwb3J0YWwuc3R5bGUuZGlzcGxheSA9IFwiaW5saW5lXCI7XG5cdFx0XHRcdFx0bWFya2VyLnN0eWxlLmJvcmRlciA9IFwiM3B4IHNvbGlkIGdyZXlcIjtcblx0XHRcdFx0XHRtYXJrZXIuc3R5bGUucGFkZGluZyA9IFwiM3B4XCI7XG5cdFx0XHRcdFx0bWFya2VyLnN0eWxlLmJvcmRlclJhZGl1cyA9IFwiM3B4XCI7XG5cdFx0XHRcdH1cblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdGlmIChzdmcpIHN2Zy5zdHlsZS5kaXNwbGF5ID0gXCJpbmxpbmVcIjtcblx0XHRcdFx0aWYgKHBvcnRhbCkge1xuXHRcdFx0XHRcdHBvcnRhbC5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XG5cdFx0XHRcdFx0bWFya2VyLnN0eWxlLmJvcmRlciA9IFwibm9uZVwiO1xuXHRcdFx0XHRcdG1hcmtlci5zdHlsZS5wYWRkaW5nID0gXCIwcHhcIjtcblx0XHRcdFx0XHRtYXJrZXIuc3R5bGUuYm9yZGVyUmFkaXVzID0gXCIwcHhcIjtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdFx0Ly8gZ2V0IHBvc2l0aW9uaW5nXG5cdFx0XHRsZXQgdG9wID0gcGFyc2VJbnQobWFya2VyIS5nZXRBdHRyaWJ1dGUoXCJ0b3BcIikhKTtcblx0XHRcdHRvcCA9IE1hdGgubWF4KHRvcCwgbGFzdFlCb3R0b20gKyBtYXJnaW4pO1xuXHRcdFx0bGFzdFlCb3R0b20gPSB0b3AgKyBtYXJrZXIuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkuaGVpZ2h0ICsgbWFyZ2luO1xuXHRcdFx0bWFya2VyLnNldEF0dHJpYnV0ZShcInRvcFwiLCB0b3AudG9TdHJpbmcoKSk7XG5cdFx0XHRtYXJrZXIuc3R5bGUudG9wID0gdG9wIC0gdGl0bGVCYm94LnRvcCArIDMyICsgXCJweFwiO1xuXHRcdFx0bWFya2VyLnN0eWxlLmxlZnQgPSBsaW5lQmJveC53aWR0aCArIDQwICsgXCJweFwiO1xuXHRcdH0pO1xufVxuXG5sZXQgZGVib3VuY2VUaW1lcjogTm9kZUpTLlRpbWVvdXQ7XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiB1cGRhdGVCYWNrbGlua01hcmtQb3NpdGlvbnMoKSB7XG5cdGNsZWFyVGltZW91dChkZWJvdW5jZVRpbWVyKTtcblx0ZGVib3VuY2VUaW1lciA9IHNldFRpbWVvdXQoKCkgPT4ge1xuXHRcdGNvbnN0IGxlYXZlcyA9IGdldFRoYXQoKS53b3Jrc3BhY2UuZ2V0TGVhdmVzT2ZUeXBlKFxuXHRcdFx0XCJtYXJrZG93blwiXG5cdFx0KSBhcyBXb3Jrc3BhY2VMZWFmW107XG5cblx0XHRzZXRUaW1lb3V0KGFzeW5jICgpID0+IHtcblx0XHRcdGNvbnN0IGFsbEJhY2tsaW5rczogQmFja2xpbmtbXSA9IGF3YWl0IHJlY29tcHV0ZVJlZmVyZW5jZXNGb3JQYWdlKCk7XG5cblx0XHRcdGxlYXZlcy5mb3JFYWNoKChsZWFmKSA9PiB7XG5cdFx0XHRcdGNvbnN0IGJhY2tsaW5rc1RvTGVhZiA9IGFsbEJhY2tsaW5rcy5maWx0ZXIoXG5cdFx0XHRcdFx0Ly8gQHRzLWlnbm9yZVxuXHRcdFx0XHRcdChiKSA9PiBiLnJlZmVyZW5jZWRMb2NhdGlvbi5maWxlbmFtZSA9PSBsZWFmLnZpZXcuZmlsZS5wYXRoXG5cdFx0XHRcdCk7XG5cdFx0XHRcdC8vIHdpZHRoIDkwMCwgc2hvdyB0aGUgcmVmZXJlbmNlXG5cdFx0XHRcdGNvbnN0IHNob3dQb3J0YWxzID0gZ2V0Q29udGFpbmVyRWxlbWVudChsZWFmKS5pbm5lcldpZHRoID4gOTAwO1xuXHRcdFx0XHR1cGRhdGVCYWNrbGlua01hcmtQb3NpdGlvbihsZWFmLCBiYWNrbGlua3NUb0xlYWYsIHNob3dQb3J0YWxzKTtcblx0XHRcdH0pO1xuXHRcdH0sIDUwMCk7XG5cdH0sIDEwMCk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVCYWNrbGlua01hcmsoYmFja2xpbms6IEJhY2tsaW5rKTogSFRNTEVsZW1lbnQge1xuXHQvLyBBbmR5J3Mgbm90ZXMgb24gbGF5aW5nIG91dCB0aGUgcmVmZXJlbmNlcyBzbyB0aGF0IHRoZXkgZG9uJ3QgY29sbGlkZVxuXHQvLyAxLiBpbiB0aGlzIGZ1bmN0aW9uLCBzdG9yZSB0aGUgYmJveC50b3AgaW4gYW4gYXR0cmlidXRlIHNvIHRoYXQgeW91IGNhbiB1c2UgaXQgbGF0ZXJcblx0Ly8gMi4gc2VwYXJhdGVseSwgZG8gYSBnbG9iYWwgbGF5b3V0IHBhc3Mgd2hlbmV2ZXIgdGhlIGdlb21ldHJ5IGNoYW5nZXMgb3IgYWxzbyBvbiBlZGl0cyAoV2l0aCBkZWJvdW5jZSlcblx0Ly8gICAgaW4gdGhhdCBnbG9iYWwgbGF5b3V0IHBhc3MsIHNvcnQgYWxsIHRoZSByZWZlcmVuY2VzIGJ5IGJib3gudG9wICh2aWEgdGhlIGF0dHJpYnV0ZSksIHRoZW4gZ3JlZWRpbHkgbGF5b3V0XG5cdC8vXHQgIGxldCBsYXN0WUJvdHRvbTsgZm9yIHRoZSBmaXJzdCBvbmUsIHBsYWNlIGl0IHdoZXJlIGl0IHdhbnRzIHRvIGJlLiB0aGVuIHNldCBsYXN0WUJvdHRvbSB0byB0aGF0IGJib3gudG9wIHBsdXMgaXRzIGhlaWdodFxuXHQvL1x0ICB0aGVuLCBmb3IgdGhlIHJlc3QsIHNldCB0aGVpciB0b3AgdG8gbWF4KGJib3gudG9wLCBsYXN0WUJvdHRvbSArIG1hcmdpbilcblx0Ly8gdGhpbmsgYWJvdXQgdGhlIGNhc2Ugd2hlcmUgdGhlIGJhY2tsaW5rIGlzIHRvIGFuIGlzb2xhdGVkIHF1b3RlXG5cblx0bGV0IHsgc3Bhbiwgc3ZnIH0gPSBjcmVhdGVSZWZlcmVuY2VJY29uKGJhY2tsaW5rLnBvcnRhbFRleHQpO1xuXHRjb25zdCBwb3J0YWw6IEhUTUxFbGVtZW50IHwgbnVsbCA9IHNwYW4ucXVlcnlTZWxlY3RvcihcIi5wb3J0YWxcIik7XG5cblx0c3Bhbi5zdHlsZS5wb3NpdGlvbiA9IFwiYWJzb2x1dGVcIjtcblxuXHRzcGFuLmlkID0gZ2V0QmFja2xpbmtJRChiYWNrbGluayk7XG5cdHNwYW4uc2V0QXR0cmlidXRlKFwicmVmZXJlbmNlXCIsIEpTT04uc3RyaW5naWZ5KGJhY2tsaW5rKSk7XG5cblx0c3Bhbi5hZGRFdmVudExpc3RlbmVyKFwibW91c2VlbnRlclwiLCBhc3luYyAoKSA9PiB7XG5cdFx0aWYgKHBvcnRhbCAmJiBwb3J0YWwuc3R5bGUuZGlzcGxheSAhPSBcIm5vbmVcIikge1xuXHRcdFx0c3Bhbi5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSBTVkdfSE9WRVJfQ09MT1I7XG5cdFx0fSBlbHNlIHtcblx0XHRcdHNwYW4uc3R5bGUuYmFja2dyb3VuZENvbG9yID0gXCJcIjtcblx0XHRcdHN2Zy5zZXRBdHRyaWJ1dGUoXCJmaWxsXCIsIFNWR19IT1ZFUl9DT0xPUik7XG5cdFx0fVxuXG5cdFx0Ly8gcmVtb3ZlIGV4aXN0aW5nIGN1cnNvcnNcblx0XHR1cGRhdGVIb3ZlcmVkQ3Vyc29yQ29sb3Ioc3BhbiwgQUNUSU9OX1RZUEUuQkFDS0xJTkspO1xuXHR9KTtcblxuXHRzcGFuLmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZWxlYXZlXCIsIGFzeW5jICgpID0+IHtcblx0XHRpZiAocG9ydGFsICYmIHBvcnRhbC5zdHlsZS5kaXNwbGF5ICE9IFwibm9uZVwiKSB7XG5cdFx0XHRzcGFuLnN0eWxlLmJhY2tncm91bmRDb2xvciA9IFwid2hpdGVcIjtcblx0XHRcdC8vIHN2Zy5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSBcIndoaXRlXCI7XG5cdFx0fSBlbHNlIHtcblx0XHRcdHNwYW4uc3R5bGUuYmFja2dyb3VuZENvbG9yID0gXCJcIjtcblx0XHRcdGlmIChwb3J0YWwpIHtcblx0XHRcdFx0c3ZnLnNldEF0dHJpYnV0ZShcImZpbGxcIiwgXCJ3aGl0ZVwiKTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdHN2Zy5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSBcIndoaXRlXCI7XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0aGFuZGxlUmVtb3ZlSG92ZXJlZEN1cnNvcihBQ1RJT05fVFlQRS5CQUNLTElOSyk7XG5cdH0pO1xuXG5cdGNvbnN0IHJlc2l6ZU9ic2VydmVyID0gbmV3IFJlc2l6ZU9ic2VydmVyKChlbnRyaWVzKSA9PiB7XG5cdFx0aWYgKHBvcnRhbCAmJiBwb3J0YWwuc3R5bGUuZGlzcGxheSAhPSBcIm5vbmVcIikge1xuXHRcdFx0c3Bhbi5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSBcIndoaXRlXCI7XG5cdFx0fSBlbHNlIHtcblx0XHRcdHNwYW4uc3R5bGUuYmFja2dyb3VuZENvbG9yID0gXCJcIjtcblx0XHR9XG5cdH0pO1xuXG5cdC8vIFN0YXJ0IG9ic2VydmluZyBhbiBlbGVtZW50XG5cdHJlc2l6ZU9ic2VydmVyLm9ic2VydmUoc3Bhbik7XG5cblx0c3Bhbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgb3BlbkJhY2tsaW5rUmVmZXJlbmNlKTtcblxuXHRyZXR1cm4gc3Bhbjtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGFkZFJlZmVyZW5jZXNUb0xlYWYobGVhZjogV29ya3NwYWNlTGVhZikge1xuXHRjb25zdCBtYXJrZG93blZpZXcgPSBnZXRNYXJrZG93blZpZXcobGVhZik7XG5cdGxldCB3b3Jrc3BhY2VUYWJzID0gbWFya2Rvd25WaWV3LmNvbnRhaW5lckVsLmNsb3Nlc3QoXCIud29ya3NwYWNlLXRhYnNcIik7XG5cdGlmICghd29ya3NwYWNlVGFicykge1xuXHRcdHRocm93IG5ldyBFcnJvcihcIk1pc3Npbmcgd29ya3NwYWNlIHRhYnNcIik7XG5cdH1cblxuXHR1cGRhdGVCYWNrbGlua01hcmtQb3NpdGlvbnMoKTtcblxuXHRnZXRDb250YWluZXJFbGVtZW50KG1hcmtkb3duVmlldy5lZGl0b3IpXG5cdFx0LnF1ZXJ5U2VsZWN0b3IoXCIuY20tc2Nyb2xsZXJcIikhXG5cdFx0LmFkZEV2ZW50TGlzdGVuZXIoXCJzY3JvbGxcIiwgKCkgPT4ge1xuXHRcdFx0dXBkYXRlQmFja2xpbmtNYXJrUG9zaXRpb25zKCk7XG5cdFx0fSk7XG5cblx0bGV0IHJlc2l6ZU9ic2VydmVyID0gbmV3IFJlc2l6ZU9ic2VydmVyKCgpID0+IHtcblx0XHR1cGRhdGVCYWNrbGlua01hcmtQb3NpdGlvbnMoKTtcblx0fSk7XG5cblx0cmVzaXplT2JzZXJ2ZXIub2JzZXJ2ZSh3b3Jrc3BhY2VUYWJzKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGdldE1hcmtkb3duVmlldyhsZWFmOiBXb3Jrc3BhY2VMZWFmKTogTWFya2Rvd25WaWV3IHtcblx0aWYgKCEobGVhZi52aWV3IGluc3RhbmNlb2YgTWFya2Rvd25WaWV3KSkge1xuXHRcdHRocm93IG5ldyBFcnJvcihcIlVuZXhwZWN0ZWQgbm9uLW1hcmtkb3duIHZpZXdcIik7XG5cdH1cblx0cmV0dXJuIGxlYWYudmlldyBhcyBNYXJrZG93blZpZXc7XG59XG5cbmZ1bmN0aW9uIGdldEZpbGVuYW1lKGxlYWY6IFdvcmtzcGFjZUxlYWYpOiBzdHJpbmcge1xuXHRjb25zdCB7IGZpbGUgfSA9IGdldE1hcmtkb3duVmlldyhsZWFmKTtcblx0aWYgKCFmaWxlKSB7XG5cdFx0dGhyb3cgbmV3IEVycm9yKFwiVW5leHBlY3RlZCBtaXNzaW5nIGZpbGVcIik7XG5cdH1cblx0cmV0dXJuIGZpbGUubmFtZTtcbn1cblxuZnVuY3Rpb24gY3JlYXRlQmFja2xpbmtEYXRhKFxuXHRyZWZlcmVuY2luZ0ZpbGVEYXRhOiBzdHJpbmcsXG5cdHJlZmVyZW5jaW5nRmlsZTogVEZpbGVcbik6IEJhY2tsaW5rW10ge1xuXHRsZXQgYmFja2xpbmtzOiBCYWNrbGlua1tdID0gW107XG5cblx0bGV0IG1hdGNoZXMgPSBbLi4ucmVmZXJlbmNpbmdGaWxlRGF0YS5tYXRjaEFsbChSRUZFUkVOQ0VfUkVHRVgpXTtcblx0bWF0Y2hlcy5mb3JFYWNoKChtYXRjaCkgPT4ge1xuXHRcdGxldCBbcHJlZml4LCB0ZXh0LCBzdWZmaXgsIGZpbGVuYW1lLCBmcm9tLCB0bywgcG9ydGFsXSA9IHByb2Nlc3NVUkkoXG5cdFx0XHRtYXRjaFsxXVxuXHRcdCk7XG5cdFx0Y29uc3QgcmVmZXJlbmNlZExvY2F0aW9uOiBEb2N1bWVudExvY2F0aW9uID0ge1xuXHRcdFx0cHJlZml4LFxuXHRcdFx0dGV4dCxcblx0XHRcdHN1ZmZpeCxcblx0XHRcdGZpbGVuYW1lLFxuXHRcdFx0ZnJvbSxcblx0XHRcdHRvLFxuXHRcdH07XG5cblx0XHQvLyAxLiBmaW5kIHRoZSBsaW5lIHdoaWNoIGluY2x1ZGVzIG1hdGNoLmluZGV4XG5cdFx0Ly8gMi4gc3RyaXAgb3V0IGFsbCB0aGUgbGlua3MgaW4gdGhhdCBsaW5lXG5cdFx0Ly8gMy4gZXh0cmFjdCB0aGUgZmlyc3QgTiBjaGFyYWN0ZXJzIG9mIHRoZSBsaW5lXG5cdFx0Ly8gY29uc3QgcG9ydGFsVGV4dCA9IHJlZmVyZW5jaW5nRmlsZURhdGEuc2xpY2UoXG5cdFx0Ly8gXHRtYXRjaC5pbmRleCEgLSBQT1JUQUxfVEVYVF9TTElDRV9TSVpFLFxuXHRcdC8vIFx0UE9SVEFMX1RFWFRfU0xJQ0VfU0laRVxuXHRcdC8vICk7XG5cblx0XHRsZXQgaW5kZXggPSByZWZlcmVuY2luZ0ZpbGVEYXRhLmluZGV4T2YobWF0Y2hbMF0pO1xuXG5cdFx0Y29uc3QgcmVmZXJlbmNpbmdTdXJyb3VuZGluZ1N0cmluZ3MgPSBnZXRQcmVmaXhBbmRTdWZmaXgoXG5cdFx0XHRyZWZlcmVuY2luZ0ZpbGVEYXRhLFxuXHRcdFx0aW5kZXgsXG5cdFx0XHRpbmRleCArIG1hdGNoWzBdLmxlbmd0aFxuXHRcdCk7XG5cblx0XHRjb25zdCByZWZlcmVuY2luZ0xvY2F0aW9uOiBEb2N1bWVudExvY2F0aW9uID0ge1xuXHRcdFx0Ly8gcHJlZml4OiByZWZlcmVuY2luZ0ZpbGVEYXRhLnNsaWNlKGluZGV4IC0gMjUsIGluZGV4KSxcblx0XHRcdHByZWZpeDogcmVmZXJlbmNpbmdTdXJyb3VuZGluZ1N0cmluZ3MucHJlZml4LFxuXHRcdFx0dGV4dDogcmVmZXJlbmNpbmdGaWxlRGF0YS5zbGljZShpbmRleCwgaW5kZXggKyBtYXRjaFswXS5sZW5ndGgpLFxuXHRcdFx0Ly8gc3VmZml4OiByZWZlcmVuY2luZ0ZpbGVEYXRhLnNsaWNlKFxuXHRcdFx0Ly8gXHRpbmRleCArIG1hdGNoWzBdLmxlbmd0aCxcblx0XHRcdC8vIFx0aW5kZXggKyBtYXRjaFswXS5sZW5ndGggKyAyNVxuXHRcdFx0Ly8gKSxcblx0XHRcdHN1ZmZpeDogcmVmZXJlbmNpbmdTdXJyb3VuZGluZ1N0cmluZ3Muc3VmZml4LFxuXHRcdFx0ZmlsZW5hbWU6IHJlZmVyZW5jaW5nRmlsZS5wYXRoLFxuXHRcdFx0ZnJvbTogbWF0Y2guaW5kZXghLCAvLyBUT0RPIGRvIHdlaXJkIHN0cmluZyBmb3JtYXRcblx0XHRcdHRvOiBtYXRjaC5pbmRleCEgKyBtYXRjaFswXS5sZW5ndGgsIC8vIFRPRE8gZG8gd2VpcmQgc3RyaW5nIGZvcm1hdFxuXHRcdH07XG5cblx0XHRpZiAocG9ydGFsID09IFwicG9ydGFsXCIpIHtcblx0XHRcdC8vIE9SIG5vLXBvcnRhbFxuXG5cdFx0XHQvLyBnZXQgYWxsIHRoZSB0ZXh0IGZyb20gdGhlIHN0YXJ0IG9mIHRoZSBsaW5lIHRvIHRoZSBlbmQgb2YgdGhlIGxpbmVcblx0XHRcdGNvbnN0IGdldExpbmVUZXh0ID0gKHRleHQ6IHN0cmluZywgaW5kZXg6IG51bWJlcik6IHN0cmluZyA9PiB7XG5cdFx0XHRcdGNvbnN0IHN0YXJ0T2ZMaW5lID0gdGV4dC5sYXN0SW5kZXhPZihcIlxcblwiLCBpbmRleCAtIDEpICsgMTtcblx0XHRcdFx0Y29uc3QgZW5kT2ZMaW5lID0gdGV4dC5pbmRleE9mKFwiXFxuXCIsIGluZGV4KTtcblx0XHRcdFx0cmV0dXJuIHRleHQuc2xpY2UoXG5cdFx0XHRcdFx0c3RhcnRPZkxpbmUsXG5cdFx0XHRcdFx0ZW5kT2ZMaW5lICE9PSAtMSA/IGVuZE9mTGluZSA6IHVuZGVmaW5lZFxuXHRcdFx0XHQpO1xuXHRcdFx0fTtcblxuXHRcdFx0bGV0IGxpbmUgPSBnZXRMaW5lVGV4dChyZWZlcmVuY2luZ0ZpbGVEYXRhLCBpbmRleCk7XG5cdFx0XHRsZXQgcG9ydGFsVGV4dCA9IGxpbmUucmVwbGFjZShuZXcgUmVnRXhwKFJFRkVSRU5DRV9SRUdFWCwgXCJnXCIpLCBcIlwiKTtcblx0XHRcdGxldCBwb3J0YWxUZXh0U2xpY2UgPSBwb3J0YWxUZXh0LnNsaWNlKDAsIFBPUlRBTF9URVhUX1NMSUNFX1NJWkUpO1xuXG5cdFx0XHRiYWNrbGlua3MucHVzaCh7XG5cdFx0XHRcdHJlZmVyZW5jZWRMb2NhdGlvbixcblx0XHRcdFx0cmVmZXJlbmNpbmdMb2NhdGlvbixcblx0XHRcdFx0ZGF0YVN0cmluZzogbWF0Y2hbMV0sXG5cdFx0XHRcdHBvcnRhbFRleHQ6IHBvcnRhbFRleHRTbGljZSxcblx0XHRcdH0pO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHRiYWNrbGlua3MucHVzaCh7XG5cdFx0XHRcdHJlZmVyZW5jZWRMb2NhdGlvbixcblx0XHRcdFx0cmVmZXJlbmNpbmdMb2NhdGlvbixcblx0XHRcdFx0ZGF0YVN0cmluZzogbWF0Y2hbMV0sXG5cdFx0XHR9KTtcblx0XHR9XG5cdH0pO1xuXHRyZXR1cm4gYmFja2xpbmtzO1xufVxuXG4vLyBsZXQgZGVib3VuY2VUaW1lcjogTm9kZUpTLlRpbWVvdXQ7XG5leHBvcnQgZnVuY3Rpb24gZ2VuZXJhdGVCYWNrbGlua3MoKSB7XG5cdC8vIGNsZWFyVGltZW91dChkZWJvdW5jZVRpbWVyKTtcblx0Ly8gZGVib3VuY2VUaW1lciA9IHNldFRpbWVvdXQoKCkgPT4ge1xuXHRjb25zb2xlLmxvZyhcImdlbmVyYXRpbmcgcmVmZXJlbmNlc1wiKTtcblx0bGV0IGJhY2tsaW5rczogQmFja2xpbmtbXSA9IFtdO1xuXHRsZXQgbWFya2Rvd25GaWxlcyA9IHRoaXMuYXBwLnZhdWx0LmdldE1hcmtkb3duRmlsZXMoKTtcblxuXHRQcm9taXNlLmFsbChcblx0XHRtYXJrZG93bkZpbGVzLm1hcCgoZmlsZTogVEZpbGUpID0+IHRoaXMuYXBwLnZhdWx0LnJlYWQoZmlsZSkpXG5cdCkudGhlbigoZmlsZXMpID0+IHtcblx0XHRjb25zdCB6aXBwZWRBcnJheSA9IG1hcmtkb3duRmlsZXMubWFwKChmaWxlOiBURmlsZSwgaW5kZXg6IG51bWJlcikgPT4gKHtcblx0XHRcdG1hcmtkb3duRmlsZTogZmlsZSxcblx0XHRcdGZpbGVEYXRhOiBmaWxlc1tpbmRleF0sXG5cdFx0fSkpO1xuXG5cdFx0emlwcGVkQXJyYXkuZm9yRWFjaCgoZmlsZTogeyBtYXJrZG93bkZpbGU6IFRGaWxlOyBmaWxlRGF0YTogc3RyaW5nIH0pID0+IHtcblx0XHRcdGxldCBmaWxlQmFja2xpbmtzID0gY3JlYXRlQmFja2xpbmtEYXRhKGZpbGUuZmlsZURhdGEsIGZpbGUubWFya2Rvd25GaWxlKTtcblx0XHRcdHVwZGF0ZUJhY2tsaW5rcyhmaWxlQmFja2xpbmtzKTtcblxuXHRcdFx0YmFja2xpbmtzLnB1c2goLi4uZmlsZUJhY2tsaW5rcyk7XG5cdFx0fSk7XG5cblx0XHRjb25zdCBsZWF2ZXMgPSB0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0TGVhdmVzT2ZUeXBlKFwibWFya2Rvd25cIik7XG5cblx0XHRsZWF2ZXMuZm9yRWFjaCgobGVhZjogV29ya3NwYWNlTGVhZikgPT4ge1xuXHRcdFx0YWRkUmVmZXJlbmNlc1RvTGVhZihsZWFmKTtcblx0XHR9KTtcblx0fSk7XG5cdC8vIH0sIDEwMCk7XG59XG5cbi8vIFNob3VsZCBvbmx5IHJlY29tcHV0ZSBmb3IgdGhlIHBhcnRpY3VsYXIgcGFnZSBiZWluZyBvcGVuZWQgb3IgaW50ZXJhY3RlZCB3aXRoXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gcmVjb21wdXRlUmVmZXJlbmNlc0ZvclBhZ2UoKTogUHJvbWlzZTxCYWNrbGlua1tdPiB7XG5cdGNvbnN0IGxlYXZlcyA9IGdldFRoYXQoKS53b3Jrc3BhY2UuZ2V0TGVhdmVzT2ZUeXBlKFwibWFya2Rvd25cIik7XG5cdGxldCByZWZlcmVuY2VzOiBCYWNrbGlua1tdID0gW107XG5cdGxldCBtYXJrZG93bkZpbGVzID0gdGhpcy5hcHAudmF1bHQuZ2V0TWFya2Rvd25GaWxlcygpO1xuXG5cdGxldCBwcm9taXNlcyA9IG1hcmtkb3duRmlsZXMubWFwKChmaWxlOiBURmlsZSkgPT4gdGhpcy5hcHAudmF1bHQucmVhZChmaWxlKSk7XG5cdC8vIGxldCBwcm9taXNlcyA9IGxlYXZlcy5tYXAoKGxlYWY6IFdvcmtzcGFjZUxlYWYpID0+IHtcblx0Ly8gXHQvLyBjb25zdCBhY3RpdmVMZWFmID0gdGhpcy5hcHAud29ya3NwYWNlLmdldEFjdGl2ZVZpZXdPZlR5cGUoTWFya2Rvd25WaWV3KTtcblx0Ly8gXHQvLyBpZiAoIWFjdGl2ZUxlYWYpIHJldHVybjtcblx0Ly8gXHRjb25zdCB2aWV3ID0gZ2V0TWFya2Rvd25WaWV3KGxlYWYpO1xuXHQvLyBcdGNvbnN0IGZpbGUgPSB2aWV3LmZpbGU7XG5cdC8vIFx0aWYgKCFmaWxlKSB0aHJvdyBuZXcgRXJyb3IoXCJNaXNzaW5nIGZpbGVcIik7XG5cdC8vIFx0cmV0dXJuIHRoaXMuYXBwLnZhdWx0LnJlYWQoZmlsZSk7XG5cdC8vIH0pO1xuXHRsZXQgZmlsZXMgPSBhd2FpdCBQcm9taXNlLmFsbChwcm9taXNlcyk7XG5cdGNvbnN0IHppcHBlZEFycmF5ID0gbWFya2Rvd25GaWxlcy5tYXAoKGZpbGU6IFRGaWxlLCBpbmRleDogbnVtYmVyKSA9PiAoe1xuXHRcdG1hcmtkb3duRmlsZTogZmlsZSxcblx0XHRmaWxlRGF0YTogZmlsZXNbaW5kZXhdLFxuXHR9KSk7XG5cdHppcHBlZEFycmF5LmZvckVhY2goKGZpbGU6IHsgbWFya2Rvd25GaWxlOiBURmlsZTsgZmlsZURhdGE6IHN0cmluZyB9KSA9PiB7XG5cdFx0bGV0IGZpbGVCYWNrbGlua3MgPSBjcmVhdGVCYWNrbGlua0RhdGEoZmlsZS5maWxlRGF0YSwgZmlsZS5tYXJrZG93bkZpbGUpO1xuXHRcdHVwZGF0ZUJhY2tsaW5rcyhmaWxlQmFja2xpbmtzKTtcblxuXHRcdHJlZmVyZW5jZXMucHVzaCguLi5maWxlQmFja2xpbmtzKTtcblx0fSk7XG5cdC8vIGZpbGVzLmZvckVhY2goKGZpbGUsIGkpID0+IHtcblx0Ly8gXHRsZXQgZmlsZUJhY2tsaW5rcyA9IGNyZWF0ZUJhY2tsaW5rRGF0YShmaWxlLCBmaWxlKTtcblx0Ly8gXHR1cGRhdGVCYWNrbGlua3MoZmlsZUJhY2tsaW5rcyk7XG5cblx0Ly8gXHRyZWZlcmVuY2VzID0gWy4uLnJlZmVyZW5jZXMsIC4uLmZpbGVCYWNrbGlua3NdO1xuXHQvLyB9KTtcblx0Ly8gbGVhdmVzLmZvckVhY2goKGxlYWY6IFdvcmtzcGFjZUxlYWYsIGkpID0+IHtcblx0Ly8gXHRjb25zdCB2aWV3ID0gZ2V0TWFya2Rvd25WaWV3KGxlYWYpO1xuXHQvLyBcdGNvbnN0IGZpbGUgPSB2aWV3LmZpbGU7XG5cdC8vIFx0aWYgKCFmaWxlKSB0aHJvdyBuZXcgRXJyb3IoXCJNaXNzaW5nIGZpbGVcIik7XG5cdC8vIFx0bGV0IGZpbGVCYWNrbGlua3MgPSBjcmVhdGVCYWNrbGlua0RhdGEoZmlsZXNbaV0sIGZpbGUpO1xuXHQvLyBcdHVwZGF0ZUJhY2tsaW5rcyhmaWxlQmFja2xpbmtzKTtcblxuXHQvLyBcdHJlZmVyZW5jZXMgPSBbLi4ucmVmZXJlbmNlcywgLi4uZmlsZUJhY2tsaW5rc107XG5cdC8vIH0pO1xuXG5cdC8vIGNvbnNvbGUubG9nKHJlZmVyZW5jZXMpO1xuXHQvLyB1cGRhdGVCYWNrbGlua3MocmVmZXJlbmNlcyk7XG5cdHJldHVybiByZWZlcmVuY2VzO1xufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gb3BlbkJhY2tsaW5rUmVmZXJlbmNlKGV2OiBNb3VzZUV2ZW50KSB7XG5cdGxldCBjdXJzb3IgPSBnZXRDdXJzb3IoKTtcblx0bGV0IGhvdmVyID0gZ2V0QmFja2xpbmtIb3ZlcigpO1xuXHRsZXQgbGVhZiA9IGdldFRoYXQoKS53b3Jrc3BhY2UuZ2V0TGVhZkJ5SWQoaG92ZXIubGVhZklkKTtcblxuXHQvLyBAdHMtaWdub3JlXG5cdGxldCBjb250YWluZXIgPSBsZWFmLmNvbnRhaW5lckVsO1xuXHRpZiAoIWNvbnRhaW5lcikgdGhyb3cgbmV3IEVycm9yKFwiQ29udGFpbmVyIG5vdCBmb3VuZFwiKTtcblx0Y29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoXCIudmlldy1jb250ZW50XCIpLnN0eWxlLmJveFNoYWRvdyA9IFwibm9uZVwiO1xuXG5cdGlmIChcblx0XHRjdXJzb3IgJiZcblx0XHRob3ZlciAmJlxuXHRcdGN1cnNvci5kYXRhU3RyaW5nICYmXG5cdFx0aG92ZXIuZGF0YVN0cmluZyAmJlxuXHRcdGN1cnNvci5kYXRhU3RyaW5nID09IGhvdmVyLmRhdGFTdHJpbmdcblx0KSB7XG5cdFx0dXBkYXRlQ3Vyc29yKHtcblx0XHRcdHRlbXA6IGZhbHNlLFxuXHRcdFx0Y3Vyc29yVmlld3BvcnQ6IG51bGwsXG5cdFx0XHRwZWVrOiBmYWxzZSxcblx0XHR9KTtcblx0fVxuXHR1cGRhdGVCYWNrbGlua0hvdmVyKHtcblx0XHR0ZW1wOiBmYWxzZSxcblx0XHRjdXJzb3JWaWV3cG9ydDogbnVsbCxcblx0XHRwZWVrOiBmYWxzZSxcblx0fSk7XG5cblx0aGFuZGxlUmVtb3ZlSG92ZXJlZEN1cnNvcihBQ1RJT05fVFlQRS5DVVJTT1IpO1xuXG5cdHJlc2V0Q3Vyc29yKCk7XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBvcGVuUmVmZXJlbmNlKGV2OiBNb3VzZUV2ZW50KSB7XG5cdGxldCBjdXJzb3IgPSBnZXRDdXJzb3IoKTtcblx0bGV0IGhvdmVyID0gZ2V0SG92ZXIoKTtcblx0bGV0IGxlYWYgPSBnZXRUaGF0KCkud29ya3NwYWNlLmdldExlYWZCeUlkKGhvdmVyLmxlYWZJZCk7XG5cblx0Ly8gQHRzLWlnbm9yZVxuXHRsZXQgY29udGFpbmVyID0gbGVhZi5jb250YWluZXJFbDtcblx0aWYgKCFjb250YWluZXIpIHRocm93IG5ldyBFcnJvcihcIkNvbnRhaW5lciBub3QgZm91bmRcIik7XG5cdGNvbnRhaW5lci5xdWVyeVNlbGVjdG9yKFwiLnZpZXctY29udGVudFwiKS5zdHlsZS5ib3hTaGFkb3cgPSBcIm5vbmVcIjtcblxuXHRpZiAoXG5cdFx0Y3Vyc29yICYmXG5cdFx0aG92ZXIgJiZcblx0XHRjdXJzb3IuZGF0YVN0cmluZyAmJlxuXHRcdGhvdmVyLmRhdGFTdHJpbmcgJiZcblx0XHRjdXJzb3IuZGF0YVN0cmluZyA9PSBob3Zlci5kYXRhU3RyaW5nXG5cdCkge1xuXHRcdHVwZGF0ZUN1cnNvcih7XG5cdFx0XHR0ZW1wOiBmYWxzZSxcblx0XHRcdGN1cnNvclZpZXdwb3J0OiBudWxsLFxuXHRcdFx0cGVlazogZmFsc2UsXG5cdFx0fSk7XG5cdH1cblx0dXBkYXRlSG92ZXIoe1xuXHRcdHRlbXA6IGZhbHNlLFxuXHRcdGN1cnNvclZpZXdwb3J0OiBudWxsLFxuXHRcdHBlZWs6IGZhbHNlLFxuXHR9KTtcblxuXHRoYW5kbGVSZW1vdmVIb3ZlcmVkQ3Vyc29yKEFDVElPTl9UWVBFLkNVUlNPUik7XG5cblx0cmVzZXRDdXJzb3IoKTtcbn1cbiIsICJleHBvcnQgZGVmYXVsdCAvXig/OlswLTlhLWZdezh9LVswLTlhLWZdezR9LVsxLTVdWzAtOWEtZl17M30tWzg5YWJdWzAtOWEtZl17M30tWzAtOWEtZl17MTJ9fDAwMDAwMDAwLTAwMDAtMDAwMC0wMDAwLTAwMDAwMDAwMDAwMCkkL2k7IiwgImltcG9ydCBSRUdFWCBmcm9tICcuL3JlZ2V4LmpzJztcblxuZnVuY3Rpb24gdmFsaWRhdGUodXVpZCkge1xuICByZXR1cm4gdHlwZW9mIHV1aWQgPT09ICdzdHJpbmcnICYmIFJFR0VYLnRlc3QodXVpZCk7XG59XG5cbmV4cG9ydCBkZWZhdWx0IHZhbGlkYXRlOyIsICJpbXBvcnQgdmFsaWRhdGUgZnJvbSAnLi92YWxpZGF0ZS5qcyc7XG4vKipcbiAqIENvbnZlcnQgYXJyYXkgb2YgMTYgYnl0ZSB2YWx1ZXMgdG8gVVVJRCBzdHJpbmcgZm9ybWF0IG9mIHRoZSBmb3JtOlxuICogWFhYWFhYWFgtWFhYWC1YWFhYLVhYWFgtWFhYWFhYWFhYWFhYXG4gKi9cblxuY29uc3QgYnl0ZVRvSGV4ID0gW107XG5cbmZvciAobGV0IGkgPSAwOyBpIDwgMjU2OyArK2kpIHtcbiAgYnl0ZVRvSGV4LnB1c2goKGkgKyAweDEwMCkudG9TdHJpbmcoMTYpLnNsaWNlKDEpKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHVuc2FmZVN0cmluZ2lmeShhcnIsIG9mZnNldCA9IDApIHtcbiAgLy8gTm90ZTogQmUgY2FyZWZ1bCBlZGl0aW5nIHRoaXMgY29kZSEgIEl0J3MgYmVlbiB0dW5lZCBmb3IgcGVyZm9ybWFuY2VcbiAgLy8gYW5kIHdvcmtzIGluIHdheXMgeW91IG1heSBub3QgZXhwZWN0LiBTZWUgaHR0cHM6Ly9naXRodWIuY29tL3V1aWRqcy91dWlkL3B1bGwvNDM0XG4gIHJldHVybiBieXRlVG9IZXhbYXJyW29mZnNldCArIDBdXSArIGJ5dGVUb0hleFthcnJbb2Zmc2V0ICsgMV1dICsgYnl0ZVRvSGV4W2FycltvZmZzZXQgKyAyXV0gKyBieXRlVG9IZXhbYXJyW29mZnNldCArIDNdXSArICctJyArIGJ5dGVUb0hleFthcnJbb2Zmc2V0ICsgNF1dICsgYnl0ZVRvSGV4W2FycltvZmZzZXQgKyA1XV0gKyAnLScgKyBieXRlVG9IZXhbYXJyW29mZnNldCArIDZdXSArIGJ5dGVUb0hleFthcnJbb2Zmc2V0ICsgN11dICsgJy0nICsgYnl0ZVRvSGV4W2FycltvZmZzZXQgKyA4XV0gKyBieXRlVG9IZXhbYXJyW29mZnNldCArIDldXSArICctJyArIGJ5dGVUb0hleFthcnJbb2Zmc2V0ICsgMTBdXSArIGJ5dGVUb0hleFthcnJbb2Zmc2V0ICsgMTFdXSArIGJ5dGVUb0hleFthcnJbb2Zmc2V0ICsgMTJdXSArIGJ5dGVUb0hleFthcnJbb2Zmc2V0ICsgMTNdXSArIGJ5dGVUb0hleFthcnJbb2Zmc2V0ICsgMTRdXSArIGJ5dGVUb0hleFthcnJbb2Zmc2V0ICsgMTVdXTtcbn1cblxuZnVuY3Rpb24gc3RyaW5naWZ5KGFyciwgb2Zmc2V0ID0gMCkge1xuICBjb25zdCB1dWlkID0gdW5zYWZlU3RyaW5naWZ5KGFyciwgb2Zmc2V0KTsgLy8gQ29uc2lzdGVuY3kgY2hlY2sgZm9yIHZhbGlkIFVVSUQuICBJZiB0aGlzIHRocm93cywgaXQncyBsaWtlbHkgZHVlIHRvIG9uZVxuICAvLyBvZiB0aGUgZm9sbG93aW5nOlxuICAvLyAtIE9uZSBvciBtb3JlIGlucHV0IGFycmF5IHZhbHVlcyBkb24ndCBtYXAgdG8gYSBoZXggb2N0ZXQgKGxlYWRpbmcgdG9cbiAgLy8gXCJ1bmRlZmluZWRcIiBpbiB0aGUgdXVpZClcbiAgLy8gLSBJbnZhbGlkIGlucHV0IHZhbHVlcyBmb3IgdGhlIFJGQyBgdmVyc2lvbmAgb3IgYHZhcmlhbnRgIGZpZWxkc1xuXG4gIGlmICghdmFsaWRhdGUodXVpZCkpIHtcbiAgICB0aHJvdyBUeXBlRXJyb3IoJ1N0cmluZ2lmaWVkIFVVSUQgaXMgaW52YWxpZCcpO1xuICB9XG5cbiAgcmV0dXJuIHV1aWQ7XG59XG5cbmV4cG9ydCBkZWZhdWx0IHN0cmluZ2lmeTsiLCAiaW1wb3J0IHZhbGlkYXRlIGZyb20gJy4vdmFsaWRhdGUuanMnO1xuXG5mdW5jdGlvbiBwYXJzZSh1dWlkKSB7XG4gIGlmICghdmFsaWRhdGUodXVpZCkpIHtcbiAgICB0aHJvdyBUeXBlRXJyb3IoJ0ludmFsaWQgVVVJRCcpO1xuICB9XG5cbiAgbGV0IHY7XG4gIGNvbnN0IGFyciA9IG5ldyBVaW50OEFycmF5KDE2KTsgLy8gUGFyc2UgIyMjIyMjIyMtLi4uLi0uLi4uLS4uLi4tLi4uLi4uLi4uLi4uXG5cbiAgYXJyWzBdID0gKHYgPSBwYXJzZUludCh1dWlkLnNsaWNlKDAsIDgpLCAxNikpID4+PiAyNDtcbiAgYXJyWzFdID0gdiA+Pj4gMTYgJiAweGZmO1xuICBhcnJbMl0gPSB2ID4+PiA4ICYgMHhmZjtcbiAgYXJyWzNdID0gdiAmIDB4ZmY7IC8vIFBhcnNlIC4uLi4uLi4uLSMjIyMtLi4uLi0uLi4uLS4uLi4uLi4uLi4uLlxuXG4gIGFycls0XSA9ICh2ID0gcGFyc2VJbnQodXVpZC5zbGljZSg5LCAxMyksIDE2KSkgPj4+IDg7XG4gIGFycls1XSA9IHYgJiAweGZmOyAvLyBQYXJzZSAuLi4uLi4uLi0uLi4uLSMjIyMtLi4uLi0uLi4uLi4uLi4uLi5cblxuICBhcnJbNl0gPSAodiA9IHBhcnNlSW50KHV1aWQuc2xpY2UoMTQsIDE4KSwgMTYpKSA+Pj4gODtcbiAgYXJyWzddID0gdiAmIDB4ZmY7IC8vIFBhcnNlIC4uLi4uLi4uLS4uLi4tLi4uLi0jIyMjLS4uLi4uLi4uLi4uLlxuXG4gIGFycls4XSA9ICh2ID0gcGFyc2VJbnQodXVpZC5zbGljZSgxOSwgMjMpLCAxNikpID4+PiA4O1xuICBhcnJbOV0gPSB2ICYgMHhmZjsgLy8gUGFyc2UgLi4uLi4uLi4tLi4uLi0uLi4uLS4uLi4tIyMjIyMjIyMjIyMjXG4gIC8vIChVc2UgXCIvXCIgdG8gYXZvaWQgMzItYml0IHRydW5jYXRpb24gd2hlbiBiaXQtc2hpZnRpbmcgaGlnaC1vcmRlciBieXRlcylcblxuICBhcnJbMTBdID0gKHYgPSBwYXJzZUludCh1dWlkLnNsaWNlKDI0LCAzNiksIDE2KSkgLyAweDEwMDAwMDAwMDAwICYgMHhmZjtcbiAgYXJyWzExXSA9IHYgLyAweDEwMDAwMDAwMCAmIDB4ZmY7XG4gIGFyclsxMl0gPSB2ID4+PiAyNCAmIDB4ZmY7XG4gIGFyclsxM10gPSB2ID4+PiAxNiAmIDB4ZmY7XG4gIGFyclsxNF0gPSB2ID4+PiA4ICYgMHhmZjtcbiAgYXJyWzE1XSA9IHYgJiAweGZmO1xuICByZXR1cm4gYXJyO1xufVxuXG5leHBvcnQgZGVmYXVsdCBwYXJzZTsiLCAiaW1wb3J0IHsgdW5zYWZlU3RyaW5naWZ5IH0gZnJvbSAnLi9zdHJpbmdpZnkuanMnO1xuaW1wb3J0IHBhcnNlIGZyb20gJy4vcGFyc2UuanMnO1xuXG5mdW5jdGlvbiBzdHJpbmdUb0J5dGVzKHN0cikge1xuICBzdHIgPSB1bmVzY2FwZShlbmNvZGVVUklDb21wb25lbnQoc3RyKSk7IC8vIFVURjggZXNjYXBlXG5cbiAgY29uc3QgYnl0ZXMgPSBbXTtcblxuICBmb3IgKGxldCBpID0gMDsgaSA8IHN0ci5sZW5ndGg7ICsraSkge1xuICAgIGJ5dGVzLnB1c2goc3RyLmNoYXJDb2RlQXQoaSkpO1xuICB9XG5cbiAgcmV0dXJuIGJ5dGVzO1xufVxuXG5leHBvcnQgY29uc3QgRE5TID0gJzZiYTdiODEwLTlkYWQtMTFkMS04MGI0LTAwYzA0ZmQ0MzBjOCc7XG5leHBvcnQgY29uc3QgVVJMID0gJzZiYTdiODExLTlkYWQtMTFkMS04MGI0LTAwYzA0ZmQ0MzBjOCc7XG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiB2MzUobmFtZSwgdmVyc2lvbiwgaGFzaGZ1bmMpIHtcbiAgZnVuY3Rpb24gZ2VuZXJhdGVVVUlEKHZhbHVlLCBuYW1lc3BhY2UsIGJ1Ziwgb2Zmc2V0KSB7XG4gICAgdmFyIF9uYW1lc3BhY2U7XG5cbiAgICBpZiAodHlwZW9mIHZhbHVlID09PSAnc3RyaW5nJykge1xuICAgICAgdmFsdWUgPSBzdHJpbmdUb0J5dGVzKHZhbHVlKTtcbiAgICB9XG5cbiAgICBpZiAodHlwZW9mIG5hbWVzcGFjZSA9PT0gJ3N0cmluZycpIHtcbiAgICAgIG5hbWVzcGFjZSA9IHBhcnNlKG5hbWVzcGFjZSk7XG4gICAgfVxuXG4gICAgaWYgKCgoX25hbWVzcGFjZSA9IG5hbWVzcGFjZSkgPT09IG51bGwgfHwgX25hbWVzcGFjZSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX25hbWVzcGFjZS5sZW5ndGgpICE9PSAxNikge1xuICAgICAgdGhyb3cgVHlwZUVycm9yKCdOYW1lc3BhY2UgbXVzdCBiZSBhcnJheS1saWtlICgxNiBpdGVyYWJsZSBpbnRlZ2VyIHZhbHVlcywgMC0yNTUpJyk7XG4gICAgfSAvLyBDb21wdXRlIGhhc2ggb2YgbmFtZXNwYWNlIGFuZCB2YWx1ZSwgUGVyIDQuM1xuICAgIC8vIEZ1dHVyZTogVXNlIHNwcmVhZCBzeW50YXggd2hlbiBzdXBwb3J0ZWQgb24gYWxsIHBsYXRmb3JtcywgZS5nLiBgYnl0ZXMgPVxuICAgIC8vIGhhc2hmdW5jKFsuLi5uYW1lc3BhY2UsIC4uLiB2YWx1ZV0pYFxuXG5cbiAgICBsZXQgYnl0ZXMgPSBuZXcgVWludDhBcnJheSgxNiArIHZhbHVlLmxlbmd0aCk7XG4gICAgYnl0ZXMuc2V0KG5hbWVzcGFjZSk7XG4gICAgYnl0ZXMuc2V0KHZhbHVlLCBuYW1lc3BhY2UubGVuZ3RoKTtcbiAgICBieXRlcyA9IGhhc2hmdW5jKGJ5dGVzKTtcbiAgICBieXRlc1s2XSA9IGJ5dGVzWzZdICYgMHgwZiB8IHZlcnNpb247XG4gICAgYnl0ZXNbOF0gPSBieXRlc1s4XSAmIDB4M2YgfCAweDgwO1xuXG4gICAgaWYgKGJ1Zikge1xuICAgICAgb2Zmc2V0ID0gb2Zmc2V0IHx8IDA7XG5cbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgMTY7ICsraSkge1xuICAgICAgICBidWZbb2Zmc2V0ICsgaV0gPSBieXRlc1tpXTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIGJ1ZjtcbiAgICB9XG5cbiAgICByZXR1cm4gdW5zYWZlU3RyaW5naWZ5KGJ5dGVzKTtcbiAgfSAvLyBGdW5jdGlvbiNuYW1lIGlzIG5vdCBzZXR0YWJsZSBvbiBzb21lIHBsYXRmb3JtcyAoIzI3MClcblxuXG4gIHRyeSB7XG4gICAgZ2VuZXJhdGVVVUlELm5hbWUgPSBuYW1lOyAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tZW1wdHlcbiAgfSBjYXRjaCAoZXJyKSB7fSAvLyBGb3IgQ29tbW9uSlMgZGVmYXVsdCBleHBvcnQgc3VwcG9ydFxuXG5cbiAgZ2VuZXJhdGVVVUlELkROUyA9IEROUztcbiAgZ2VuZXJhdGVVVUlELlVSTCA9IFVSTDtcbiAgcmV0dXJuIGdlbmVyYXRlVVVJRDtcbn0iLCAiLy8gQWRhcHRlZCBmcm9tIENocmlzIFZlbmVzcycgU0hBMSBjb2RlIGF0XG4vLyBodHRwOi8vd3d3Lm1vdmFibGUtdHlwZS5jby51ay9zY3JpcHRzL3NoYTEuaHRtbFxuZnVuY3Rpb24gZihzLCB4LCB5LCB6KSB7XG4gIHN3aXRjaCAocykge1xuICAgIGNhc2UgMDpcbiAgICAgIHJldHVybiB4ICYgeSBeIH54ICYgejtcblxuICAgIGNhc2UgMTpcbiAgICAgIHJldHVybiB4IF4geSBeIHo7XG5cbiAgICBjYXNlIDI6XG4gICAgICByZXR1cm4geCAmIHkgXiB4ICYgeiBeIHkgJiB6O1xuXG4gICAgY2FzZSAzOlxuICAgICAgcmV0dXJuIHggXiB5IF4gejtcbiAgfVxufVxuXG5mdW5jdGlvbiBST1RMKHgsIG4pIHtcbiAgcmV0dXJuIHggPDwgbiB8IHggPj4+IDMyIC0gbjtcbn1cblxuZnVuY3Rpb24gc2hhMShieXRlcykge1xuICBjb25zdCBLID0gWzB4NWE4Mjc5OTksIDB4NmVkOWViYTEsIDB4OGYxYmJjZGMsIDB4Y2E2MmMxZDZdO1xuICBjb25zdCBIID0gWzB4Njc0NTIzMDEsIDB4ZWZjZGFiODksIDB4OThiYWRjZmUsIDB4MTAzMjU0NzYsIDB4YzNkMmUxZjBdO1xuXG4gIGlmICh0eXBlb2YgYnl0ZXMgPT09ICdzdHJpbmcnKSB7XG4gICAgY29uc3QgbXNnID0gdW5lc2NhcGUoZW5jb2RlVVJJQ29tcG9uZW50KGJ5dGVzKSk7IC8vIFVURjggZXNjYXBlXG5cbiAgICBieXRlcyA9IFtdO1xuXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBtc2cubGVuZ3RoOyArK2kpIHtcbiAgICAgIGJ5dGVzLnB1c2gobXNnLmNoYXJDb2RlQXQoaSkpO1xuICAgIH1cbiAgfSBlbHNlIGlmICghQXJyYXkuaXNBcnJheShieXRlcykpIHtcbiAgICAvLyBDb252ZXJ0IEFycmF5LWxpa2UgdG8gQXJyYXlcbiAgICBieXRlcyA9IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGJ5dGVzKTtcbiAgfVxuXG4gIGJ5dGVzLnB1c2goMHg4MCk7XG4gIGNvbnN0IGwgPSBieXRlcy5sZW5ndGggLyA0ICsgMjtcbiAgY29uc3QgTiA9IE1hdGguY2VpbChsIC8gMTYpO1xuICBjb25zdCBNID0gbmV3IEFycmF5KE4pO1xuXG4gIGZvciAobGV0IGkgPSAwOyBpIDwgTjsgKytpKSB7XG4gICAgY29uc3QgYXJyID0gbmV3IFVpbnQzMkFycmF5KDE2KTtcblxuICAgIGZvciAobGV0IGogPSAwOyBqIDwgMTY7ICsraikge1xuICAgICAgYXJyW2pdID0gYnl0ZXNbaSAqIDY0ICsgaiAqIDRdIDw8IDI0IHwgYnl0ZXNbaSAqIDY0ICsgaiAqIDQgKyAxXSA8PCAxNiB8IGJ5dGVzW2kgKiA2NCArIGogKiA0ICsgMl0gPDwgOCB8IGJ5dGVzW2kgKiA2NCArIGogKiA0ICsgM107XG4gICAgfVxuXG4gICAgTVtpXSA9IGFycjtcbiAgfVxuXG4gIE1bTiAtIDFdWzE0XSA9IChieXRlcy5sZW5ndGggLSAxKSAqIDggLyBNYXRoLnBvdygyLCAzMik7XG4gIE1bTiAtIDFdWzE0XSA9IE1hdGguZmxvb3IoTVtOIC0gMV1bMTRdKTtcbiAgTVtOIC0gMV1bMTVdID0gKGJ5dGVzLmxlbmd0aCAtIDEpICogOCAmIDB4ZmZmZmZmZmY7XG5cbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBOOyArK2kpIHtcbiAgICBjb25zdCBXID0gbmV3IFVpbnQzMkFycmF5KDgwKTtcblxuICAgIGZvciAobGV0IHQgPSAwOyB0IDwgMTY7ICsrdCkge1xuICAgICAgV1t0XSA9IE1baV1bdF07XG4gICAgfVxuXG4gICAgZm9yIChsZXQgdCA9IDE2OyB0IDwgODA7ICsrdCkge1xuICAgICAgV1t0XSA9IFJPVEwoV1t0IC0gM10gXiBXW3QgLSA4XSBeIFdbdCAtIDE0XSBeIFdbdCAtIDE2XSwgMSk7XG4gICAgfVxuXG4gICAgbGV0IGEgPSBIWzBdO1xuICAgIGxldCBiID0gSFsxXTtcbiAgICBsZXQgYyA9IEhbMl07XG4gICAgbGV0IGQgPSBIWzNdO1xuICAgIGxldCBlID0gSFs0XTtcblxuICAgIGZvciAobGV0IHQgPSAwOyB0IDwgODA7ICsrdCkge1xuICAgICAgY29uc3QgcyA9IE1hdGguZmxvb3IodCAvIDIwKTtcbiAgICAgIGNvbnN0IFQgPSBST1RMKGEsIDUpICsgZihzLCBiLCBjLCBkKSArIGUgKyBLW3NdICsgV1t0XSA+Pj4gMDtcbiAgICAgIGUgPSBkO1xuICAgICAgZCA9IGM7XG4gICAgICBjID0gUk9UTChiLCAzMCkgPj4+IDA7XG4gICAgICBiID0gYTtcbiAgICAgIGEgPSBUO1xuICAgIH1cblxuICAgIEhbMF0gPSBIWzBdICsgYSA+Pj4gMDtcbiAgICBIWzFdID0gSFsxXSArIGIgPj4+IDA7XG4gICAgSFsyXSA9IEhbMl0gKyBjID4+PiAwO1xuICAgIEhbM10gPSBIWzNdICsgZCA+Pj4gMDtcbiAgICBIWzRdID0gSFs0XSArIGUgPj4+IDA7XG4gIH1cblxuICByZXR1cm4gW0hbMF0gPj4gMjQgJiAweGZmLCBIWzBdID4+IDE2ICYgMHhmZiwgSFswXSA+PiA4ICYgMHhmZiwgSFswXSAmIDB4ZmYsIEhbMV0gPj4gMjQgJiAweGZmLCBIWzFdID4+IDE2ICYgMHhmZiwgSFsxXSA+PiA4ICYgMHhmZiwgSFsxXSAmIDB4ZmYsIEhbMl0gPj4gMjQgJiAweGZmLCBIWzJdID4+IDE2ICYgMHhmZiwgSFsyXSA+PiA4ICYgMHhmZiwgSFsyXSAmIDB4ZmYsIEhbM10gPj4gMjQgJiAweGZmLCBIWzNdID4+IDE2ICYgMHhmZiwgSFszXSA+PiA4ICYgMHhmZiwgSFszXSAmIDB4ZmYsIEhbNF0gPj4gMjQgJiAweGZmLCBIWzRdID4+IDE2ICYgMHhmZiwgSFs0XSA+PiA4ICYgMHhmZiwgSFs0XSAmIDB4ZmZdO1xufVxuXG5leHBvcnQgZGVmYXVsdCBzaGExOyIsICJpbXBvcnQgdjM1IGZyb20gJy4vdjM1LmpzJztcbmltcG9ydCBzaGExIGZyb20gJy4vc2hhMS5qcyc7XG5jb25zdCB2NSA9IHYzNSgndjUnLCAweDUwLCBzaGExKTtcbmV4cG9ydCBkZWZhdWx0IHY1OyIsICJpbXBvcnQgeyBNYXJrZG93blZpZXcsIFRleHRGaWxlVmlldywgVmlldyB9IGZyb20gXCJvYnNpZGlhblwiO1xuaW1wb3J0IHsgUkVGRVJFTkNFX1JFR0VYLCBBQ1RJT05fVFlQRSwgU1ZHX0hPVkVSX0NPTE9SIH0gZnJvbSBcIi4vY29uc3RhbnRzXCI7XG5pbXBvcnQgeyBzdGFydFJlZmVyZW5jZUVmZmVjdCwgZW5kUmVmZXJlbmNlQ3Vyc29yRWZmZWN0IH0gZnJvbSBcIi4vZWZmZWN0c1wiO1xuaW1wb3J0IHtcblx0Z2V0SG92ZXJlZEN1cnNvcixcblx0dXBkYXRlSG92ZXJlZEN1cnNvcixcblx0cmVtb3ZlSG92ZXJlZEN1cnNvcixcblx0Z2V0SG92ZXIsXG59IGZyb20gXCIuL3N0YXRlXCI7XG5pbXBvcnQgeyB1cGRhdGVIb3ZlcmVkQ3Vyc29yQ29sb3IgfSBmcm9tIFwiLi9yZWZlcmVuY2VzXCI7XG5cbmV4cG9ydCBmdW5jdGlvbiBwYXJzZUVkaXRvclBvc2l0aW9uKHBvc2l0aW9uU3RyaW5nOiBzdHJpbmcpIHtcblx0bGV0IFtsaW5lLCBjaF0gPSBwb3NpdGlvblN0cmluZy5zcGxpdChcIixcIik7XG5cdHJldHVybiB7IGxpbmU6IHBhcnNlSW50KGxpbmUpLCBjaDogcGFyc2VJbnQoY2gpIH07XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBlbmNvZGVVUklDb21wb25lbnRTdHJpbmcoc3RyOiBzdHJpbmcpOiBzdHJpbmcge1xuXHRyZXR1cm4gZW5jb2RlVVJJQ29tcG9uZW50KHN0cikucmVwbGFjZSgvWzooKV0vZywgZnVuY3Rpb24gKGMpIHtcblx0XHRyZXR1cm4gXCIlXCIgKyBjLmNoYXJDb2RlQXQoMCkudG9TdHJpbmcoMTYpO1xuXHR9KTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGRlY29kZVVSSUNvbXBvbmVudFN0cmluZyhzdHI6IHN0cmluZyk6IHN0cmluZyB7XG5cdHJldHVybiBkZWNvZGVVUklDb21wb25lbnQoXG5cdFx0c3RyLnJlcGxhY2UoLyUzQS9nLCBcIjpcIikucmVwbGFjZSgvJTI4L2csIFwiKFwiKS5yZXBsYWNlKC8lMjkvZywgXCIpXCIpXG5cdCk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBwcm9jZXNzVVJJKFxuXHRkYXRhU3RyaW5nOiBzdHJpbmdcbik6IFtcblx0cHJlZml4OiBzdHJpbmcsXG5cdHRleHQ6IHN0cmluZyxcblx0c3VmZml4OiBzdHJpbmcsXG5cdGZpbGU6IHN0cmluZyxcblx0ZnJvbTogbnVtYmVyLFxuXHR0bzogbnVtYmVyLFxuXHRwb3J0YWw/OiBzdHJpbmdcbl0ge1xuXHRsZXQgW3ByZWZpeCwgdGV4dCwgc3VmZml4LCBmaWxlLCBmcm9tLCB0bywgcG9ydGFsXSA9IGRhdGFTdHJpbmcuc3BsaXQoXCI6XCIpO1xuXHRwcmVmaXggPSBkZWNvZGVVUklDb21wb25lbnRTdHJpbmcocHJlZml4KTtcblx0dGV4dCA9IGRlY29kZVVSSUNvbXBvbmVudFN0cmluZyh0ZXh0KTtcblx0c3VmZml4ID0gZGVjb2RlVVJJQ29tcG9uZW50U3RyaW5nKHN1ZmZpeCk7XG5cdGZpbGUgPSBkZWNvZGVVUklDb21wb25lbnRTdHJpbmcoZmlsZSk7XG5cdGZyb20gPSBkZWNvZGVVUklDb21wb25lbnRTdHJpbmcoZnJvbSk7XG5cdHRvID0gZGVjb2RlVVJJQ29tcG9uZW50U3RyaW5nKHRvKTtcblx0aWYgKHBvcnRhbCkgcG9ydGFsID0gZGVjb2RlVVJJQ29tcG9uZW50U3RyaW5nKHBvcnRhbCk7XG5cdHJldHVybiBbcHJlZml4LCB0ZXh0LCBzdWZmaXgsIGZpbGUsIHBhcnNlSW50KGZyb20pLCBwYXJzZUludCh0byksIHBvcnRhbF07XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRQcmVmaXhBbmRTdWZmaXgoZG9jdW1lbnQ6IHN0cmluZywgZnJvbTogbnVtYmVyLCB0bzogbnVtYmVyKSB7XG5cdGxldCBwcmVmaXggPSBkb2N1bWVudFxuXHRcdC5zbGljZShmcm9tIC0gMjUsIGZyb20pXG5cdFx0LnNwbGl0KFwiXFxuXCIpXG5cdFx0LnNsaWNlKC0xKVswXTtcblx0Ly8gLnNsaWNlKGZyb20gLSAyNSA+IDAgPyBmcm9tIC0gMjUgOiAwLCBmcm9tKVxuXG5cdGxldCBzdWZmaXggPSBkb2N1bWVudC5zbGljZSh0bywgdG8gKyAyNSkuc3BsaXQoXCJcXG5cIilbMF07XG5cdHJldHVybiB7IHByZWZpeCwgc3VmZml4IH07XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBmaW5kVGV4dFBvc2l0aW9ucyhcblx0dGV4dDogc3RyaW5nLFxuXHRzZWFyY2hUZXJtOiBzdHJpbmcsXG5cdHByZWZpeDogc3RyaW5nID0gXCJcIixcblx0c3VmZml4OiBzdHJpbmcgPSBcIlwiXG4pIHtcblx0bGV0IHJvbGxpbmdJbmRleCA9IDA7XG5cblx0Y29uc3QgbGluZXMgPSB0ZXh0LnNwbGl0KFwiXFxuXCIpLm1hcCgobGluZTogc3RyaW5nLCBpOiBudW1iZXIpID0+IHtcblx0XHRsZXQgZGF0YSA9IHsgbGluZSwgaW5kZXg6IHJvbGxpbmdJbmRleCwgbGVuZ3RoOiBsaW5lLmxlbmd0aCArIDEsIGkgfTtcblx0XHRyb2xsaW5nSW5kZXggKz0gZGF0YS5sZW5ndGg7XG5cdFx0cmV0dXJuIGRhdGE7XG5cdH0pO1xuXG5cdGlmICh0ZXh0LmluY2x1ZGVzKHByZWZpeCArIHNlYXJjaFRlcm0gKyBzdWZmaXgpKSB7XG5cdFx0bGV0IG1hdGNoSW5kZXggPSB0ZXh0LmluZGV4T2YocHJlZml4ICsgc2VhcmNoVGVybSArIHN1ZmZpeCk7XG5cdFx0bGV0IHN0YXJ0SW5kZXggPVxuXHRcdFx0bGluZXMuZmluZEluZGV4KChsaW5lOiBhbnkpID0+IGxpbmUuaW5kZXggPiBtYXRjaEluZGV4ICsgcHJlZml4Lmxlbmd0aCkgLVxuXHRcdFx0MTtcblx0XHRsZXQgZW5kSW5kZXggPVxuXHRcdFx0bGluZXMuZmluZEluZGV4KFxuXHRcdFx0XHQobGluZTogYW55KSA9PlxuXHRcdFx0XHRcdGxpbmUuaW5kZXggPiBtYXRjaEluZGV4ICsgcHJlZml4Lmxlbmd0aCArIHNlYXJjaFRlcm0ubGVuZ3RoXG5cdFx0XHQpIC0gMTtcblxuXHRcdGlmIChzdGFydEluZGV4ID09IC0yKSBzdGFydEluZGV4ID0gbGluZXMubGVuZ3RoIC0gMTtcblx0XHRpZiAoZW5kSW5kZXggPT0gLTIpIGVuZEluZGV4ID0gbGluZXMubGVuZ3RoIC0gMTtcblxuXHRcdHJldHVybiB7XG5cdFx0XHRyYW5nZVN0YXJ0OiB7XG5cdFx0XHRcdGxpbmU6IHN0YXJ0SW5kZXgsXG5cdFx0XHRcdGNoOiBtYXRjaEluZGV4ICsgcHJlZml4Lmxlbmd0aCAtIGxpbmVzW3N0YXJ0SW5kZXhdLmluZGV4LFxuXHRcdFx0fSxcblx0XHRcdHJhbmdlRW5kOiB7XG5cdFx0XHRcdGxpbmU6IGVuZEluZGV4LFxuXHRcdFx0XHRjaDpcblx0XHRcdFx0XHRtYXRjaEluZGV4ICtcblx0XHRcdFx0XHRwcmVmaXgubGVuZ3RoICtcblx0XHRcdFx0XHRzZWFyY2hUZXJtLmxlbmd0aCAtXG5cdFx0XHRcdFx0bGluZXNbZW5kSW5kZXhdLmluZGV4LFxuXHRcdFx0fSxcblx0XHRcdGxpbmVzLFxuXHRcdH07XG5cdH1cblx0cmV0dXJuIG51bGw7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBsaXN0SXRlbUxlbmd0aChsaW5lOiBzdHJpbmcpIHtcblx0Ly8gTWF0Y2hlcyBsaW5lcyB0aGF0IHN0YXJ0IHdpdGggYSBidWxsZXQgKGVpdGhlciAtLCAqLCBvciArIGZvbGxvd2VkIGJ5IGEgc3BhY2UpXG5cdGNvbnN0IGJ1bGxldFJlZ2V4ID0gL14oXFxzKlstKitdXFxzKykvO1xuXG5cdC8vIE1hdGNoZXMgbGluZXMgdGhhdCBzdGFydCB3aXRoIGEgbnVtYmVyIGZvbGxvd2VkIGJ5IGEgZG90IGFuZCBhIHNwYWNlIChsaWtlIFwiMS4gXCIpXG5cdGNvbnN0IG51bWJlclJlZ2V4ID0gL14oXFxzKlxcZCtcXC5cXHMrKS87XG5cblx0bGV0IG1hdGNoID0gbGluZS5tYXRjaChidWxsZXRSZWdleCkgfHwgbGluZS5tYXRjaChudW1iZXJSZWdleCk7XG5cdHJldHVybiBtYXRjaCA/IG1hdGNoWzBdLmxlbmd0aCA6IDA7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBjaGVja0N1cnNvclBvc2l0aW9uQXREYXRhc3RyaW5nKGV2dDogRXZlbnQpOiB7XG5cdG1hdGNoZWQ6IGJvb2xlYW47XG5cdHNwYW46IEhUTUxTcGFuRWxlbWVudCB8IHVuZGVmaW5lZDtcbn0ge1xuXHRjb25zdCBhY3RpdmVWaWV3ID0gdGhpcy5hcHAud29ya3NwYWNlLmdldEFjdGl2ZVZpZXdPZlR5cGUoTWFya2Rvd25WaWV3KTtcblx0Y29uc3QgY3Vyc29yRnJvbSA9IGFjdGl2ZVZpZXc/LmVkaXRvci5nZXRDdXJzb3IoXCJmcm9tXCIpO1xuXHRjb25zdCBjdXJzb3JUbyA9IGFjdGl2ZVZpZXc/LmVkaXRvci5nZXRDdXJzb3IoXCJ0b1wiKTtcblxuXHRsZXQgbWF0Y2hlZCA9IGZhbHNlO1xuXHRsZXQgbWF0Y2hTcGFuOiBIVE1MU3BhbkVsZW1lbnQgfCB1bmRlZmluZWQgPSB1bmRlZmluZWQ7XG5cdGlmIChcblx0XHRjdXJzb3JGcm9tICYmXG5cdFx0Y3Vyc29yVG8gJiZcblx0XHRjdXJzb3JGcm9tLmNoID09IGN1cnNvclRvLmNoICYmXG5cdFx0Y3Vyc29yRnJvbS5saW5lID09IGN1cnNvclRvLmxpbmVcblx0XHQvLyAmJmN1cnNvckZyb20uY2ggLSAxID49IC0xXG5cdCkge1xuXHRcdGNvbnN0IGxpbmVUZXh0ID0gYWN0aXZlVmlldz8uZWRpdG9yLmdldExpbmUoY3Vyc29yRnJvbS5saW5lKTtcblxuXHRcdC8vIGZyb20gcG9zc2libGUgcmVnZXggbWF0Y2hlcyBpbiBsaW5lVGV4dFxuXHRcdGlmIChsaW5lVGV4dCkge1xuXHRcdFx0Y29uc3QgbWF0Y2hlcyA9IFsuLi5saW5lVGV4dC5tYXRjaEFsbChSRUZFUkVOQ0VfUkVHRVgpXTtcblx0XHRcdG1hdGNoZXMuZm9yRWFjaCgobWF0Y2gpID0+IHtcblx0XHRcdFx0aWYgKG1hdGNoLmluZGV4Py50b1N0cmluZygpKSB7XG5cdFx0XHRcdFx0Y29uc3Qgc3RhcnQ6IG51bWJlciA9IG1hdGNoLmluZGV4O1xuXHRcdFx0XHRcdGNvbnN0IGVuZDogbnVtYmVyID0gc3RhcnQgKyBtYXRjaFswXS5sZW5ndGg7XG5cdFx0XHRcdFx0aWYgKGVuZCA9PSBjdXJzb3JUby5jaCAmJiBldnQudGFyZ2V0KSB7XG5cdFx0XHRcdFx0XHRjb25zdCBkYXRhU3RyaW5nID0gbWF0Y2hbMV07XG5cdFx0XHRcdFx0XHQvLyBnZXQgdGhlIGh0bWwgZWxlbWVudCBhdCB0aGUgbWF0Y2ggbG9jYXRpb25cblx0XHRcdFx0XHRcdGxldCBjaGVja0NvbnRhaW5lciA9IGV2dC50YXJnZXQgaW5zdGFuY2VvZiBFbGVtZW50O1xuXHRcdFx0XHRcdFx0aWYgKCFjaGVja0NvbnRhaW5lcilcblx0XHRcdFx0XHRcdFx0dGhyb3cgbmV3IEVycm9yKFwiRWxlbWVudCBub3QgaW5zdGFuY2Ugb2YgRWxlbWVudFwiKTtcblx0XHRcdFx0XHRcdGxldCBjb250YWluZXIgPSBldnQudGFyZ2V0IGFzIEVsZW1lbnQ7XG5cblx0XHRcdFx0XHRcdGxldCBhY3RpdmVMaW5lO1xuXHRcdFx0XHRcdFx0aWYgKGNvbnRhaW5lci5jbGFzc0xpc3QuY29udGFpbnMoXCJjbS1hY3RpdmVcIikpIHtcblx0XHRcdFx0XHRcdFx0YWN0aXZlTGluZSA9IGNvbnRhaW5lcjtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdC8vIGVsc2UgaWYgKGNvbnRhaW5lci5jbG9zZXN0KFwiLmNtLWFjdGl2ZVwiKSkge1xuXHRcdFx0XHRcdFx0Ly8gXHRhY3RpdmVMaW5lID0gY29udGFpbmVyLmNsb3Nlc3QoXCIuY20tYWN0aXZlXCIpO1xuXHRcdFx0XHRcdFx0Ly8gfVxuXHRcdFx0XHRcdFx0ZWxzZSB7XG5cdFx0XHRcdFx0XHRcdGFjdGl2ZUxpbmUgPSBjb250YWluZXIucXVlcnlTZWxlY3RvcihcIi5jbS1hY3RpdmVcIik7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRpZiAoIWFjdGl2ZUxpbmUpIHRocm93IG5ldyBFcnJvcihcIkVsZW1lbnQgbm90IGluc3RhbmNlIG9mIEVsZW1lbnRcIik7XG5cdFx0XHRcdFx0XHQvLyBmaW5kIGh0bWwgc3BhbiBlbGVtZW50IGluIHRhcmdldCB0aGF0IGhhcyBhIGRhdGEgYXR0cmlidXRlIGVxdWFsIHRvIGNvbnRlbnRzXG5cdFx0XHRcdFx0XHRsZXQgc3BhbiA9IGFjdGl2ZUxpbmUucXVlcnlTZWxlY3Rvcihgc3BhbltkYXRhPVwiJHtkYXRhU3RyaW5nfVwiXWApO1xuXHRcdFx0XHRcdFx0aWYgKHNwYW4gJiYgc3BhbiBpbnN0YW5jZW9mIEhUTUxTcGFuRWxlbWVudCkge1xuXHRcdFx0XHRcdFx0XHQvLyBjb25zb2xlLmxvZyhcIkZvdW5kIHNwYW4gZWxlbWVudDpcIiwgc3Bhbik7XG5cdFx0XHRcdFx0XHRcdC8vIERvIHNvbWV0aGluZyB3aXRoIHRoZSBzcGFuIGVsZW1lbnRcblx0XHRcdFx0XHRcdFx0bWF0Y2hlZCA9IHRydWU7XG5cblx0XHRcdFx0XHRcdFx0bWF0Y2hTcGFuID0gc3Bhbjtcblx0XHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRcdC8vIGNvbnNvbGUubG9nKFwiU3BhbiBlbGVtZW50IG5vdCBmb3VuZFwiKTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH0pO1xuXHRcdH1cblx0fVxuXHRyZXR1cm4geyBtYXRjaGVkLCBzcGFuOiBtYXRjaFNwYW4gfTtcbn1cblxuLy8gUmVtb3ZlIGFuIGV4aXN0aW5nIGhpZ2xpZ2h0ZWQgcmVmZXJlbmNlXG5leHBvcnQgZnVuY3Rpb24gaGFuZGxlUmVtb3ZlSG92ZXJlZEN1cnNvcih1c2VyOiBzdHJpbmcpIHtcblx0aWYgKGdldEhvdmVyZWRDdXJzb3IoKSkge1xuXHRcdC8vIGN1cnNvcnMgbm90IGFzc29jaWF0ZWQgd2l0aCB0aGUgdXNlciBhY3Rpb25cblx0XHRsZXQgbm9uQ3Vyc29ycyA9IGdldEhvdmVyZWRDdXJzb3IoKVxuXHRcdFx0LmZpbHRlcigoZWxlbWVudDogYW55KSA9PiB7XG5cdFx0XHRcdHJldHVybiBlbGVtZW50LnVzZXIgIT09IHVzZXI7XG5cdFx0XHR9KVxuXHRcdFx0Lm1hcCgoZWxlbWVudDogYW55KSA9PiBlbGVtZW50LmN1cnNvci5jbG9zZXN0KFwic3BhblwiKSk7XG5cblx0XHQvLyB3aGl0ZSBiYWNrZ3JvdW5kIGlmIGN1cnNvcnMgYXJlIG5vdCBhc3NvY2lhdGVkIHdpdGggdGhlIHVzZXIgYWN0aW9uXG5cdFx0Z2V0SG92ZXJlZEN1cnNvcigpXG5cdFx0XHQuZmlsdGVyKChlbGVtZW50OiBhbnkpID0+IGVsZW1lbnQudXNlciA9PT0gdXNlcilcblx0XHRcdC5mb3JFYWNoKChlbGVtZW50OiBhbnkpID0+IHtcblx0XHRcdFx0aWYgKCFub25DdXJzb3JzLmluY2x1ZGVzKGVsZW1lbnQuY3Vyc29yLmNsb3Nlc3QoXCJzcGFuXCIpKSkge1xuXHRcdFx0XHRcdGxldCBzdmcgPSBlbGVtZW50LmN1cnNvcjtcblx0XHRcdFx0XHRpZiAoIXN2ZykgdGhyb3cgbmV3IEVycm9yKFwiU1ZHIG5vdCBmb3VuZFwiKTtcblx0XHRcdFx0XHRpZiAoc3ZnLmNsYXNzTGlzdC5jb250YWlucyhcInJlZmVyZW5jZS1pY29uXCIpKVxuXHRcdFx0XHRcdFx0c3ZnLnN0eWxlLmJhY2tncm91bmRDb2xvciA9IFwid2hpdGVcIjtcblx0XHRcdFx0XHRlbHNlIHtcblx0XHRcdFx0XHRcdHN2Zy5zZXRBdHRyaWJ1dGUoXCJmaWxsXCIsIFwid2hpdGVcIik7XG5cdFx0XHRcdFx0XHRzdmcuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gXCJcIjtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0ZWxlbWVudC5jdXJzb3Iuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gXCJ3aGl0ZVwiO1xuXHRcdFx0XHRcdC8vIGVsZW1lbnQuY3Vyc29yLnN0eWxlLmJveFNoYWRvdyA9IFwibm9uZVwiO1xuXHRcdFx0XHR9XG5cdFx0XHR9KTtcblxuXHRcdHJlbW92ZUhvdmVyZWRDdXJzb3IodXNlcik7XG5cdH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGNoZWNrRm9jdXNDdXJzb3IoZXZ0OiBFdmVudCkge1xuXHRsZXQgeyBtYXRjaGVkLCBzcGFuIH0gPSBjaGVja0N1cnNvclBvc2l0aW9uQXREYXRhc3RyaW5nKGV2dCk7XG5cblx0Y29uc29sZS5sb2coc3Bhbik7XG5cblx0aWYgKG1hdGNoZWQgJiYgc3Bhbikge1xuXHRcdHVwZGF0ZUhvdmVyZWRDdXJzb3JDb2xvcihzcGFuLCBBQ1RJT05fVFlQRS5DVVJTT1IpO1xuXHRcdGVuZFJlZmVyZW5jZUN1cnNvckVmZmVjdCgpOyAvLyB0aGlzIHRha2VzIDEwMG1zIHRvIGNsb3NlIGV4aXN0aW5nIHBlZWsgdGFiXG5cdFx0c3RhcnRSZWZlcmVuY2VFZmZlY3Qoc3BhbiwgQUNUSU9OX1RZUEUuQ1VSU09SKTtcblx0fSBlbHNlIHtcblx0XHRlbmRSZWZlcmVuY2VDdXJzb3JFZmZlY3QoKTtcblx0XHRoYW5kbGVSZW1vdmVIb3ZlcmVkQ3Vyc29yKEFDVElPTl9UWVBFLkNVUlNPUik7XG5cdH1cbn1cbiIsICJleHBvcnQgbGV0IFJFRkVSRU5DRV9SRUdFWCA9IC9cXFtcXHUyMTk3XFxdXFwodXJuOihbXildKilcXCkvZztcblxuZXhwb3J0IGxldCBBQ1RJT05fVFlQRSA9IHtcblx0TU9VU0U6IFwibW91c2VcIixcblx0Q1VSU09SOiBcImN1cnNvclwiLFxuXHRCQUNLTElOSzogXCJiYWNrbGlua1wiLFxufTtcblxuZXhwb3J0IGxldCBTVkdfSE9WRVJfQ09MT1IgPSBcInJnYigxODcsIDIxNSwgMjMwKVwiO1xuZXhwb3J0IGxldCBTVkdfSE9WRVJfQ09MT1JfTElHSFQgPSBcInJnYigxODcsIDIxNSwgMjMwLCAwLjUpXCI7XG5leHBvcnQgbGV0IFNWR19DT0xPUiA9IFwicmdiKDIxNSwgMjM1LCAwKVwiO1xuXG5leHBvcnQgY29uc3QgUkVGRVJFTkNFX0lDT05fSEVJR0hUID0gMjA7XG5cbmV4cG9ydCBjb25zdCBQT1JUQUxfVEVYVF9TTElDRV9TSVpFID0gMTAwO1xuIiwgImltcG9ydCB7XG5cdFRBYnN0cmFjdEZpbGUsXG5cdFRGaWxlLFxuXHRXb3Jrc3BhY2UsXG5cdFdvcmtzcGFjZUxlYWYsXG5cdFdvcmtzcGFjZVJvb3QsXG5cdFdvcmtzcGFjZVNwbGl0LFxuXHRXb3Jrc3BhY2VUYWJzLFxufSBmcm9tIFwib2JzaWRpYW5cIjtcbmltcG9ydCB7IGdldFRoYXQgfSBmcm9tIFwiLi9zdGF0ZVwiO1xuXG5mdW5jdGlvbiBjb2xsZWN0TGVhdmVzQnlUYWIoXG5cdHNwbGl0OiBXb3Jrc3BhY2VTcGxpdCxcblx0cmVzdWx0OiBbV29ya3NwYWNlTGVhZltdXSB8IFtdID0gW11cbikge1xuXHQvLyBAdHMtaWdub3JlXG5cdGNvbnN0IHR5cGUgPSBzcGxpdC50eXBlO1xuXHRpZiAoIXR5cGUpIHRocm93IG5ldyBFcnJvcihcIlNwbGl0IHR5cGUgbm90IGZvdW5kXCIpO1xuXG5cdGlmICh0eXBlID09IFwidGFic1wiIHx8IHR5cGUgPT0gXCJzcGxpdFwiKSB7XG5cdFx0Ly8gQHRzLWlnbm9yZVxuXHRcdGNvbnN0IGNoaWxkcmVuID0gc3BsaXQuY2hpbGRyZW47XG5cdFx0aWYgKCFjaGlsZHJlbikgdGhyb3cgbmV3IEVycm9yKFwiU3BsaXQgY2hpbGRyZW4gbm90IGZvdW5kXCIpO1xuXG5cdFx0aWYgKGNoaWxkcmVuKSB7XG5cdFx0XHRmb3IgKGNvbnN0IGNoaWxkIG9mIGNoaWxkcmVuKSB7XG5cdFx0XHRcdGxldCBlbXB0eUxpc3Q6IFdvcmtzcGFjZUxlYWZbXSA9IFtdO1xuXG5cdFx0XHRcdGNvbGxlY3RMZWF2ZXNCeVRhYihjaGlsZCwgcmVzdWx0KTtcblx0XHRcdH1cblx0XHR9XG5cdFx0Ly8gcmVzdWx0LnB1c2goW10pO1xuXHRcdC8vIGNvbGxlY3RMZWF2ZXNCeVRhYihjaGlsZHJlbiwgcmVzdWx0KTtcblx0fSBlbHNlIGlmICh0eXBlID09IFwibGVhZlwiKSB7XG5cdFx0Ly8gQHRzLWlnbm9yZVxuXHRcdGNvbnN0IHBhcmVudFNwbGl0SWQgPSBzcGxpdC5wYXJlbnQuaWQ7XG5cdFx0aWYgKCFwYXJlbnRTcGxpdElkKSB0aHJvdyBuZXcgRXJyb3IoXCJTcGxpdCBwYXJlbnQgaWQgbm90IGZvdW5kXCIpO1xuXG5cdFx0Ly8gZmluZCBhcnJheSBpbmRleCBmb3Igc3BsaXQgd2l0aCBpZCBwYXJlbnRTcGxpdElkXG5cdFx0bGV0IGlkeCA9IHJlc3VsdC5maW5kSW5kZXgoKHRhYjogV29ya3NwYWNlTGVhZltdKSA9PiB7XG5cdFx0XHQvLyBAdHMtaWdub3JlXG5cdFx0XHRjb25zdCB0YWJJZCA9IHRhYlswXS5wYXJlbnQuaWQ7XG5cdFx0XHRyZXR1cm4gdGFiSWQgPT0gcGFyZW50U3BsaXRJZDtcblx0XHR9KTtcblx0XHRpZiAoaWR4ID09IC0xKSB7XG5cdFx0XHQvLyBAdHMtaWdub3JlXG5cdFx0XHRyZXN1bHQucHVzaChbc3BsaXQgYXMgV29ya3NwYWNlTGVhZl0pO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHRyZXN1bHRbaWR4XS5wdXNoKHNwbGl0IGFzIFdvcmtzcGFjZUxlYWYpO1xuXHRcdH1cblx0fVxuXG5cdC8vIGlmIChjaGlsZHJlbikge1xuXHQvLyBcdGZvciAoY29uc3QgY2hpbGQgb2YgY2hpbGRyZW4pIHtcblx0Ly8gXHRcdGNvbGxlY3RMZWF2ZXNCeVRhYihjaGlsZCwgcmVzdWx0KTtcblx0Ly8gXHR9XG5cdC8vIH1cblx0cmV0dXJuIHJlc3VsdDtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGNvbGxlY3RMZWF2ZXNCeVRhYkhlbHBlcigpIHtcblx0Y29uc3QgeyB3b3Jrc3BhY2UgfSA9IGdldFRoYXQoKTtcblx0Y29uc3QgY3VyckxlYWY6IFdvcmtzcGFjZUxlYWYgPSB3b3Jrc3BhY2UuZ2V0TGVhZigpO1xuXHQvLyBjb25zdCByb290U3BsaXQgPSBmaW5kUm9vdFNwbGl0KGN1cnJMZWFmKTtcblx0Y29uc3Qgcm9vdFNwbGl0OiBXb3Jrc3BhY2VTcGxpdCA9IGN1cnJMZWFmLmdldFJvb3QoKTtcblx0cmV0dXJuIGNvbGxlY3RMZWF2ZXNCeVRhYihyb290U3BsaXQpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZ2V0Q3VycmVudFRhYkluZGV4KGxlYXZlc0J5VGFiOiBhbnlbXSwgc3BhbjogSFRNTFNwYW5FbGVtZW50KSB7XG5cdGxldCB3b3Jrc3BhY2VUYWIgPSBzcGFuLmNsb3Nlc3QoXCIud29ya3NwYWNlLXRhYnNcIik7XG5cdGxldCBjdXJyVGFiSWR4ID0gbGVhdmVzQnlUYWIuZmluZEluZGV4KCh0YWI6IFdvcmtzcGFjZUxlYWZbXSkgPT4ge1xuXHRcdGNvbnN0IGxlYWZUYWIgPSB0YWJbMF0udmlldy5jb250YWluZXJFbC5jbG9zZXN0KFwiLndvcmtzcGFjZS10YWJzXCIpO1xuXHRcdHJldHVybiBsZWFmVGFiID09IHdvcmtzcGFjZVRhYjtcblx0fSk7XG5cdHJldHVybiBjdXJyVGFiSWR4O1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZ2V0QWRqYWNlbnRUYWJzKFxuXHRsZWF2ZXNCeVRhYjogYW55W10sXG5cdGN1cnJUYWJJZHg6IG51bWJlcixcblx0ZmlsZTogc3RyaW5nXG4pIHtcblx0bGV0IHJpZ2h0QWRqYWNlbnRUYWI6IGFueVtdID0gW107XG5cdGxldCBsZWZ0QWRqYWNlbnRUYWI6IGFueVtdID0gW107XG5cdGxldCBhZGphY2VudFRhYnM6IGFueVtdID0gW107XG5cblx0aWYgKGxlYXZlc0J5VGFiW2N1cnJUYWJJZHggKyAxXSkge1xuXHRcdHJpZ2h0QWRqYWNlbnRUYWIgPSBsZWF2ZXNCeVRhYltjdXJyVGFiSWR4ICsgMV07XG5cdFx0YWRqYWNlbnRUYWJzID0gWy4uLmFkamFjZW50VGFicywgLi4ucmlnaHRBZGphY2VudFRhYl07XG5cdH1cblx0aWYgKGxlYXZlc0J5VGFiW2N1cnJUYWJJZHggLSAxXSkge1xuXHRcdGxlZnRBZGphY2VudFRhYiA9IGxlYXZlc0J5VGFiW2N1cnJUYWJJZHggLSAxXTtcblx0XHRhZGphY2VudFRhYnMgPSBbLi4uYWRqYWNlbnRUYWJzLCAuLi5sZWZ0QWRqYWNlbnRUYWJdO1xuXHR9XG5cblx0bGV0IGluZGV4ID0gYWRqYWNlbnRUYWJzLmZpbmRJbmRleChcblx0XHQoeDogV29ya3NwYWNlTGVhZikgPT4geC5nZXRWaWV3U3RhdGUoKS5zdGF0ZS5maWxlID09IGZpbGVcblx0KTtcblx0cmV0dXJuIHsgYWRqYWNlbnRUYWJzLCByaWdodEFkamFjZW50VGFiLCBsZWZ0QWRqYWNlbnRUYWIsIGluZGV4IH07XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBvcGVuRmlsZUluQWRqYWNlbnRUYWIoXG5cdGxlYXZlc0J5VGFiOiBhbnlbXSxcblx0Y3VyclRhYklkeDogbnVtYmVyLFxuXHRmaWxlOiBzdHJpbmcsXG5cdHR5cGU/OiBzdHJpbmdcbikge1xuXHRsZXQgeyBhZGphY2VudFRhYnMsIHJpZ2h0QWRqYWNlbnRUYWIsIGxlZnRBZGphY2VudFRhYiB9ID0gZ2V0QWRqYWNlbnRUYWJzKFxuXHRcdGxlYXZlc0J5VGFiLFxuXHRcdGN1cnJUYWJJZHgsXG5cdFx0ZmlsZVxuXHQpO1xuXG5cdGxldCBhbGxUYWJOYW1lcyA9IGxlYXZlc0J5VGFiLm1hcCgodGFiOiBXb3Jrc3BhY2VMZWFmW10pID0+XG5cdFx0dGFiLm1hcCgoeDogV29ya3NwYWNlTGVhZikgPT4geC5nZXRWaWV3U3RhdGUoKS5zdGF0ZS5maWxlKVxuXHQpO1xuXHRsZXQgcmlnaHRBZGphY2VudFRhYk5hbWVzID0gcmlnaHRBZGphY2VudFRhYi5tYXAoXG5cdFx0KHg6IFdvcmtzcGFjZUxlYWYpID0+IHguZ2V0Vmlld1N0YXRlKCkuc3RhdGUuZmlsZVxuXHQpO1xuXHRsZXQgbGVmdEFkamFjZW50VGFiTmFtZXMgPSBsZWZ0QWRqYWNlbnRUYWIubWFwKFxuXHRcdCh4OiBXb3Jrc3BhY2VMZWFmKSA9PiB4LmdldFZpZXdTdGF0ZSgpLnN0YXRlLmZpbGVcblx0KTtcblx0Y29uc3QgeyB3b3Jrc3BhY2UgfSA9IGdldFRoYXQoKTtcblx0aWYgKFxuXHRcdGFsbFRhYk5hbWVzXG5cdFx0XHQuZmlsdGVyKCh2LCBpKSA9PiBpICE9IGN1cnJUYWJJZHgpXG5cdFx0XHQuZmxhdCgpXG5cdFx0XHQuaW5jbHVkZXMoZmlsZSkgJiZcblx0XHQhcmlnaHRBZGphY2VudFRhYk5hbWVzLmluY2x1ZGVzKGZpbGUpICYmXG5cdFx0IWxlZnRBZGphY2VudFRhYk5hbWVzLmluY2x1ZGVzKGZpbGUpXG5cdCkge1xuXHRcdC8vIGZpbGUgZXhpc3RzLCBub3QgYWRqYWNlbnQgbGVmdCBvciByaWdodCB0YWJcblx0XHRsZXQgY3VycmVudFRhYk5hbWVzOiBhbnlbXSA9IFtdO1xuXHRcdGxldCBjdXJyZW50VGFiOiBhbnlbXSA9IFtdO1xuXHRcdGFsbFRhYk5hbWVzLmZvckVhY2goKHRhYk5hbWVzLCBpKSA9PiB7XG5cdFx0XHRpZiAoXG5cdFx0XHRcdHRhYk5hbWVzICE9IHJpZ2h0QWRqYWNlbnRUYWJOYW1lcyAmJlxuXHRcdFx0XHR0YWJOYW1lcyAhPSBsZWZ0QWRqYWNlbnRUYWJOYW1lcyAmJlxuXHRcdFx0XHRjdXJyVGFiSWR4ICE9IGlcblx0XHRcdCkge1xuXHRcdFx0XHRpZiAodGFiTmFtZXMuaW5jbHVkZXMoZmlsZSkpIHtcblx0XHRcdFx0XHRjdXJyZW50VGFiTmFtZXMgPSB0YWJOYW1lcztcblx0XHRcdFx0XHRjdXJyZW50VGFiID0gbGVhdmVzQnlUYWJbaV07XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9KTtcblxuXHRcdGNvbnN0IG9yaWdpbmFsTGVhZiA9IGN1cnJlbnRUYWIuZmlsdGVyKFxuXHRcdFx0KHQpID0+IHQuY29udGFpbmVyRWwuc3R5bGUuZGlzcGxheSAhPSBcIm5vbmVcIlxuXHRcdClbMF07XG5cdFx0bGV0IGxlYWYgPSBjdXJyZW50VGFiW2N1cnJlbnRUYWJOYW1lcy5pbmRleE9mKGZpbGUpXTtcblx0XHR3b3Jrc3BhY2UucmV2ZWFsTGVhZihsZWFmKTtcblxuXHRcdHJldHVybiB7IG5ld0xlYWY6IGxlYWYsIHRlbXA6IGZhbHNlLCBvcmlnaW5hbExlYWYgfTtcblx0fSBlbHNlIGlmIChyaWdodEFkamFjZW50VGFiTmFtZXMuaW5jbHVkZXMoZmlsZSkpIHtcblx0XHQvLyBmaWxlIGV4aXN0cyBpbiByaWdodCB0YWJcblx0XHRjb25zdCBvcmlnaW5hbExlYWYgPSByaWdodEFkamFjZW50VGFiLmZpbHRlcihcblx0XHRcdCh0KSA9PiB0LmNvbnRhaW5lckVsLnN0eWxlLmRpc3BsYXkgIT0gXCJub25lXCJcblx0XHQpWzBdO1xuXHRcdGxldCBsZWFmID0gcmlnaHRBZGphY2VudFRhYltyaWdodEFkamFjZW50VGFiTmFtZXMuaW5kZXhPZihmaWxlKV07XG5cdFx0d29ya3NwYWNlLnJldmVhbExlYWYobGVhZik7XG5cdFx0cmV0dXJuIHsgbmV3TGVhZjogbGVhZiwgdGVtcDogZmFsc2UsIG9yaWdpbmFsTGVhZiB9O1xuXHR9IGVsc2UgaWYgKGxlZnRBZGphY2VudFRhYk5hbWVzLmluY2x1ZGVzKGZpbGUpKSB7XG5cdFx0Ly8gZmlsZSBleGlzdHMgaW4gbGVmdCB0YWJcblx0XHRjb25zdCBvcmlnaW5hbExlYWYgPSBsZWZ0QWRqYWNlbnRUYWIuZmlsdGVyKFxuXHRcdFx0KHQpID0+IHQuY29udGFpbmVyRWwuc3R5bGUuZGlzcGxheSAhPSBcIm5vbmVcIlxuXHRcdClbMF07XG5cblx0XHRsZXQgbGVhZiA9IGxlZnRBZGphY2VudFRhYltsZWZ0QWRqYWNlbnRUYWJOYW1lcy5pbmRleE9mKGZpbGUpXTtcblx0XHR3b3Jrc3BhY2UucmV2ZWFsTGVhZihsZWFmKTtcblx0XHRyZXR1cm4geyBuZXdMZWFmOiBsZWFmLCB0ZW1wOiBmYWxzZSwgb3JpZ2luYWxMZWFmIH07XG5cdH0gZWxzZSBpZiAocmlnaHRBZGphY2VudFRhYi5sZW5ndGggPiAwKSB7XG5cdFx0Ly8gdGhlcmUgZXhpc3RzIGEgcmlnaHQgdGFiXG5cdFx0Y29uc3Qgb3JpZ2luYWxMZWFmID0gcmlnaHRBZGphY2VudFRhYi5maWx0ZXIoXG5cdFx0XHQodCkgPT4gdC5jb250YWluZXJFbC5zdHlsZS5kaXNwbGF5ICE9IFwibm9uZVwiXG5cdFx0KVswXTtcblxuXHRcdGxldCBjdXJyTGVhZiA9IHdvcmtzcGFjZS5nZXRMZWFmKCk7XG5cdFx0d29ya3NwYWNlLnNldEFjdGl2ZUxlYWYob3JpZ2luYWxMZWFmKTtcblx0XHRsZXQgbmV3TGVhZiA9IHdvcmtzcGFjZS5nZXRMZWFmKHRydWUpO1xuXHRcdGF3YWl0IG9wZW5GaWxlSW5MZWFmKG5ld0xlYWYsIGZpbGUpO1xuXHRcdHdvcmtzcGFjZS5yZXZlYWxMZWFmKG5ld0xlYWYpO1xuXHRcdHdvcmtzcGFjZS5zZXRBY3RpdmVMZWFmKGN1cnJMZWFmKTtcblx0XHRyZXR1cm4geyBuZXdMZWFmLCB0ZW1wOiB0cnVlLCBvcmlnaW5hbExlYWYgfTtcblx0fSBlbHNlIGlmIChsZWZ0QWRqYWNlbnRUYWIubGVuZ3RoID4gMCkge1xuXHRcdC8vIHRoZXJlIGV4aXN0cyBhIGxlZnQgdGFiXG5cdFx0Y29uc3Qgb3JpZ2luYWxMZWFmID0gbGVmdEFkamFjZW50VGFiLmZpbHRlcihcblx0XHRcdCh0KSA9PiB0LmNvbnRhaW5lckVsLnN0eWxlLmRpc3BsYXkgIT0gXCJub25lXCJcblx0XHQpWzBdO1xuXG5cdFx0bGV0IGN1cnJMZWFmID0gd29ya3NwYWNlLmdldExlYWYoKTsgLy8gZ2V0IGN1cnJlbnQgYWN0aXZlIGxlYWZcblx0XHR3b3Jrc3BhY2Uuc2V0QWN0aXZlTGVhZihvcmlnaW5hbExlYWYpOyAvLyBnZXQgdGhlIGxlYWYgaW4gYWRqYWNlbnQgdGFiXG5cdFx0bGV0IG5ld0xlYWYgPSB3b3Jrc3BhY2UuZ2V0TGVhZih0cnVlKTsgLy8gY3JlYXRlIGEgbmV3IGxlYWZcblx0XHRhd2FpdCBvcGVuRmlsZUluTGVhZihuZXdMZWFmLCBmaWxlKTsgLy8gbG9hZCBmaWxlIGludG8gbmV3IGxlYWZcblx0XHR3b3Jrc3BhY2UucmV2ZWFsTGVhZihuZXdMZWFmKTsgLy8gcmV2ZWFsIG5ldyBsZWFmXG5cdFx0d29ya3NwYWNlLnNldEFjdGl2ZUxlYWYoY3VyckxlYWYpOyAvLyBzZXQgYWN0aXZlIGxlYWYgYmFjayB0byBvcmlnaW5hbFxuXHRcdHJldHVybiB7IG5ld0xlYWYsIHRlbXA6IHRydWUsIG9yaWdpbmFsTGVhZiB9O1xuXHR9IGVsc2Uge1xuXHRcdC8vIG5vIGFkamFjZW50IHRhYnNcblx0XHRjb25zdCBjdXJyTGVhZiA9IHdvcmtzcGFjZS5nZXRMZWFmKCk7XG5cdFx0bGV0IG5ld0xlYWYgPSB3b3Jrc3BhY2UuY3JlYXRlTGVhZkJ5U3BsaXQoY3VyckxlYWYpO1xuXHRcdGF3YWl0IG9wZW5GaWxlSW5MZWFmKG5ld0xlYWYsIGZpbGUpO1xuXHRcdHJldHVybiB7IG5ld0xlYWYsIHRlbXA6IHRydWUgfTtcblx0fVxufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gb3BlbkZpbGVJbkxlYWYobGVhZjogV29ya3NwYWNlTGVhZiwgZmlsZTogc3RyaW5nKSB7XG5cdGxldCB0YXJnZXRGaWxlOiBUQWJzdHJhY3RGaWxlIHwgbnVsbCA9XG5cdFx0Z2V0VGhhdCgpLnZhdWx0LmdldEFic3RyYWN0RmlsZUJ5UGF0aChmaWxlKTtcblx0aWYgKHRhcmdldEZpbGUgJiYgdGFyZ2V0RmlsZSBpbnN0YW5jZW9mIFRGaWxlKVxuXHRcdGF3YWl0IGxlYWYub3BlbkZpbGUodGFyZ2V0RmlsZSwgeyBhY3RpdmU6IGZhbHNlIH0pO1xufVxuIiwgImltcG9ydCB7XG5cdHN0YXRlLFxuXHR1cGRhdGVDdXJzb3IsXG5cdHVwZGF0ZUhvdmVyLFxuXHRnZXRDdXJzb3IsXG5cdGdldEhvdmVyLFxuXHRyZXNldEhvdmVyLFxuXHRyZXNldEN1cnNvcixcblx0Z2V0VGhhdCxcblx0Z2V0QmFja2xpbmtIb3Zlcixcblx0dXBkYXRlQmFja2xpbmtIb3Zlcixcblx0cmVzZXRCYWNrbGlua0hvdmVyLFxuXHR1cGRhdGVIb3ZlcmVkQ3Vyc29yLFxufSBmcm9tIFwiLi9zdGF0ZVwiO1xuaW1wb3J0IHsgQUNUSU9OX1RZUEUsIFJFRkVSRU5DRV9SRUdFWCwgU1ZHX0hPVkVSX0NPTE9SIH0gZnJvbSBcIi4vY29uc3RhbnRzXCI7XG5pbXBvcnQge1xuXHRjb2xsZWN0TGVhdmVzQnlUYWJIZWxwZXIsXG5cdGdldEN1cnJlbnRUYWJJbmRleCxcblx0b3BlbkZpbGVJbkFkamFjZW50VGFiLFxufSBmcm9tIFwiLi93b3Jrc3BhY2VcIjtcbmltcG9ydCB7XG5cdHByb2Nlc3NVUkksXG5cdGRlY29kZVVSSUNvbXBvbmVudFN0cmluZyxcblx0ZmluZFRleHRQb3NpdGlvbnMsXG5cdGxpc3RJdGVtTGVuZ3RoLFxuXHRoYW5kbGVSZW1vdmVIb3ZlcmVkQ3Vyc29yLFxufSBmcm9tIFwiLi91dGlsc1wiO1xuaW1wb3J0IHtcblx0RWRpdG9yLFxuXHRNYXJrZG93bkVkaXRWaWV3LFxuXHRNYXJrZG93blZpZXcsXG5cdFdvcmtzcGFjZUl0ZW0sXG5cdFdvcmtzcGFjZUxlYWYsXG59IGZyb20gXCJvYnNpZGlhblwiO1xuaW1wb3J0IHsgaGlnaGxpZ2h0U2VsZWN0aW9uLCByZW1vdmVIaWdobGlnaHRzIH0gZnJvbSBcIi4vbWFya1wiO1xuaW1wb3J0IHsgRWRpdG9yVmlldyB9IGZyb20gXCJAY29kZW1pcnJvci92aWV3XCI7XG5pbXBvcnQge1xuXHRnZXRCYWNrbGlua0NvbnRhaW5lcixcblx0Z2V0Q29udGFpbmVyRWxlbWVudCxcblx0Z2V0TGVhZkJCb3hFbGVtZW50cyxcblx0Z2V0TWFya2Rvd25WaWV3LFxuXHR1cGRhdGVCYWNrbGlua01hcmtQb3NpdGlvbixcblx0dXBkYXRlQmFja2xpbmtNYXJrUG9zaXRpb25zLFxufSBmcm9tIFwiLi9yZWZlcmVuY2VzXCI7XG5cbmZ1bmN0aW9uIGdldEVkaXRvclZpZXcobGVhZjogV29ya3NwYWNlTGVhZikge1xuXHRpZiAoIWxlYWYpIHJldHVybiBudWxsO1xuXHRjb25zdCB2aWV3ID0gbGVhZi52aWV3O1xuXG5cdC8vIEB0cy1pZ25vcmVcblx0Y29uc3QgZWRpdG9yID0gdmlldy5zb3VyY2VNb2RlPy5jbUVkaXRvcjtcblxuXHQvLyAnZWRpdG9yJyBoZXJlIGlzIGFuIGluc3RhbmNlIG9mICdFZGl0b3InLCBhbiBhYnN0cmFjdGlvbiBvdmVyIENNNSBhbmQgQ002LlxuXHQvLyBDaGVja2luZyBmb3IgJ0NvZGVNaXJyb3InIHdvdWxkIGluZGljYXRlIENNNS5cblx0aWYgKCFlZGl0b3IuQ29kZU1pcnJvciAmJiBlZGl0b3IuY20gaW5zdGFuY2VvZiBFZGl0b3JWaWV3KSB7XG5cdFx0Ly8gWW91IG5vdyBoYXZlIGFjY2VzcyB0byB0aGUgQ29kZU1pcnJvciA2IEVkaXRvclZpZXcgaW5zdGFuY2UuXG5cdFx0Y29uc3QgZWRpdG9yVmlldyA9IGVkaXRvci5jbTtcblxuXHRcdHJldHVybiBlZGl0b3JWaWV3O1xuXG5cdFx0Ly8gWW91IGNhbiBub3cgdXNlIHRoZSBDb2RlTWlycm9yIDYgQVBJIHdpdGggYGVkaXRvclZpZXdgLlxuXHR9XG5cdHJldHVybiBudWxsO1xufVxuXG5mdW5jdGlvbiBjaGVja1NwYW5FbGVtZW50RXhpc3RzKFxuXHRzcGFuOiBIVE1MU3BhbkVsZW1lbnQsXG5cdGNvbnRhaW5lckVsOiBIVE1MRWxlbWVudFxuKTogYm9vbGVhbiB7XG5cdGNvbnN0IHNwYW5FbGVtZW50cyA9IGNvbnRhaW5lckVsLmdldEVsZW1lbnRzQnlUYWdOYW1lKFwic3BhblwiKTtcblx0Zm9yIChsZXQgaSA9IDA7IGkgPCBzcGFuRWxlbWVudHMubGVuZ3RoOyBpKyspIHtcblx0XHRpZiAoc3BhbkVsZW1lbnRzW2ldID09PSBzcGFuKSB7XG5cdFx0XHRyZXR1cm4gdHJ1ZTtcblx0XHR9XG5cdH1cblx0cmV0dXJuIGZhbHNlO1xufVxuXG5mdW5jdGlvbiBwYXJzZUNTU1N0cmluZyhjc3M6IHN0cmluZykge1xuXHQvLyBVc2UgYSByZWd1bGFyIGV4cHJlc3Npb24gdG8gbWF0Y2gga2V5LXZhbHVlIHBhaXJzIGluIHRoZSBDU1Mgc3RyaW5nXG5cdGNvbnN0IGNzc1Byb3BlcnRpZXNSZWdleCA9IC8oW1xcdy1dKylcXHMqOlxccyooW147XSspXFxzKjs/L2c7XG5cblx0Ly8gSW5pdGlhbGl6ZSBhbiBlbXB0eSBvYmplY3QgdG8gc3RvcmUgdGhlIENTUyBwcm9wZXJ0aWVzXG5cdGxldCBjc3NQcm9wZXJ0aWVzT2JqZWN0OiBhbnkgPSB7fTtcblxuXHQvLyBJdGVyYXRlIG92ZXIgYWxsIGtleS12YWx1ZSBwYWlycyBmb3VuZCBieSB0aGUgcmVnZXhcblx0bGV0IG1hdGNoO1xuXHR3aGlsZSAoKG1hdGNoID0gY3NzUHJvcGVydGllc1JlZ2V4LmV4ZWMoY3NzKSkgIT09IG51bGwpIHtcblx0XHQvLyBtYXRjaFsxXSBpcyB0aGUga2V5XG5cdFx0Ly8gbWF0Y2hbMl0gaXMgdGhlIHZhbHVlXG5cdFx0Y3NzUHJvcGVydGllc09iamVjdFttYXRjaFsxXV0gPSBtYXRjaFsyXTtcblx0fVxuXG5cdHJldHVybiBjc3NQcm9wZXJ0aWVzT2JqZWN0O1xufVxuXG5mdW5jdGlvbiBkZWxheShtaWxsaXNlY29uZHM6IGFueSkge1xuXHRyZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUpID0+IHtcblx0XHRzZXRUaW1lb3V0KHJlc29sdmUsIG1pbGxpc2Vjb25kcyk7XG5cdH0pO1xufVxuXG5mdW5jdGlvbiB0ZW1wRGlyZWN0aW9uSW5kaWNhdG9yKFxuXHRsZWFmOiBhbnksXG5cdHRleHQ6IHN0cmluZyxcblx0cHJlZml4OiBzdHJpbmcsXG5cdHN1ZmZpeDogc3RyaW5nLFxuXHRkYXRhU3RyaW5nOiBzdHJpbmcsXG5cdGlzU2FtZTogYm9vbGVhbixcblx0dXNlcj86IHN0cmluZ1xuKSB7XG5cdGxldCBwb3NpdGlvbnMgPSBmaW5kVGV4dFBvc2l0aW9ucyhcblx0XHRsZWFmLnZpZXcuZGF0YSxcblx0XHR0ZXh0LFxuXHRcdHByZWZpeC5zbGljZSgwLCBwcmVmaXgubGVuZ3RoIC0gMSksXG5cdFx0c3VmZml4LnNsaWNlKDEsIHN1ZmZpeC5sZW5ndGgpXG5cdCk7XG5cdGlmICghcG9zaXRpb25zKSB0aHJvdyBuZXcgRXJyb3IoXCJQb3NpdGlvbnMgbm90IGZvdW5kXCIpO1xuXHRsZXQgcmFuZ2VTdGFydCA9IHBvc2l0aW9ucy5yYW5nZVN0YXJ0O1xuXHRsZXQgcmFuZ2VFbmQgPSBwb3NpdGlvbnMucmFuZ2VFbmQ7XG5cblx0Y29uc29sZS5sb2codXNlcik7XG5cdGlmICh1c2VyID09PSBBQ1RJT05fVFlQRS5CQUNLTElOSykge1xuXHRcdGxldCBzdGFydFRvcCA9IGxlYWYudmlldy5lZGl0b3IuZ2V0U2Nyb2xsSW5mbygpLnRvcDtcblxuXHRcdGNvbnNvbGUubG9nKHJhbmdlU3RhcnQpO1xuXG5cdFx0bGVhZi52aWV3LmVkaXRvci5zY3JvbGxJbnRvVmlldyhcblx0XHRcdHtcblx0XHRcdFx0ZnJvbTogT2JqZWN0LmFzc2lnbihyYW5nZVN0YXJ0LCB7IGNoOiAwIH0pLFxuXHRcdFx0XHR0bzogT2JqZWN0LmFzc2lnbihyYW5nZUVuZCwgeyBjaDogMCB9KSxcblx0XHRcdH0sXG5cdFx0XHR0cnVlXG5cdFx0KTtcblx0XHRzZXRUaW1lb3V0KCgpID0+IHtcblx0XHRcdC8vIGlmICh0ZW1wKSByZXR1cm47XG5cdFx0XHRsZXQgZW5kVG9wID0gbGVhZi52aWV3LmVkaXRvci5nZXRTY3JvbGxJbmZvKCkudG9wO1xuXHRcdFx0aWYgKHN0YXJ0VG9wID09PSBlbmRUb3AgJiYgaXNTYW1lKSB7XG5cdFx0XHRcdGxlYWYuY29udGFpbmVyRWwucXVlcnlTZWxlY3RvcihcIi52aWV3LWNvbnRlbnRcIikuc3R5bGUuYm94U2hhZG93ID1cblx0XHRcdFx0XHRcIm5vbmVcIjtcblx0XHRcdH0gZWxzZSBpZiAoc3RhcnRUb3AgPT09IGVuZFRvcCB8fCAhaXNTYW1lKSB7XG5cdFx0XHRcdGxlYWYuY29udGFpbmVyRWwucXVlcnlTZWxlY3RvcihcIi52aWV3LWNvbnRlbnRcIikuc3R5bGUuYm94U2hhZG93ID1cblx0XHRcdFx0XHRcImluc2V0IDBweCAwcHggMTBweCAxMHB4IHJnYmEoMjQ4LCAyNTUsIDI1NSlcIjtcblx0XHRcdH0gZWxzZSBpZiAoc3RhcnRUb3AgPCBlbmRUb3ApIHtcblx0XHRcdFx0Ly8gc2hvdyBtYXJrIGFib3ZlXG5cdFx0XHRcdC8vIG5ld0xlYWYuY29udGFpbmVyRWwucXVlcnlTZWxlY3RvcihcIi52aWV3LWNvbnRlbnRcIikuc3R5bGUuYm94U2hhZG93ID1cblx0XHRcdFx0Ly8gXHRcImluc2V0IDBweCAwcHggMTBweCAxMHB4IHJnYmEoMjQ4LCAyNTUsIDI1NSlcIjtcblx0XHRcdFx0bGVhZi5jb250YWluZXJFbC5xdWVyeVNlbGVjdG9yKFwiLnZpZXctY29udGVudFwiKS5zdHlsZS5ib3hTaGFkb3cgPVxuXHRcdFx0XHRcdFwiaW5zZXQgMHB4IDIwcHggMjBweCAwcHggcmdiYSgyNDgsIDI1NSwgMjU1KVwiO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0Ly8gc2hvdyBtYXJrIGJlbG93XG5cdFx0XHRcdGxlYWYuY29udGFpbmVyRWwucXVlcnlTZWxlY3RvcihcIi52aWV3LWNvbnRlbnRcIikuc3R5bGUuYm94U2hhZG93ID1cblx0XHRcdFx0XHRcImluc2V0IDBweCAtMzBweCAyMHB4IDBweCByZ2JhKDI0OCwgMjU1LCAyNTUpXCI7XG5cdFx0XHR9XG5cdFx0fSwgMTApO1xuXG5cdFx0cmV0dXJuO1xuXHR9XG5cblx0Ly8gT2ghIElcdTIwMTlkIGNvbXBhcmUgdGhlIGJib3ggb2YgdGhlIHJhbmdlXG5cdC8vICh3aGljaCBJIGtub3cgeW91IGZpbmQgaW4gdGhlIG1hcmsgbGF5b3V0IHJvdXRpbmUpXG5cdC8vIHRvIHRoZSBzY3JvbGxUb3AgKyBpbm5lckhlaWdodFxuXHRjb25zdCBlZGl0b3IgPSBnZXRNYXJrZG93blZpZXcobGVhZikuZWRpdG9yO1xuXHRjb25zdCBiYWNrbGlua0NvbnRhaW5lciA9IGdldEJhY2tsaW5rQ29udGFpbmVyKGVkaXRvcik7XG5cblx0Y29uc3Qgd2luZG93SGVpZ2h0ID0gbGVhZi52aWV3LmNvbnRhaW5lckVsXG5cdFx0LnF1ZXJ5U2VsZWN0b3IoXCIuY20tc2Nyb2xsZXJcIilcblx0XHQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkuaGVpZ2h0O1xuXHRjb25zdCBzY3JvbGxUb3AgPVxuXHRcdGxlYWYudmlldy5jb250YWluZXJFbC5xdWVyeVNlbGVjdG9yKFwiLmNtLXNjcm9sbGVyXCIpLnNjcm9sbFRvcDtcblx0Y29uc3Qgc2Nyb2xsQm90dG9tID0gc2Nyb2xsVG9wICsgd2luZG93SGVpZ2h0O1xuXG5cdGxldCB2aXNpYmxlRWxlbWVudHM6IHN0cmluZ1tdID0gW107XG5cdGZvciAobGV0IGkgPSAwOyBpIDwgYmFja2xpbmtDb250YWluZXIuY2hpbGRyZW4ubGVuZ3RoOyBpKyspIHtcblx0XHRsZXQgc3R5bGUgPSBiYWNrbGlua0NvbnRhaW5lci5jaGlsZHJlbltpXS5nZXRBdHRyaWJ1dGUoXCJzdHlsZVwiKTtcblx0XHRpZiAoc3R5bGUgPT0gbnVsbCkgY29udGludWU7XG5cdFx0bGV0IGNzc1Byb3BlcnRpZXMgPSBwYXJzZUNTU1N0cmluZyhzdHlsZSk7XG5cdFx0bGV0IHRvcCA9IHBhcnNlRmxvYXQoY3NzUHJvcGVydGllc1tcInRvcFwiXS5yZXBsYWNlKFwicHhcIiwgXCJcIikpO1xuXHRcdGlmICh0b3AgPT0gbnVsbCkgY29udGludWU7XG5cblx0XHRpZiAoXG5cdFx0XHRzY3JvbGxUb3AgPD0gdG9wICYmXG5cdFx0XHR0b3AgPD0gc2Nyb2xsQm90dG9tICYmXG5cdFx0XHRiYWNrbGlua0NvbnRhaW5lci5jaGlsZHJlbltpXVxuXHRcdCkge1xuXHRcdFx0bGV0IHJlZmVyZW5jZSA9IGJhY2tsaW5rQ29udGFpbmVyLmNoaWxkcmVuW2ldLmdldEF0dHJpYnV0ZShcInJlZmVyZW5jZVwiKTtcblx0XHRcdGlmIChyZWZlcmVuY2UpIHtcblx0XHRcdFx0dmlzaWJsZUVsZW1lbnRzLnB1c2goSlNPTi5wYXJzZShyZWZlcmVuY2UpLmRhdGFTdHJpbmcpO1xuXHRcdFx0fVxuXHRcdH1cblx0fVxuXG5cdGlmICghdmlzaWJsZUVsZW1lbnRzLmluY2x1ZGVzKGRhdGFTdHJpbmcpKSB7XG5cdFx0bGV0IHN0YXJ0VG9wID0gbGVhZi52aWV3LmVkaXRvci5nZXRTY3JvbGxJbmZvKCkudG9wO1xuXG5cdFx0bGVhZi52aWV3LmVkaXRvci5zY3JvbGxJbnRvVmlldyhcblx0XHRcdHtcblx0XHRcdFx0ZnJvbTogT2JqZWN0LmFzc2lnbihyYW5nZVN0YXJ0LCB7IGNoOiAwIH0pLFxuXHRcdFx0XHR0bzogT2JqZWN0LmFzc2lnbihyYW5nZUVuZCwgeyBjaDogMCB9KSxcblx0XHRcdH0sXG5cdFx0XHR0cnVlXG5cdFx0KTtcblx0XHRzZXRUaW1lb3V0KCgpID0+IHtcblx0XHRcdC8vIGlmICh0ZW1wKSByZXR1cm47XG5cdFx0XHRsZXQgZW5kVG9wID0gbGVhZi52aWV3LmVkaXRvci5nZXRTY3JvbGxJbmZvKCkudG9wO1xuXHRcdFx0aWYgKHN0YXJ0VG9wID09IGVuZFRvcCAmJiBpc1NhbWUpIHtcblx0XHRcdFx0bGVhZi5jb250YWluZXJFbC5xdWVyeVNlbGVjdG9yKFwiLnZpZXctY29udGVudFwiKS5zdHlsZS5ib3hTaGFkb3cgPVxuXHRcdFx0XHRcdFwiaW5zZXQgMHB4IDIwcHggMjBweCAwcHggcmdiYSgyNDgsIDI1NSwgMjU1LCAwKVwiO1xuXHRcdFx0fSBlbHNlIGlmIChzdGFydFRvcCA9PT0gZW5kVG9wIHx8ICFpc1NhbWUpIHtcblx0XHRcdFx0bGVhZi5jb250YWluZXJFbC5xdWVyeVNlbGVjdG9yKFwiLnZpZXctY29udGVudFwiKS5zdHlsZS5ib3hTaGFkb3cgPVxuXHRcdFx0XHRcdFwiaW5zZXQgMHB4IDBweCAxMHB4IDEwcHggcmdiYSgyNDgsIDI1NSwgMjU1KVwiO1xuXHRcdFx0fSBlbHNlIGlmIChzdGFydFRvcCA8IGVuZFRvcCkge1xuXHRcdFx0XHQvLyBzaG93IG1hcmsgYWJvdmVcblx0XHRcdFx0Ly8gbmV3TGVhZi5jb250YWluZXJFbC5xdWVyeVNlbGVjdG9yKFwiLnZpZXctY29udGVudFwiKS5zdHlsZS5ib3hTaGFkb3cgPVxuXHRcdFx0XHQvLyBcdFwiaW5zZXQgMHB4IDBweCAxMHB4IDEwcHggcmdiYSgyNDgsIDI1NSwgMjU1KVwiO1xuXHRcdFx0XHRsZWFmLmNvbnRhaW5lckVsLnF1ZXJ5U2VsZWN0b3IoXCIudmlldy1jb250ZW50XCIpLnN0eWxlLmJveFNoYWRvdyA9XG5cdFx0XHRcdFx0XCJpbnNldCAwcHggMjBweCAyMHB4IDBweCByZ2JhKDI0OCwgMjU1LCAyNTUpXCI7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHQvLyBzaG93IG1hcmsgYmVsb3dcblx0XHRcdFx0bGVhZi5jb250YWluZXJFbC5xdWVyeVNlbGVjdG9yKFwiLnZpZXctY29udGVudFwiKS5zdHlsZS5ib3hTaGFkb3cgPVxuXHRcdFx0XHRcdFwiaW5zZXQgMHB4IC0zMHB4IDIwcHggMHB4IHJnYmEoMjQ4LCAyNTUsIDI1NSlcIjtcblx0XHRcdH1cblx0XHR9LCAxMCk7XG5cdH1cbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHN0YXJ0QmFja2xpbmtFZmZlY3Qoc3BhbjogSFRNTFNwYW5FbGVtZW50KSB7XG5cdGxldCBzb3VyY2UgPSBnZXRCYWNrbGlua0hvdmVyKCk7XG5cdGxldCBkZXN0aW5hdGlvbiA9IGdldEN1cnNvcigpO1xuXHRsZXQgdXBkYXRlU3RhdGUgPSB1cGRhdGVCYWNrbGlua0hvdmVyO1xuXG5cdC8vIE11dGV4LCBwcmV2ZW50IGNvbmN1cnJlbnQgYWNjZXNzIHRvIGZvbGxvd2luZyBzZWN0aW9uIG9mIGNvZGVcblx0aWYgKHNvdXJjZSAhPSBudWxsKSByZXR1cm47XG5cdHVwZGF0ZVN0YXRlKHtcblx0XHR0eXBlOiBgJHtBQ1RJT05fVFlQRS5CQUNLTElOS30tc3RhcnRgLFxuXHR9KTtcblxuXHRjb25zdCByZWZlcmVuY2VEYXRhID0gc3Bhbi5nZXRBdHRyaWJ1dGUoXCJyZWZlcmVuY2VcIik7XG5cdGlmICghcmVmZXJlbmNlRGF0YSkgdGhyb3cgbmV3IEVycm9yKFwiUmVmZXJlbmNlIGRhdGEgbm90IGZvdW5kXCIpO1xuXG5cdGNvbnN0IGJhY2tsaW5rID0gSlNPTi5wYXJzZShyZWZlcmVuY2VEYXRhKTtcblx0Y29uc3QgZGF0YVN0cmluZyA9IGJhY2tsaW5rLmRhdGFTdHJpbmc7XG5cblx0aWYgKGRlc3RpbmF0aW9uICE9IG51bGwgJiYgZGVzdGluYXRpb24uZGF0YVN0cmluZyA9PSBkYXRhU3RyaW5nKSB7XG5cdFx0dXBkYXRlU3RhdGUoZGVzdGluYXRpb24pO1xuXHRcdHJldHVybjtcblx0fVxuXG5cdGxldCBbcHJlZml4LCB0ZXh0LCBzdWZmaXgsIGZpbGUsIGZyb20sIHRvXSA9IHByb2Nlc3NVUkkoZGF0YVN0cmluZyk7XG5cblx0bGV0IGxlYXZlc0J5VGFiID0gY29sbGVjdExlYXZlc0J5VGFiSGVscGVyKCk7XG5cblx0bGV0IGN1cnJUYWJJZHggPSBnZXRDdXJyZW50VGFiSW5kZXgobGVhdmVzQnlUYWIsIHNwYW4pO1xuXG5cdGxldCBiYWNrbGlua0xlYWYgPSBsZWF2ZXNCeVRhYltjdXJyVGFiSWR4XS5maWx0ZXIoKGxlYWY6IFdvcmtzcGFjZUxlYWYpID0+IHtcblx0XHRsZXQgY29udGFpbmVyRWwgPSBnZXRDb250YWluZXJFbGVtZW50KGxlYWYpO1xuXHRcdGNvbnN0IGV4aXN0cyA9IGNoZWNrU3BhbkVsZW1lbnRFeGlzdHMoc3BhbiwgY29udGFpbmVyRWwpO1xuXHRcdHJldHVybiBleGlzdHM7XG5cdH0pWzBdO1xuXG5cdC8vIEB0cy1pZ25vcmVcblx0bGV0IGJhY2tsaW5rTGVhZklEID0gYmFja2xpbmtMZWFmLmlkO1xuXHRpZiAoIWJhY2tsaW5rTGVhZklEKSB0aHJvdyBuZXcgRXJyb3IoXCJMZWFmIGlkIG5vdCBmb3VuZFwiKTtcblxuXHRpZiAoYmFja2xpbmtMZWFmICYmIGJhY2tsaW5rTGVhZi52aWV3IGluc3RhbmNlb2YgTWFya2Rvd25WaWV3KSB7XG5cdFx0Y29uc3QgZWRpdG9yVmlldzogRWRpdG9yVmlldyA9IGdldEVkaXRvclZpZXcoYmFja2xpbmtMZWFmKTtcblx0XHRpZiAoIWVkaXRvclZpZXcpIHRocm93IG5ldyBFcnJvcihcIkVkaXRvciB2aWV3IG5vdCBmb3VuZFwiKTtcblx0XHRjb25zdCB2aWV3cG9ydCA9IGJhY2tsaW5rTGVhZi52aWV3LmVkaXRvci5nZXRTY3JvbGxJbmZvKCk7XG5cblx0XHRoaWdobGlnaHRTZWxlY3Rpb24oZWRpdG9yVmlldywgZnJvbSwgdG8pO1xuXHRcdC8vIGxldCBwb3NpdGlvbnMgPSBmaW5kVGV4dFBvc2l0aW9ucyhcblx0XHQvLyBcdGJhY2tsaW5rTGVhZi52aWV3LmRhdGEsXG5cdFx0Ly8gXHR0ZXh0LFxuXHRcdC8vIFx0cHJlZml4LnNsaWNlKDAsIHByZWZpeC5sZW5ndGggLSAxKSxcblx0XHQvLyBcdHN1ZmZpeC5zbGljZSgxLCBzdWZmaXgubGVuZ3RoKVxuXHRcdC8vICk7XG5cdFx0Ly8gaWYgKCFwb3NpdGlvbnMpIHRocm93IG5ldyBFcnJvcihcIlBvc2l0aW9ucyBub3QgZm91bmRcIik7XG5cblx0XHR1cGRhdGVTdGF0ZSh7XG5cdFx0XHRkYXRhU3RyaW5nLFxuXHRcdFx0b3JpZ2luYWxUb3A6IGVkaXRvclZpZXcuZG9jdW1lbnRUb3AsXG5cdFx0XHRiYWNrbGlua0xlYWZJZDogYmFja2xpbmtMZWFmSUQsXG5cdFx0fSk7XG5cdH1cblxuXHRsZXQgcmVmZXJlbmNpbmdGaWxlID0gYmFja2xpbmsucmVmZXJlbmNpbmdMb2NhdGlvbi5maWxlbmFtZTtcblxuXHQvLyBpZiAoY3VyclRhYklkeCAhPSAtMSkge1xuXHQvLyAmJiBjdXJyVGFiICE9IC0xKSB7XG5cdC8vIC8vIENoZWNrIGFkamFjZW50IHRhYnMgZm9yIGZpbGUgYW5kIG9wZW4gZmlsZSBpZiBuZWVkZWRcblx0Y29uc3QgeyBuZXdMZWFmLCB0ZW1wLCBvcmlnaW5hbExlYWYgfSA9IGF3YWl0IG9wZW5GaWxlSW5BZGphY2VudFRhYihcblx0XHRsZWF2ZXNCeVRhYixcblx0XHRjdXJyVGFiSWR4LFxuXHRcdHJlZmVyZW5jaW5nRmlsZVxuXHQpO1xuXG5cdC8vIEB0cy1pZ25vcmVcblx0bGV0IGlkID0gbmV3TGVhZi5pZDtcblx0aWYgKCFpZCkgdGhyb3cgbmV3IEVycm9yKFwiTGVhZiBpZCBub3QgZm91bmRcIik7XG5cdHVwZGF0ZVN0YXRlKHtcblx0XHRsZWFmSWQ6IGlkLFxuXHRcdHRlbXAsXG5cdFx0cGVlazogdHJ1ZSxcblx0fSk7XG5cblx0Y29uc3Qgb3JpZ2luYWxMZWFmSWQgPSBvcmlnaW5hbExlYWYuaWQ7XG5cblx0Y29uc3QgbWF0Y2hlcyA9IFtcblx0XHQuLi5iYWNrbGluay5yZWZlcmVuY2luZ0xvY2F0aW9uLnRleHQubWF0Y2hBbGwoUkVGRVJFTkNFX1JFR0VYKSxcblx0XTtcblx0aWYgKG1hdGNoZXMubGVuZ3RoID09IDApIHRocm93IG5ldyBFcnJvcihcIk1hdGNoZXMgbm90IGZvdW5kXCIpO1xuXHQvLyBUaGlzIG9uZSBzd2l0Y2gsIHRoaXMgb25lIGRvZXMgdGhlIGNvcnJlY3Qgc2Nyb2xsXG5cdC8vIHRlbXBEaXJlY3Rpb25JbmRpY2F0b3IobmV3TGVhZiwgdGV4dCwgcHJlZml4LCBzdWZmaXgsIGRhdGFTdHJpbmcpO1xuXG5cdC8vIFRoaXMgb25lIGRvZXMgdGhlIGNvcnJlY3QgZ3JhYmJpbmcgb2Ygc3BhbiBlbGVtZW50c1xuXHR0ZW1wRGlyZWN0aW9uSW5kaWNhdG9yKFxuXHRcdG5ld0xlYWYsXG5cdFx0YmFja2xpbmsucmVmZXJlbmNpbmdMb2NhdGlvbi50ZXh0LFxuXHRcdGJhY2tsaW5rLnJlZmVyZW5jaW5nTG9jYXRpb24ucHJlZml4ICsgXCItXCIsXG5cdFx0XCItXCIgKyBiYWNrbGluay5yZWZlcmVuY2luZ0xvY2F0aW9uLnN1ZmZpeCxcblx0XHRtYXRjaGVzWzBdWzFdLFxuXHRcdGlkID09PSBvcmlnaW5hbExlYWZJZCxcblx0XHRBQ1RJT05fVFlQRS5CQUNLTElOS1xuXHQpO1xuXG5cdGNvbnN0IGN1cnNvclZpZXdwb3J0ID0gbmV3TGVhZi52aWV3LmVkaXRvci5nZXRTY3JvbGxJbmZvKCk7XG5cblx0dXBkYXRlU3RhdGUoe1xuXHRcdGN1cnNvclZpZXdwb3J0LFxuXHR9KTtcblxuXHRsZXQgYmFja2xpbmtTcGFuOiBIVE1MU3BhbkVsZW1lbnQgPSBuZXdMZWFmLmNvbnRhaW5lckVsLnF1ZXJ5U2VsZWN0b3IoXG5cdFx0YHNwYW5bZGF0YT1cIiR7YmFja2xpbmsuZGF0YVN0cmluZ31cIl1gXG5cdCk7XG5cblx0Ly8gQ2FuJ3QgZ3VhcmFudGVlIHRoYXQgdGhpcyB3aWxsIGJlIHZpc2libGUuXG5cdGlmIChiYWNrbGlua1NwYW4pIHtcblx0XHRiYWNrbGlua1NwYW4uY2xhc3NMaXN0LmFkZChcInJlZmVyZW5jZS1kYXRhLXNwYW4taG92ZXJlZFwiKTtcblx0fVxuXG5cdGlmIChcblx0XHRpZCA9PT0gb3JpZ2luYWxMZWFmSWRcblx0XHQvLyAmJlxuXHRcdC8vIChuZXdMZWFmLmNvbnRhaW5lckVsLnF1ZXJ5U2VsZWN0b3IoXCIudmlldy1jb250ZW50XCIpLnN0eWxlLmJveFNoYWRvdyA9PVxuXHRcdC8vIFx0XCJub25lXCIgfHxcblx0XHQvLyBcdG5ld0xlYWYuY29udGFpbmVyRWwucXVlcnlTZWxlY3RvcihcIi52aWV3LWNvbnRlbnRcIikuc3R5bGUuYm94U2hhZG93ID09IFwiXCIpXG5cdCkge1xuXHRcdG5ld0xlYWYuY29udGFpbmVyRWwucXVlcnlTZWxlY3RvcihcIi52aWV3LWNvbnRlbnRcIikuc3R5bGUuYm94U2hhZG93ID0gXCJub25lXCI7XG5cdH1cblxuXHQvLyBAdHMtaWdub3JlXG5cdGlmIChvcmlnaW5hbExlYWZJZCkge1xuXHRcdHVwZGF0ZVN0YXRlKHtcblx0XHRcdG9yaWdpbmFsTGVhZklkLFxuXHRcdH0pO1xuXHR9XG5cblx0cmV0dXJuO1xufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gc3RhcnRSZWZlcmVuY2VFZmZlY3QoXG5cdHNwYW46IEhUTUxTcGFuRWxlbWVudCB8IG51bGwgfCB1bmRlZmluZWQsXG5cdHR5cGU6IHN0cmluZ1xuKSB7XG5cdGxldCBzb3VyY2UgPSB0eXBlID09IEFDVElPTl9UWVBFLk1PVVNFID8gZ2V0SG92ZXIoKSA6IGdldEN1cnNvcigpO1xuXHRsZXQgZGVzdGluYXRpb24gPSB0eXBlID09IEFDVElPTl9UWVBFLk1PVVNFID8gZ2V0Q3Vyc29yKCkgOiBnZXRIb3ZlcigpO1xuXHRsZXQgdXBkYXRlU3RhdGUgPSB0eXBlID09IEFDVElPTl9UWVBFLk1PVVNFID8gdXBkYXRlSG92ZXIgOiB1cGRhdGVDdXJzb3I7XG5cblx0Ly8gTXV0ZXgsIHByZXZlbnQgY29uY3VycmVudCBhY2Nlc3MgdG8gZm9sbG93aW5nIHNlY3Rpb24gb2YgY29kZVxuXHRpZiAoc291cmNlICE9IG51bGwpIHJldHVybjtcblx0dXBkYXRlU3RhdGUoe1xuXHRcdHR5cGU6IGAke3R5cGV9LXN0YXJ0YCxcblx0fSk7XG5cblx0aWYgKCFzcGFuKSByZXR1cm47XG5cdHNwYW4ucGFyZW50RWxlbWVudFxuXHRcdD8ucXVlcnlTZWxlY3RvcihcIi5yZWZlcmVuY2Utc3BhblwiKVxuXHRcdD8uY2xhc3NMaXN0LmFkZChcInJlZmVyZW5jZS1zcGFuLXNlbGVjdGVkXCIpO1xuXG5cdHNwYW4uY2xhc3NMaXN0LmFkZChcInJlZmVyZW5jZS1kYXRhLXNwYW4tc2VsZWN0ZWRcIik7XG5cblx0Y29uc3QgZGF0YVN0cmluZyA9IHNwYW4uZ2V0QXR0cmlidXRlKFwiZGF0YVwiKTtcblx0aWYgKCFkYXRhU3RyaW5nKSByZXR1cm47XG5cblx0aWYgKGRlc3RpbmF0aW9uICE9IG51bGwgJiYgZGVzdGluYXRpb24uZGF0YVN0cmluZyA9PSBkYXRhU3RyaW5nKSB7XG5cdFx0dXBkYXRlSG92ZXIoZGVzdGluYXRpb24pO1xuXHRcdHJldHVybjtcblx0fVxuXG5cdGxldCBbcHJlZml4LCB0ZXh0LCBzdWZmaXgsIGZpbGUsIGZyb20sIHRvXSA9IHByb2Nlc3NVUkkoZGF0YVN0cmluZyk7XG5cblx0bGV0IGxlYXZlc0J5VGFiID0gY29sbGVjdExlYXZlc0J5VGFiSGVscGVyKCk7XG5cblx0bGV0IGN1cnJUYWJJZHggPSBnZXRDdXJyZW50VGFiSW5kZXgobGVhdmVzQnlUYWIsIHNwYW4pO1xuXG5cdGxldCBjdXJyTGVhZiA9IGdldFRoYXQoKS53b3Jrc3BhY2UuZ2V0TGVhZigpO1xuXG5cdC8vIEB0cy1pZ25vcmVcblx0bGV0IGN1cnJMZWFmSUQgPSBjdXJyTGVhZi5pZDtcblx0aWYgKCFjdXJyTGVhZklEKSB0aHJvdyBuZXcgRXJyb3IoXCJjdXJyTGVhZklEIGlkIG5vdCBmb3VuZFwiKTtcblxuXHRjb25zdCB7IG5ld0xlYWYsIHRlbXAsIG9yaWdpbmFsTGVhZiB9ID0gYXdhaXQgb3BlbkZpbGVJbkFkamFjZW50VGFiKFxuXHRcdGxlYXZlc0J5VGFiLFxuXHRcdGN1cnJUYWJJZHgsXG5cdFx0ZmlsZSxcblx0XHR0eXBlXG5cdCk7XG5cdC8vIGlmICghbmV3TGVhZikge1xuXHQvLyBcdHJlc2V0U3RhdGUoKTtcblx0Ly8gXHRyZXR1cm47XG5cdC8vIH1cblx0YXdhaXQgZGVsYXkoNTApOyAvLyBlbnN1cmUgbmV3IGxlYWYgaGFzIG9wZW5lZCBjb21wbGV0ZWx5IGJlZm9yZSBkb2luZyBjaGVja3MgYmVsb3dcblxuXHQvLyBAdHMtaWdub3JlXG5cdGxldCBpZCA9IG5ld0xlYWYuaWQ7XG5cdGlmICghaWQpIHRocm93IG5ldyBFcnJvcihcIkxlYWYgaWQgbm90IGZvdW5kXCIpO1xuXHR1cGRhdGVTdGF0ZSh7XG5cdFx0bGVhZklkOiBpZCxcblx0XHR0ZW1wLFxuXHRcdHBlZWs6IHRydWUsXG5cdH0pO1xuXG5cdC8vIEB0cy1pZ25vcmVcblx0Y29uc3Qgb3JpZ2luYWxMZWFmSWQgPSBvcmlnaW5hbExlYWYuaWQ7XG5cblx0aWYgKG5ld0xlYWYgJiYgbmV3TGVhZi52aWV3IGluc3RhbmNlb2YgTWFya2Rvd25WaWV3KSB7XG5cdFx0Y29uc3QgZWRpdG9yVmlldzogRWRpdG9yVmlldyA9IGdldEVkaXRvclZpZXcobmV3TGVhZik7XG5cdFx0aWYgKCFlZGl0b3JWaWV3KSB0aHJvdyBuZXcgRXJyb3IoXCJFZGl0b3IgdmlldyBub3QgZm91bmRcIik7XG5cdFx0Y29uc3Qgdmlld3BvcnQgPSBuZXdMZWFmLnZpZXcuZWRpdG9yLmdldFNjcm9sbEluZm8oKTtcblxuXHRcdGhpZ2hsaWdodFNlbGVjdGlvbihlZGl0b3JWaWV3LCBmcm9tLCB0byk7XG5cblx0XHR0ZW1wRGlyZWN0aW9uSW5kaWNhdG9yKFxuXHRcdFx0bmV3TGVhZixcblx0XHRcdHRleHQsXG5cdFx0XHRwcmVmaXgsXG5cdFx0XHRzdWZmaXgsXG5cdFx0XHRkYXRhU3RyaW5nLFxuXHRcdFx0aWQgPT09IG9yaWdpbmFsTGVhZklkXG5cdFx0KTtcblxuXHRcdGNvbnN0IGN1cnNvclZpZXdwb3J0ID0gbmV3TGVhZi52aWV3LmVkaXRvci5nZXRTY3JvbGxJbmZvKCk7XG5cblx0XHR1cGRhdGVTdGF0ZSh7XG5cdFx0XHRkYXRhU3RyaW5nLFxuXHRcdFx0b3JpZ2luYWxUb3A6IGVkaXRvclZpZXcuZG9jdW1lbnRUb3AsXG5cdFx0XHQvLyBvcmlnaW5hbExlYWZJZDogY3VyckxlYWZJRCxcblx0XHRcdGN1cnNvclZpZXdwb3J0LFxuXHRcdH0pO1xuXHR9XG5cblx0aWYgKFxuXHRcdGlkICE9IG9yaWdpbmFsTGVhZklkICYmXG5cdFx0KG5ld0xlYWYuY29udGFpbmVyRWwucXVlcnlTZWxlY3RvcihcIi52aWV3LWNvbnRlbnRcIikuc3R5bGUuYm94U2hhZG93ID09XG5cdFx0XHRcIm5vbmVcIiB8fFxuXHRcdFx0bmV3TGVhZi5jb250YWluZXJFbC5xdWVyeVNlbGVjdG9yKFwiLnZpZXctY29udGVudFwiKS5zdHlsZS5ib3hTaGFkb3cgPT0gXCJcIilcblx0KSB7XG5cdFx0bmV3TGVhZi5jb250YWluZXJFbC5xdWVyeVNlbGVjdG9yKFwiLnZpZXctY29udGVudFwiKS5zdHlsZS5ib3hTaGFkb3cgPVxuXHRcdFx0XCJpbnNldCAwcHggMHB4IDEwcHggMTBweCByZ2JhKDI0OCwgMjU1LCAyNTUpXCI7XG5cdH1cblxuXHRpZiAob3JpZ2luYWxMZWFmSWQpIHtcblx0XHR1cGRhdGVTdGF0ZSh7XG5cdFx0XHRvcmlnaW5hbExlYWZJZCxcblx0XHR9KTtcblx0fVxufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZW5kUmVmZXJlbmNlQ3Vyc29yRWZmZWN0KCkge1xuXHRpZiAoIWdldEN1cnNvcigpIHx8IE9iamVjdC5rZXlzKGdldEN1cnNvcigpKS5sZW5ndGggPT0gMCkge1xuXHRcdC8vIEVuZCBtdXRleCBsb2NrXG5cdFx0cmVzZXRDdXJzb3IoKTtcblx0XHRyZXR1cm47XG5cdH1cblxuXHRjb25zdCB7IGRhdGFTdHJpbmcsIGxlYWZJZCwgb3JpZ2luYWxMZWFmSWQsIHRlbXAsIGN1cnNvclZpZXdwb3J0LCBwZWVrIH0gPVxuXHRcdGdldEN1cnNvcigpO1xuXHRpZiAoZ2V0SG92ZXIoKSAhPSBudWxsICYmIGdldEhvdmVyKCkuZGF0YVN0cmluZyA9PSBkYXRhU3RyaW5nKSB7XG5cdFx0Ly8gRW5kIG11dGV4IGxvY2tcblx0XHRyZXNldEN1cnNvcigpO1xuXHRcdHJldHVybjtcblx0fVxuXG5cdGNvbnN0IHsgd29ya3NwYWNlIH0gPSBnZXRUaGF0KCk7XG5cdGxldCB0YXJnZXRMZWFmID0gd29ya3NwYWNlLmdldExlYWZCeUlkKGxlYWZJZCk7XG5cdGlmICghdGFyZ2V0TGVhZikge1xuXHRcdHJlc2V0SG92ZXIoKTtcblx0XHR0aHJvdyBuZXcgRXJyb3IoXCJUYXJnZXQgbGVhZiBub3QgZm91bmRcIik7XG5cdH1cblxuXHRjb25zdCBhY3RpdmVMZWFmID0gZ2V0VGhhdCgpLndvcmtzcGFjZS5nZXRMZWFmKCk7XG5cdC8vIEB0cy1pZ25vcmUgaWRcblx0Y29uc3QgYWN0aXZlTGVhZklkID0gYWN0aXZlTGVhZi5pZDtcblxuXHRsZXQgZWRpdG9yVmlldyA9IGdldEVkaXRvclZpZXcodGFyZ2V0TGVhZik7XG5cblx0cmVtb3ZlSGlnaGxpZ2h0cyhlZGl0b3JWaWV3KTtcblxuXHRpZiAoYWN0aXZlTGVhZklkID09PSBsZWFmSWQpIHtcblx0XHRyZXNldEN1cnNvcigpO1xuXHRcdGxldCBjb250YWluZXJFbDogSFRNTEVsZW1lbnQgPSBnZXRDb250YWluZXJFbGVtZW50KHRhcmdldExlYWYpO1xuXHRcdGlmIChjb250YWluZXJFbCAhPSBudWxsKSB7XG5cdFx0XHQvLyBAdHMtaWdub3JlXG5cdFx0XHRjb250YWluZXJFbC5xdWVyeVNlbGVjdG9yKFwiLnZpZXctY29udGVudFwiKT8uc2V0QXR0cmlidXRlKFwic3R5bGVcIiwgXCJcIik7XG5cdFx0fVxuXHRcdC8vIFRvZ2dsaW5nIHZpc3VhbCBob3ZlciBzdGF0ZVxuXHRcdGxldCBhY3RpdmVDb250YWluZXJFbDogSFRNTEVsZW1lbnQgPSBnZXRDb250YWluZXJFbGVtZW50KGFjdGl2ZUxlYWYpO1xuXG5cdFx0aWYgKGFjdGl2ZUNvbnRhaW5lckVsICE9IG51bGwpIHtcblx0XHRcdGFjdGl2ZUNvbnRhaW5lckVsXG5cdFx0XHRcdC5xdWVyeVNlbGVjdG9yKFwiLnJlZmVyZW5jZS1zcGFuLXNlbGVjdGVkXCIpXG5cdFx0XHRcdD8uY2xhc3NMaXN0LnJlbW92ZShcInJlZmVyZW5jZS1zcGFuLXNlbGVjdGVkXCIpO1xuXG5cdFx0XHRhY3RpdmVDb250YWluZXJFbFxuXHRcdFx0XHQucXVlcnlTZWxlY3RvcihcIi5yZWZlcmVuY2UtZGF0YS1zcGFuLXNlbGVjdGVkXCIpXG5cdFx0XHRcdD8uY2xhc3NMaXN0LnJlbW92ZShcInJlZmVyZW5jZS1kYXRhLXNwYW4tc2VsZWN0ZWRcIik7XG5cdFx0fVxuXHRcdHJldHVybjtcblx0fVxuXG5cdGlmIChjdXJzb3JWaWV3cG9ydCAmJiB0YXJnZXRMZWFmICYmIHRhcmdldExlYWYudmlldyBpbnN0YW5jZW9mIE1hcmtkb3duVmlldykge1xuXHRcdGNvbnN0IHZpZXc6IE1hcmtkb3duVmlldyA9IHRhcmdldExlYWYudmlldztcblx0XHR2aWV3LmVkaXRvci5zY3JvbGxUbygwLCBjdXJzb3JWaWV3cG9ydC50b3ApO1xuXG5cdFx0Ly8gY29uc3QgcmVzdWx0ID0gYXdhaXQgbmV3IFByb21pc2UoKHJlc29sdmUpID0+IHtcblx0XHQvLyBcdGNvbnN0IHNjcm9sbGluZyA9IHNldEludGVydmFsKCgpID0+IHtcblx0XHQvLyBcdFx0Y29uc3Qgc2Nyb2xsQW1vdW50ID0gNDA7XG5cdFx0Ly8gXHRcdGNvbnN0IGN1cnJlbnRTY3JvbGwgPSB2aWV3LmVkaXRvci5nZXRTY3JvbGxJbmZvKCkudG9wO1xuXHRcdC8vIFx0XHRpZiAoY3VycmVudFNjcm9sbCA9PSBjdXJzb3JWaWV3cG9ydC50b3ApIHtcblx0XHQvLyBcdFx0XHRjbGVhckludGVydmFsKHNjcm9sbGluZyk7XG5cdFx0Ly8gXHRcdH0gZWxzZSBpZiAoY3VycmVudFNjcm9sbCA+IGN1cnNvclZpZXdwb3J0LnRvcCkge1xuXHRcdC8vIFx0XHRcdGlmIChjdXJyZW50U2Nyb2xsIC0gc2Nyb2xsQW1vdW50IDwgY3Vyc29yVmlld3BvcnQudG9wKSB7XG5cdFx0Ly8gXHRcdFx0XHR2aWV3LmVkaXRvci5zY3JvbGxUbygwLCBjdXJzb3JWaWV3cG9ydC50b3ApO1xuXHRcdC8vIFx0XHRcdFx0Y2xlYXJJbnRlcnZhbChzY3JvbGxpbmcpO1xuXHRcdC8vIFx0XHRcdFx0cmVzb2x2ZShcImRvbmVcIik7XG5cdFx0Ly8gXHRcdFx0fSBlbHNlIHtcblx0XHQvLyBcdFx0XHRcdHZpZXcuZWRpdG9yLnNjcm9sbFRvKDAsIGN1cnJlbnRTY3JvbGwgLSBzY3JvbGxBbW91bnQpO1xuXHRcdC8vIFx0XHRcdH1cblx0XHQvLyBcdFx0fSBlbHNlIGlmIChjdXJyZW50U2Nyb2xsIDwgY3Vyc29yVmlld3BvcnQudG9wKSB7XG5cdFx0Ly8gXHRcdFx0aWYgKGN1cnJlbnRTY3JvbGwgKyBzY3JvbGxBbW91bnQgPiBjdXJzb3JWaWV3cG9ydC50b3ApIHtcblx0XHQvLyBcdFx0XHRcdHZpZXcuZWRpdG9yLnNjcm9sbFRvKDAsIGN1cnNvclZpZXdwb3J0LnRvcCk7XG5cdFx0Ly8gXHRcdFx0XHRjbGVhckludGVydmFsKHNjcm9sbGluZyk7XG5cdFx0Ly8gXHRcdFx0XHRyZXNvbHZlKFwiZG9uZVwiKTtcblx0XHQvLyBcdFx0XHR9IGVsc2Uge1xuXHRcdC8vIFx0XHRcdFx0dmlldy5lZGl0b3Iuc2Nyb2xsVG8oMCwgY3VycmVudFNjcm9sbCArIHNjcm9sbEFtb3VudCk7XG5cdFx0Ly8gXHRcdFx0fVxuXHRcdC8vIFx0XHR9XG5cdFx0Ly8gXHR9LCAxMCk7XG5cdFx0Ly8gfSk7XG5cblx0XHQvLyB2aWV3LmNvbnRhaW5lckVsLnF1ZXJ5U2VsZWN0b3IoXCIuY20tc2Nyb2xsZXJcIik/LnNjcm9sbFRvKHtcblx0XHQvLyBcdHRvcDogY3Vyc29yVmlld3BvcnQudG9wLFxuXHRcdC8vIFx0YmVoYXZpb3I6IFwic21vb3RoXCIsXG5cdFx0Ly8gfSk7XG5cblx0XHQvLyBpZiB0aGUgaG92ZXIgaXMgYWN0aXZlLCBoaWdobGlnaHQgdGhlIHNlbGVjdGlvblxuXHRcdGlmIChnZXRIb3ZlcigpICE9IG51bGwpIHtcblx0XHRcdGNvbnN0IHsgZGF0YVN0cmluZywgY3Vyc29yVmlld3BvcnQsIGxlYWZJZCwgb3JpZ2luYWxMZWFmSWQgfSA9IGdldEhvdmVyKCk7XG5cdFx0XHRsZXQgW3ByZWZpeCwgdGV4dCwgc3VmZml4LCBmaWxlLCBmcm9tLCB0b10gPSBwcm9jZXNzVVJJKGRhdGFTdHJpbmcpO1xuXHRcdFx0Y29uc3QgY3Vyc29yTGVhZiA9IHdvcmtzcGFjZS5nZXRMZWFmQnlJZChsZWFmSWQpO1xuXHRcdFx0d29ya3NwYWNlLnJldmVhbExlYWYoY3Vyc29yTGVhZik7XG5cdFx0XHRjb25zdCBlZGl0b3JWaWV3OiBFZGl0b3JWaWV3ID0gZ2V0RWRpdG9yVmlldyhjdXJzb3JMZWFmKTtcblx0XHRcdGhpZ2hsaWdodFNlbGVjdGlvbihlZGl0b3JWaWV3LCBmcm9tLCB0byk7XG5cdFx0XHQvLyB0ZW1wRGlyZWN0aW9uSW5kaWNhdG9yKFxuXHRcdFx0Ly8gXHRjdXJzb3JMZWFmLFxuXHRcdFx0Ly8gXHR0ZXh0LFxuXHRcdFx0Ly8gXHRwcmVmaXgsXG5cdFx0XHQvLyBcdHN1ZmZpeCxcblx0XHRcdC8vIFx0dGVtcCxcblx0XHRcdC8vIFx0ZGF0YVN0cmluZyxcblx0XHRcdC8vIFx0QUNUSU9OX1RZUEUuTU9VU0Vcblx0XHRcdC8vICk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdGxldCBjb250YWluZXJFbDogSFRNTEVsZW1lbnQgPSBnZXRDb250YWluZXJFbGVtZW50KHRhcmdldExlYWYpO1xuXHRcdFx0aWYgKGNvbnRhaW5lckVsICE9IG51bGwpIHtcblx0XHRcdFx0Ly8gQHRzLWlnbm9yZVxuXHRcdFx0XHRjb250YWluZXJFbC5xdWVyeVNlbGVjdG9yKFwiLnZpZXctY29udGVudFwiKT8uc2V0QXR0cmlidXRlKFwic3R5bGVcIiwgXCJcIik7XG5cdFx0XHR9XG5cdFx0fVxuXHRcdC8vIFRvZ2dsaW5nIHZpc3VhbCBob3ZlciBzdGF0ZVxuXHRcdGxldCBhY3RpdmVDb250YWluZXJFbDogSFRNTEVsZW1lbnQgPSBnZXRDb250YWluZXJFbGVtZW50KGFjdGl2ZUxlYWYpO1xuXG5cdFx0aWYgKGFjdGl2ZUNvbnRhaW5lckVsICE9IG51bGwpIHtcblx0XHRcdGFjdGl2ZUNvbnRhaW5lckVsXG5cdFx0XHRcdC5xdWVyeVNlbGVjdG9yKFwiLnJlZmVyZW5jZS1zcGFuLXNlbGVjdGVkXCIpXG5cdFx0XHRcdD8uY2xhc3NMaXN0LnJlbW92ZShcInJlZmVyZW5jZS1zcGFuLXNlbGVjdGVkXCIpO1xuXG5cdFx0XHRhY3RpdmVDb250YWluZXJFbFxuXHRcdFx0XHQucXVlcnlTZWxlY3RvcihcIi5yZWZlcmVuY2UtZGF0YS1zcGFuLXNlbGVjdGVkXCIpXG5cdFx0XHRcdD8uY2xhc3NMaXN0LnJlbW92ZShcInJlZmVyZW5jZS1kYXRhLXNwYW4tc2VsZWN0ZWRcIik7XG5cdFx0fVxuXHR9XG5cblx0aWYgKHRlbXAgJiYgdGFyZ2V0TGVhZikge1xuXHRcdHRhcmdldExlYWYuZGV0YWNoKCk7XG5cdH1cblxuXHRpZiAocGVlaykge1xuXHRcdGxldCBvcmlnaW5hbExlYWYgPSB3b3Jrc3BhY2UuZ2V0TGVhZkJ5SWQob3JpZ2luYWxMZWFmSWQpO1xuXHRcdGlmICghb3JpZ2luYWxMZWFmKSB0aHJvdyBuZXcgRXJyb3IoXCJPcmlnaW5hbCBsZWFmIG5vdCBmb3VuZFwiKTtcblxuXHRcdHdvcmtzcGFjZS5yZXZlYWxMZWFmKG9yaWdpbmFsTGVhZik7XG5cdH1cblxuXHQvLyBpZiAoIXRlbXApIHtcblx0Ly8gXHRsZXQgb3JpZ2luYWxMZWFmID0gd29ya3NwYWNlLmdldExlYWZCeUlkKG9yaWdpbmFsTGVhZklkKTtcblx0Ly8gXHRpZiAoIW9yaWdpbmFsTGVhZikgdGhyb3cgbmV3IEVycm9yKFwiT3JpZ2luYWwgbGVhZiBub3QgZm91bmRcIik7XG5cblx0Ly8gXHR3b3Jrc3BhY2UucmV2ZWFsTGVhZihvcmlnaW5hbExlYWYpO1xuXHQvLyB9XG5cdC8vIEVuZCBtdXRleCBsb2NrXG5cdHJlc2V0Q3Vyc29yKCk7XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBlbmRSZWZlcmVuY2VIb3ZlckVmZmVjdCgpIHtcblx0aWYgKCFnZXRIb3ZlcigpIHx8IE9iamVjdC5rZXlzKGdldEhvdmVyKCkpLmxlbmd0aCA9PSAwKSB7XG5cdFx0Ly8gRW5kIG11dGV4IGxvY2tcblx0XHRyZXNldEhvdmVyKCk7XG5cdFx0cmV0dXJuO1xuXHR9XG5cblx0Y29uc3QgeyBkYXRhU3RyaW5nLCBsZWFmSWQsIG9yaWdpbmFsTGVhZklkLCB0ZW1wLCBjdXJzb3JWaWV3cG9ydCwgcGVlayB9ID1cblx0XHRnZXRIb3ZlcigpO1xuXHRpZiAoZ2V0Q3Vyc29yKCkgIT0gbnVsbCAmJiBnZXRDdXJzb3IoKS5kYXRhU3RyaW5nID09IGRhdGFTdHJpbmcpIHtcblx0XHQvLyBjb25zb2xlLmxvZyhcImN1cnNvciByZXNldFwiKTtcblx0XHQvLyBFbmQgbXV0ZXggbG9ja1xuXHRcdHJlc2V0SG92ZXIoKTtcblx0XHRyZXR1cm47XG5cdH1cblxuXHRjb25zdCB7IHdvcmtzcGFjZSB9ID0gZ2V0VGhhdCgpO1xuXHRsZXQgdGFyZ2V0TGVhZiA9IHdvcmtzcGFjZS5nZXRMZWFmQnlJZChsZWFmSWQpO1xuXHRpZiAoIXRhcmdldExlYWYpIHtcblx0XHRyZXNldEhvdmVyKCk7XG5cdFx0dGhyb3cgbmV3IEVycm9yKFwiVGFyZ2V0IGxlYWYgbm90IGZvdW5kXCIpO1xuXHR9XG5cblx0Y29uc3QgYWN0aXZlTGVhZiA9IGdldFRoYXQoKS53b3Jrc3BhY2UuZ2V0TGVhZigpO1xuXHQvLyBAdHMtaWdub3JlIGlkXG5cblx0bGV0IGVkaXRvclZpZXcgPSBnZXRFZGl0b3JWaWV3KHRhcmdldExlYWYpO1xuXG5cdHJlbW92ZUhpZ2hsaWdodHMoZWRpdG9yVmlldyk7XG5cblx0aWYgKGN1cnNvclZpZXdwb3J0ICYmIHRhcmdldExlYWYgJiYgdGFyZ2V0TGVhZi52aWV3IGluc3RhbmNlb2YgTWFya2Rvd25WaWV3KSB7XG5cdFx0Y29uc3QgdmlldzogTWFya2Rvd25WaWV3ID0gdGFyZ2V0TGVhZi52aWV3O1xuXHRcdHZpZXcuZWRpdG9yLnNjcm9sbFRvKDAsIGN1cnNvclZpZXdwb3J0LnRvcCk7XG5cblx0XHQvLyBjb25zdCBjdXJyZW50U2Nyb2xsID0gdmlldy5lZGl0b3IuZ2V0U2Nyb2xsSW5mbygpLnRvcDtcblx0XHQvLyBjb25zdCByZXN1bHQgPSBhd2FpdCBuZXcgUHJvbWlzZSgocmVzb2x2ZSkgPT4ge1xuXHRcdC8vIFx0Y29uc3Qgc2Nyb2xsaW5nID0gc2V0SW50ZXJ2YWwoKCkgPT4ge1xuXHRcdC8vIFx0XHRjb25zdCBzY3JvbGxBbW91bnQgPSA0MDtcblx0XHQvLyBcdFx0Y29uc3QgY3VycmVudFNjcm9sbCA9IHZpZXcuZWRpdG9yLmdldFNjcm9sbEluZm8oKS50b3A7XG5cdFx0Ly8gXHRcdGlmIChjdXJyZW50U2Nyb2xsID09IGN1cnNvclZpZXdwb3J0LnRvcCkge1xuXHRcdC8vIFx0XHRcdGNsZWFySW50ZXJ2YWwoc2Nyb2xsaW5nKTtcblx0XHQvLyBcdFx0fSBlbHNlIGlmIChjdXJyZW50U2Nyb2xsID4gY3Vyc29yVmlld3BvcnQudG9wKSB7XG5cdFx0Ly8gXHRcdFx0aWYgKGN1cnJlbnRTY3JvbGwgLSBzY3JvbGxBbW91bnQgPCBjdXJzb3JWaWV3cG9ydC50b3ApIHtcblx0XHQvLyBcdFx0XHRcdHZpZXcuZWRpdG9yLnNjcm9sbFRvKDAsIGN1cnNvclZpZXdwb3J0LnRvcCk7XG5cdFx0Ly8gXHRcdFx0XHRjbGVhckludGVydmFsKHNjcm9sbGluZyk7XG5cdFx0Ly8gXHRcdFx0XHRyZXNvbHZlKFwiZG9uZVwiKTtcblx0XHQvLyBcdFx0XHR9IGVsc2Uge1xuXHRcdC8vIFx0XHRcdFx0dmlldy5lZGl0b3Iuc2Nyb2xsVG8oMCwgY3VycmVudFNjcm9sbCAtIHNjcm9sbEFtb3VudCk7XG5cdFx0Ly8gXHRcdFx0fVxuXHRcdC8vIFx0XHR9IGVsc2UgaWYgKGN1cnJlbnRTY3JvbGwgPCBjdXJzb3JWaWV3cG9ydC50b3ApIHtcblx0XHQvLyBcdFx0XHRpZiAoY3VycmVudFNjcm9sbCArIHNjcm9sbEFtb3VudCA+IGN1cnNvclZpZXdwb3J0LnRvcCkge1xuXHRcdC8vIFx0XHRcdFx0dmlldy5lZGl0b3Iuc2Nyb2xsVG8oMCwgY3Vyc29yVmlld3BvcnQudG9wKTtcblx0XHQvLyBcdFx0XHRcdGNsZWFySW50ZXJ2YWwoc2Nyb2xsaW5nKTtcblx0XHQvLyBcdFx0XHRcdHJlc29sdmUoXCJkb25lXCIpO1xuXHRcdC8vIFx0XHRcdH0gZWxzZSB7XG5cdFx0Ly8gXHRcdFx0XHR2aWV3LmVkaXRvci5zY3JvbGxUbygwLCBjdXJyZW50U2Nyb2xsICsgc2Nyb2xsQW1vdW50KTtcblx0XHQvLyBcdFx0XHR9XG5cdFx0Ly8gXHRcdH1cblx0XHQvLyBcdH0sIDEwKTtcblx0XHQvLyB9KTtcblxuXHRcdC8vIHZpZXcuY29udGFpbmVyRWwucXVlcnlTZWxlY3RvcihcIi5jbS1zY3JvbGxlclwiKT8uc2Nyb2xsVG8oe1xuXHRcdC8vIFx0dG9wOiBjdXJzb3JWaWV3cG9ydC50b3AsXG5cdFx0Ly8gXHRiZWhhdmlvcjogXCJzbW9vdGhcIixcblx0XHQvLyB9KTtcblxuXHRcdC8vIGlmIHRoZSBjdXJzb3IgaXMgYWN0aXZlLCBoaWdobGlnaHQgdGhlIHNlbGVjdGlvblxuXHRcdGlmIChnZXRDdXJzb3IoKSAhPSBudWxsKSB7XG5cdFx0XHRjb25zdCB7IGRhdGFTdHJpbmcsIGN1cnNvclZpZXdwb3J0LCBsZWFmSWQsIG9yaWdpbmFsTGVhZklkIH0gPVxuXHRcdFx0XHRnZXRDdXJzb3IoKTtcblx0XHRcdGxldCBbcHJlZml4LCB0ZXh0LCBzdWZmaXgsIGZpbGUsIGZyb20sIHRvXSA9IHByb2Nlc3NVUkkoZGF0YVN0cmluZyk7XG5cdFx0XHRjb25zdCBjdXJzb3JMZWFmID0gd29ya3NwYWNlLmdldExlYWZCeUlkKGxlYWZJZCk7XG5cdFx0XHR3b3Jrc3BhY2UucmV2ZWFsTGVhZihjdXJzb3JMZWFmKTtcblx0XHRcdGNvbnN0IGVkaXRvclZpZXc6IEVkaXRvclZpZXcgPSBnZXRFZGl0b3JWaWV3KGN1cnNvckxlYWYpO1xuXHRcdFx0aWYgKCFlZGl0b3JWaWV3KSB0aHJvdyBuZXcgRXJyb3IoXCJFZGl0b3IgdmlldyBub3QgZm91bmRcIik7XG5cblx0XHRcdGhpZ2hsaWdodFNlbGVjdGlvbihlZGl0b3JWaWV3LCBmcm9tLCB0byk7XG5cdFx0XHQvLyB0ZW1wRGlyZWN0aW9uSW5kaWNhdG9yKFxuXHRcdFx0Ly8gXHRjdXJzb3JMZWFmLFxuXHRcdFx0Ly8gXHR0ZXh0LFxuXHRcdFx0Ly8gXHRwcmVmaXgsXG5cdFx0XHQvLyBcdHN1ZmZpeCxcblx0XHRcdC8vIFx0dGVtcCxcblx0XHRcdC8vIFx0ZGF0YVN0cmluZ1xuXHRcdFx0Ly8gKTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0bGV0IGNvbnRhaW5lckVsOiBIVE1MRWxlbWVudCA9IGdldENvbnRhaW5lckVsZW1lbnQodGFyZ2V0TGVhZik7XG5cdFx0XHRpZiAoY29udGFpbmVyRWwgIT0gbnVsbCkge1xuXHRcdFx0XHQvLyBAdHMtaWdub3JlXG5cdFx0XHRcdGNvbnRhaW5lckVsLnF1ZXJ5U2VsZWN0b3IoXCIudmlldy1jb250ZW50XCIpPy5zZXRBdHRyaWJ1dGUoXCJzdHlsZVwiLCBcIlwiKTtcblx0XHRcdH1cblx0XHR9XG5cdFx0Ly8gVG9nZ2xpbmcgdmlzdWFsIGhvdmVyIHN0YXRlXG5cdFx0bGV0IGFjdGl2ZUNvbnRhaW5lckVsOiBIVE1MRWxlbWVudCA9IGdldENvbnRhaW5lckVsZW1lbnQoYWN0aXZlTGVhZik7XG5cblx0XHRpZiAoYWN0aXZlQ29udGFpbmVyRWwgIT0gbnVsbCkge1xuXHRcdFx0YWN0aXZlQ29udGFpbmVyRWxcblx0XHRcdFx0LnF1ZXJ5U2VsZWN0b3IoXCIucmVmZXJlbmNlLXNwYW4tc2VsZWN0ZWRcIilcblx0XHRcdFx0Py5jbGFzc0xpc3QucmVtb3ZlKFwicmVmZXJlbmNlLXNwYW4tc2VsZWN0ZWRcIik7XG5cblx0XHRcdGFjdGl2ZUNvbnRhaW5lckVsXG5cdFx0XHRcdC5xdWVyeVNlbGVjdG9yKFwiLnJlZmVyZW5jZS1kYXRhLXNwYW4tc2VsZWN0ZWRcIilcblx0XHRcdFx0Py5jbGFzc0xpc3QucmVtb3ZlKFwicmVmZXJlbmNlLWRhdGEtc3Bhbi1zZWxlY3RlZFwiKTtcblx0XHR9XG5cdH1cblxuXHRpZiAodGVtcCAmJiB0YXJnZXRMZWFmKSB7XG5cdFx0dGFyZ2V0TGVhZi5kZXRhY2goKTtcblxuXHRcdGxldCBvcmlnaW5hbExlYWYgPSB3b3Jrc3BhY2UuZ2V0TGVhZkJ5SWQob3JpZ2luYWxMZWFmSWQpO1xuXHRcdGlmICghb3JpZ2luYWxMZWFmKSB0aHJvdyBuZXcgRXJyb3IoXCJPcmlnaW5hbCBsZWFmIG5vdCBmb3VuZFwiKTtcblxuXHRcdHdvcmtzcGFjZS5yZXZlYWxMZWFmKG9yaWdpbmFsTGVhZik7XG5cdH1cblxuXHRpZiAocGVlaykge1xuXHRcdGxldCBvcmlnaW5hbExlYWYgPSB3b3Jrc3BhY2UuZ2V0TGVhZkJ5SWQob3JpZ2luYWxMZWFmSWQpO1xuXHRcdGlmICghb3JpZ2luYWxMZWFmKSB7XG5cdFx0XHRyZXNldEhvdmVyKCk7XG5cdFx0XHR0aHJvdyBuZXcgRXJyb3IoXCJPcmlnaW5hbCBsZWFmIG5vdCBmb3VuZFwiKTtcblx0XHR9XG5cblx0XHR3b3Jrc3BhY2UucmV2ZWFsTGVhZihvcmlnaW5hbExlYWYpO1xuXHR9XG5cdC8vIGlmICghdGVtcCkge1xuXHQvLyBcdGxldCBvcmlnaW5hbExlYWYgPSB3b3Jrc3BhY2UuZ2V0TGVhZkJ5SWQob3JpZ2luYWxMZWFmSWQpO1xuXHQvLyBcdGlmICghb3JpZ2luYWxMZWFmKSB0aHJvdyBuZXcgRXJyb3IoXCJPcmlnaW5hbCBsZWFmIG5vdCBmb3VuZFwiKTtcblxuXHQvLyBcdHdvcmtzcGFjZS5yZXZlYWxMZWFmKG9yaWdpbmFsTGVhZik7XG5cdC8vIH1cblxuXHQvLyBFbmQgbXV0ZXggbG9ja1xuXHRyZXNldEhvdmVyKCk7XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBlbmRCYWNrbGlua0hvdmVyRWZmZWN0KCkge1xuXHRpZiAoIWdldEJhY2tsaW5rSG92ZXIoKSB8fCBPYmplY3Qua2V5cyhnZXRCYWNrbGlua0hvdmVyKCkpLmxlbmd0aCA9PSAwKSB7XG5cdFx0Ly8gRW5kIG11dGV4IGxvY2tcblx0XHRyZXNldEJhY2tsaW5rSG92ZXIoKTtcblx0XHRyZXR1cm47XG5cdH1cblxuXHRjb25zdCB7XG5cdFx0ZGF0YVN0cmluZyxcblx0XHRsZWFmSWQsXG5cdFx0b3JpZ2luYWxMZWFmSWQsXG5cdFx0YmFja2xpbmtMZWFmSWQsXG5cdFx0dGVtcCxcblx0XHRjdXJzb3JWaWV3cG9ydCxcblx0XHRvcmlnaW5hbFRhYixcblx0XHRwZWVrLFxuXHR9ID0gZ2V0QmFja2xpbmtIb3ZlcigpO1xuXHRpZiAoZ2V0Q3Vyc29yKCkgIT0gbnVsbCAmJiBnZXRDdXJzb3IoKS5kYXRhU3RyaW5nID09IGRhdGFTdHJpbmcpIHtcblx0XHQvLyBFbmQgbXV0ZXggbG9ja1xuXHRcdHJlc2V0QmFja2xpbmtIb3ZlcigpO1xuXHRcdHJldHVybjtcblx0fVxuXG5cdGNvbnN0IHsgd29ya3NwYWNlIH0gPSBnZXRUaGF0KCk7XG5cdGxldCB0YXJnZXRMZWFmID0gd29ya3NwYWNlLmdldExlYWZCeUlkKGxlYWZJZCk7XG5cdGlmICghdGFyZ2V0TGVhZikge1xuXHRcdHJlc2V0QmFja2xpbmtIb3ZlcigpO1xuXHRcdHRocm93IG5ldyBFcnJvcihcIlRhcmdldCBsZWFmIG5vdCBmb3VuZFwiKTtcblx0fVxuXG5cdC8vIEB0cy1pZ25vcmVcblx0bGV0IGJhY2tsaW5rU3BhbjogSFRNTFNwYW5FbGVtZW50ID0gdGFyZ2V0TGVhZi5jb250YWluZXJFbC5xdWVyeVNlbGVjdG9yKFxuXHRcdGBzcGFuW2RhdGE9XCIke2RhdGFTdHJpbmd9XCJdYFxuXHQpO1xuXG5cdGlmIChiYWNrbGlua1NwYW4pIHtcblx0XHRiYWNrbGlua1NwYW4uY2xhc3NMaXN0LnJlbW92ZShcInJlZmVyZW5jZS1kYXRhLXNwYW4taG92ZXJlZFwiKTtcblx0fVxuXG5cdGlmIChjdXJzb3JWaWV3cG9ydCAmJiB0YXJnZXRMZWFmICYmIHRhcmdldExlYWYudmlldyBpbnN0YW5jZW9mIE1hcmtkb3duVmlldykge1xuXHRcdGNvbnN0IHZpZXc6IE1hcmtkb3duVmlldyA9IHRhcmdldExlYWYudmlldztcblx0XHR2aWV3LmVkaXRvci5zY3JvbGxUbygwLCBjdXJzb3JWaWV3cG9ydC50b3ApO1xuXHR9XG5cblx0bGV0IGNvbnRhaW5lckVsOiBIVE1MRWxlbWVudCA9IGdldENvbnRhaW5lckVsZW1lbnQodGFyZ2V0TGVhZik7XG5cdGlmIChjb250YWluZXJFbCAhPSBudWxsKSB7XG5cdFx0Ly8gQHRzLWlnbm9yZVxuXHRcdGNvbnRhaW5lckVsLnF1ZXJ5U2VsZWN0b3IoXCIudmlldy1jb250ZW50XCIpPy5zZXRBdHRyaWJ1dGUoXCJzdHlsZVwiLCBcIlwiKTtcblx0fVxuXG5cdGxldCBlZGl0b3JWaWV3OiBFZGl0b3JWaWV3ID0gZ2V0RWRpdG9yVmlldyh0YXJnZXRMZWFmKTtcblxuXHRyZW1vdmVIaWdobGlnaHRzKGVkaXRvclZpZXcpO1xuXG5cdC8vIGJhY2tsaW5rIGVmZmVjdFxuXHRjb25zdCBvcmlnaW5hbExlYWYgPSB3b3Jrc3BhY2UuZ2V0TGVhZkJ5SWQoYmFja2xpbmtMZWFmSWQpO1xuXHRpZiAoIW9yaWdpbmFsTGVhZikge1xuXHRcdHJlc2V0QmFja2xpbmtIb3ZlcigpO1xuXHRcdHRocm93IG5ldyBFcnJvcihcIk9yaWdpbmFsIGxlYWYgbm90IGZvdW5kXCIpO1xuXHR9XG5cdGxldCBvcmlnaW5hbEVkaXRvclZpZXc6IEVkaXRvclZpZXcgPSBnZXRFZGl0b3JWaWV3KG9yaWdpbmFsTGVhZik7XG5cblx0cmVtb3ZlSGlnaGxpZ2h0cyhvcmlnaW5hbEVkaXRvclZpZXcpO1xuXG5cdGlmIChnZXRDdXJzb3IoKSAhPSBudWxsKSB7XG5cdFx0Y29uc3QgeyBkYXRhU3RyaW5nLCBjdXJzb3JWaWV3cG9ydCwgbGVhZklkLCBvcmlnaW5hbExlYWZJZCB9ID0gZ2V0Q3Vyc29yKCk7XG5cdFx0bGV0IFtwcmVmaXgsIHRleHQsIHN1ZmZpeCwgZmlsZSwgZnJvbSwgdG9dID0gcHJvY2Vzc1VSSShkYXRhU3RyaW5nKTtcblx0XHRjb25zdCBjdXJzb3JMZWFmID0gd29ya3NwYWNlLmdldExlYWZCeUlkKGxlYWZJZCk7XG5cdFx0d29ya3NwYWNlLnJldmVhbExlYWYoY3Vyc29yTGVhZik7XG5cblx0XHRjb25zdCBlZGl0b3JWaWV3OiBFZGl0b3JWaWV3ID0gZ2V0RWRpdG9yVmlldyhjdXJzb3JMZWFmKTtcblx0XHRoaWdobGlnaHRTZWxlY3Rpb24oZWRpdG9yVmlldywgZnJvbSwgdG8pO1xuXHR9XG5cblx0aWYgKHRlbXAgJiYgdGFyZ2V0TGVhZikge1xuXHRcdHRhcmdldExlYWYuZGV0YWNoKCk7XG5cdH1cblxuXHRpZiAocGVlaykge1xuXHRcdGxldCBvcmlnaW5hbExlYWYgPSB3b3Jrc3BhY2UuZ2V0TGVhZkJ5SWQob3JpZ2luYWxMZWFmSWQpO1xuXHRcdGlmICghb3JpZ2luYWxMZWFmKSB7XG5cdFx0XHRyZXNldEJhY2tsaW5rSG92ZXIoKTtcblx0XHRcdHRocm93IG5ldyBFcnJvcihcIk9yaWdpbmFsIGxlYWYgbm90IGZvdW5kXCIpO1xuXHRcdH1cblxuXHRcdHdvcmtzcGFjZS5yZXZlYWxMZWFmKG9yaWdpbmFsTGVhZik7XG5cdH1cblxuXHQvLyBpZiAodGVtcCkge1xuXHQvLyBcdHRhcmdldExlYWYuZGV0YWNoKCk7XG5cdC8vIFx0Ly8gc2V0VGltZW91dCgoKSA9PiB7XG5cdC8vIFx0Ly8gXHR0YXJnZXRMZWFmLmRldGFjaCgpO1xuXHQvLyBcdC8vIH0sIDEwMCk7XG5cdC8vIH0gZWxzZSB7XG5cdC8vIFx0Ly8gaWYgdGhlIGN1cnNvciBpcyBhY3RpdmUsIGhpZ2hsaWdodCB0aGUgc2VsZWN0aW9uXG5cdC8vIH1cblxuXHQvLyBFbmQgbXV0ZXggbG9ja1xuXHRyZXNldEJhY2tsaW5rSG92ZXIoKTtcbn1cbiIsICJpbXBvcnQgeyBrZXltYXAgfSBmcm9tIFwiQGNvZGVtaXJyb3Ivdmlld1wiO1xuaW1wb3J0IHsgRWRpdG9yVmlldywgRGVjb3JhdGlvbiwgRGVjb3JhdGlvblNldCB9IGZyb20gXCJAY29kZW1pcnJvci92aWV3XCI7XG5pbXBvcnQge1xuXHRTdGF0ZUZpZWxkLFxuXHRTdGF0ZUVmZmVjdCxcblx0UmFuZ2VTZXQsXG5cdENoYW5nZURlc2MsXG59IGZyb20gXCJAY29kZW1pcnJvci9zdGF0ZVwiO1xuaW1wb3J0IHsgU1ZHX0hPVkVSX0NPTE9SIH0gZnJvbSBcIi4vY29uc3RhbnRzXCI7XG5cbmNvbnN0IGFkZEhpZ2hsaWdodCA9IFN0YXRlRWZmZWN0LmRlZmluZTx7IGZyb206IG51bWJlcjsgdG86IG51bWJlciB9Pih7XG5cdG1hcDogKHsgZnJvbSwgdG8gfSwgY2hhbmdlKSA9PiAoe1xuXHRcdGZyb206IGNoYW5nZS5tYXBQb3MoZnJvbSksXG5cdFx0dG86IGNoYW5nZS5tYXBQb3ModG8pLFxuXHR9KSxcbn0pO1xuXG5jb25zdCByZXNldEhpZ2hsaWdodCA9IFN0YXRlRWZmZWN0LmRlZmluZTx7IGZyb206IG51bWJlcjsgdG86IG51bWJlciB9Pih7XG5cdG1hcDogKHsgZnJvbSwgdG8gfSwgY2hhbmdlKSA9PiAoe1xuXHRcdGZyb206IGNoYW5nZS5tYXBQb3MoZnJvbSksXG5cdFx0dG86IGNoYW5nZS5tYXBQb3ModG8pLFxuXHR9KSxcbn0pO1xuXG5jb25zdCBoaWdobGlnaHRGaWVsZCA9IFN0YXRlRmllbGQuZGVmaW5lPERlY29yYXRpb25TZXQ+KHtcblx0Y3JlYXRlKCkge1xuXHRcdHJldHVybiBEZWNvcmF0aW9uLm5vbmU7XG5cdH0sXG5cdHVwZGF0ZShoaWdsaWdodHMsIHRyKSB7XG5cdFx0aGlnbGlnaHRzID0gaGlnbGlnaHRzLm1hcCh0ci5jaGFuZ2VzKTtcblx0XHRmb3IgKGxldCBlIG9mIHRyLmVmZmVjdHMpXG5cdFx0XHRpZiAoZS5pcyhhZGRIaWdobGlnaHQpKSB7XG5cdFx0XHRcdGhpZ2xpZ2h0cyA9IGhpZ2xpZ2h0cy51cGRhdGUoe1xuXHRcdFx0XHRcdGFkZDogW2hpZ2hsaWdodE1hcmsucmFuZ2UoZS52YWx1ZS5mcm9tLCBlLnZhbHVlLnRvKV0sXG5cdFx0XHRcdH0pO1xuXHRcdFx0fSBlbHNlIGlmIChlLmlzKHJlc2V0SGlnaGxpZ2h0KSkge1xuXHRcdFx0XHRoaWdsaWdodHMgPSBoaWdsaWdodHMudXBkYXRlKHsgZmlsdGVyOiAoZnJvbSwgdG8pID0+IGZhbHNlIH0pO1xuXHRcdFx0fVxuXHRcdHJldHVybiBoaWdsaWdodHM7XG5cdH0sXG5cdHByb3ZpZGU6IChmKSA9PiBFZGl0b3JWaWV3LmRlY29yYXRpb25zLmZyb20oZiksXG59KTtcblxuY29uc3QgaGlnaGxpZ2h0TWFyayA9IERlY29yYXRpb24ubWFyayh7IGNsYXNzOiBcImhpZ2hsaWdodFwiIH0pO1xuY29uc3QgaGlnaGxpZ2h0VGhlbWUgPSBFZGl0b3JWaWV3LmJhc2VUaGVtZSh7XG5cdFwiLmhpZ2hsaWdodFwiOiB7XG5cdFx0XCJiYWNrZ3JvdW5kLWNvbG9yXCI6IFwid2hpdGVcIixcblx0XHRjb2xvcjogXCJibGFja1wiLFxuXHR9LFxufSk7XG5jb25zdCBkZWZhdWx0SGlnaGxpZ2h0VGhlbWUgPSBFZGl0b3JWaWV3LmJhc2VUaGVtZSh7XG5cdFwiLmRlZmF1bHQtaGlnaGxpZ2h0XCI6IHtcblx0XHRcImJhY2tncm91bmQtY29sb3JcIjogU1ZHX0hPVkVSX0NPTE9SLFxuXHRcdGNvbG9yOiBcImJsYWNrXCIsXG5cdH0sXG59KTtcblxuZXhwb3J0IGZ1bmN0aW9uIGhpZ2hsaWdodFNlbGVjdGlvbih2aWV3OiBFZGl0b3JWaWV3LCBmcm9tOiBudW1iZXIsIHRvOiBudW1iZXIpIHtcblx0bGV0IGVmZmVjdHM6IFN0YXRlRWZmZWN0PHVua25vd24+W10gPSBbYWRkSGlnaGxpZ2h0Lm9mKHsgZnJvbSwgdG8gfSldO1xuXG5cdGlmICghZWZmZWN0cy5sZW5ndGgpIHJldHVybiBmYWxzZTtcblxuXHRpZiAoIXZpZXcuc3RhdGUuZmllbGQoaGlnaGxpZ2h0RmllbGQsIGZhbHNlKSlcblx0XHRlZmZlY3RzLnB1c2goU3RhdGVFZmZlY3QuYXBwZW5kQ29uZmlnLm9mKFtoaWdobGlnaHRGaWVsZCwgaGlnaGxpZ2h0VGhlbWVdKSk7XG5cblx0dmlldy5kaXNwYXRjaCh7IGVmZmVjdHMgfSk7XG5cdHJldHVybiB0cnVlO1xufVxuXG4vLyBoYXZlIGEgZnVuY3Rpb24gdGhhdCBhZGRzIHN1YnRsZSBoaWdobGlnaHRzIHRvIHN0YXRlXG5leHBvcnQgZnVuY3Rpb24gZGVmYXVsdEhpZ2hsaWdodFNlbGVjdGlvbihcblx0dmlldzogRWRpdG9yVmlldyxcblx0ZnJvbTogbnVtYmVyLFxuXHR0bzogbnVtYmVyXG4pIHtcblx0bGV0IGVmZmVjdHM6IFN0YXRlRWZmZWN0PHVua25vd24+W10gPSBbYWRkSGlnaGxpZ2h0Lm9mKHsgZnJvbSwgdG8gfSldO1xuXG5cdGlmICghZWZmZWN0cy5sZW5ndGgpIHJldHVybiBmYWxzZTtcblxuXHRpZiAoIXZpZXcuc3RhdGUuZmllbGQoaGlnaGxpZ2h0RmllbGQsIGZhbHNlKSlcblx0XHRlZmZlY3RzLnB1c2goXG5cdFx0XHRTdGF0ZUVmZmVjdC5hcHBlbmRDb25maWcub2YoW2hpZ2hsaWdodEZpZWxkLCBkZWZhdWx0SGlnaGxpZ2h0VGhlbWVdKVxuXHRcdCk7XG5cblx0dmlldy5kaXNwYXRjaCh7IGVmZmVjdHMgfSk7XG5cdHJldHVybiB0cnVlO1xufVxuXG4vLyB1cGRhdGUgcmVtb3ZlIGhpZ2hsaWdodHMgc28gdGhhdFxuZXhwb3J0IGZ1bmN0aW9uIHJlbW92ZUhpZ2hsaWdodHModmlldzogRWRpdG9yVmlldykge1xuXHRpZiAoIXZpZXcpIHJldHVybjtcblxuXHRsZXQgZWZmZWN0czogU3RhdGVFZmZlY3Q8dW5rbm93bj5bXSA9IHZpZXcuc3RhdGUuc2VsZWN0aW9uLnJhbmdlcy5tYXAoXG5cdFx0KHsgZnJvbSwgdG8gfSkgPT4gcmVzZXRIaWdobGlnaHQub2YoeyBmcm9tLCB0byB9KVxuXHQpO1xuXHRpZiAoZWZmZWN0cy5sZW5ndGgpIHtcblx0XHR2aWV3LmRpc3BhdGNoKHsgZWZmZWN0cyB9KTtcblx0XHRyZXR1cm4gdHJ1ZTtcblx0fVxuXHRyZXR1cm4gZmFsc2U7XG59XG4iLCAiaW1wb3J0IHtcblx0RWRpdG9yVmlldyxcblx0V2lkZ2V0VHlwZSxcblx0RGVjb3JhdGlvbixcblx0RGVjb3JhdGlvblNldCxcblx0Vmlld1BsdWdpbixcblx0Vmlld1VwZGF0ZSxcblx0TWF0Y2hEZWNvcmF0b3IsXG5cdGd1dHRlcixcblx0R3V0dGVyTWFya2VyLFxufSBmcm9tIFwiQGNvZGVtaXJyb3Ivdmlld1wiO1xuaW1wb3J0IHsgU1ZHX0hPVkVSX0NPTE9SIH0gZnJvbSBcIi4uL2NvbnN0YW50c1wiO1xuXG4vKiBoaWdobGlnaHQgKi9cbmNsYXNzIEhpZ2hsaWdodGVyV2lkZ2V0IGV4dGVuZHMgV2lkZ2V0VHlwZSB7XG5cdGNvbnN0cnVjdG9yKHByaXZhdGUgbmFtZTogc3RyaW5nLCBwcml2YXRlIHZpZXc6IEVkaXRvclZpZXcpIHtcblx0XHRzdXBlcigpO1xuXHR9XG5cblx0ZXEob3RoZXI6IEhpZ2hsaWdodGVyV2lkZ2V0KSB7XG5cdFx0cmV0dXJuIHRoaXMubmFtZSA9PT0gb3RoZXIubmFtZTtcblx0fVxuXG5cdHRvRE9NKCkge1xuXHRcdGNvbnN0IHNwYW4gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZnJhZ21lbnRcIik7XG5cdFx0c3Bhbi50ZXh0Q29udGVudCA9IHRoaXMubmFtZTtcblx0XHRzcGFuLnN0eWxlLmJhY2tncm91bmRDb2xvciA9IFNWR19IT1ZFUl9DT0xPUjtcblx0XHRzcGFuLnN0eWxlLmNvbG9yID0gXCJibGFja1wiO1xuXG5cdFx0cmV0dXJuIHNwYW47XG5cdH1cbn1cblxuY29uc3QgaGlnaGxpZ2h0ZXJEZWNvcmF0aW9uID0gKG1hdGNoOiBSZWdFeHBFeGVjQXJyYXksIHZpZXc6IEVkaXRvclZpZXcpID0+XG5cdERlY29yYXRpb24ucmVwbGFjZSh7XG5cdFx0d2lkZ2V0OiBuZXcgSGlnaGxpZ2h0ZXJXaWRnZXQobWF0Y2hbMV0sIHZpZXcpLFxuXHR9KTtcblxuY29uc3QgaGlnaGxpZ2h0TWF0Y2hlciA9IG5ldyBNYXRjaERlY29yYXRvcih7XG5cdHJlZ2V4cDogL1xcK1xcK1xcKyguKj8pXFwrXFwrXFwrL2csXG5cdGRlY29yYXRpb246IChtYXRjaCwgdmlldywgcG9zKSA9PiB7XG5cdFx0cmV0dXJuIGhpZ2hsaWdodGVyRGVjb3JhdGlvbihtYXRjaCwgdmlldyk7XG5cdH0sXG59KTtcblxuZXhwb3J0IGNvbnN0IGhpZ2hsaWdodHMgPSBWaWV3UGx1Z2luLmZyb21DbGFzcyhcblx0Y2xhc3Mge1xuXHRcdGhpZ2hsaWdodHM6IERlY29yYXRpb25TZXQ7XG5cdFx0Y29uc3RydWN0b3IodmlldzogRWRpdG9yVmlldykge1xuXHRcdFx0dGhpcy5oaWdobGlnaHRzID0gaGlnaGxpZ2h0TWF0Y2hlci5jcmVhdGVEZWNvKHZpZXcpO1xuXHRcdH1cblx0XHR1cGRhdGUodXBkYXRlOiBWaWV3VXBkYXRlKSB7XG5cdFx0XHR0aGlzLmhpZ2hsaWdodHMgPSBoaWdobGlnaHRNYXRjaGVyLnVwZGF0ZURlY28odXBkYXRlLCB0aGlzLmhpZ2hsaWdodHMpO1xuXHRcdH1cblx0XHRkZXN0cm95KCkge1xuXHRcdFx0dGhpcy5oaWdobGlnaHRzID0gRGVjb3JhdGlvbi5ub25lO1xuXHRcdH1cblx0fSxcblx0e1xuXHRcdGRlY29yYXRpb25zOiAoaW5zdGFuY2UpID0+IGluc3RhbmNlLmhpZ2hsaWdodHMsXG5cdFx0cHJvdmlkZTogKHBsdWdpbikgPT5cblx0XHRcdEVkaXRvclZpZXcuYXRvbWljUmFuZ2VzLm9mKCh2aWV3KSA9PiB7XG5cdFx0XHRcdHJldHVybiB2aWV3LnBsdWdpbihwbHVnaW4pPy5oaWdobGlnaHRzIHx8IERlY29yYXRpb24ubm9uZTtcblx0XHRcdH0pLFxuXHR9XG4pO1xuIiwgImltcG9ydCB7XG5cdEVkaXRvclZpZXcsXG5cdFdpZGdldFR5cGUsXG5cdERlY29yYXRpb24sXG5cdERlY29yYXRpb25TZXQsXG5cdFZpZXdQbHVnaW4sXG5cdFZpZXdVcGRhdGUsXG5cdE1hdGNoRGVjb3JhdG9yLFxuXHRndXR0ZXIsXG5cdEd1dHRlck1hcmtlcixcbn0gZnJvbSBcIkBjb2RlbWlycm9yL3ZpZXdcIjtcblxuaW1wb3J0IHtcblx0b3BlblJlZmVyZW5jZSxcblx0Y3JlYXRlUmVmZXJlbmNlSWNvbixcblx0Z2VuZXJhdGVCYWNrbGlua3MsXG5cdGNyZWF0ZUJhY2tsaW5rTWFyayxcblx0dXBkYXRlQmFja2xpbmtNYXJrUG9zaXRpb25zLFxufSBmcm9tIFwiLi4vcmVmZXJlbmNlc1wiO1xuaW1wb3J0IHsgZGVjb2RlVVJJQ29tcG9uZW50U3RyaW5nLCBlbmNvZGVVUklDb21wb25lbnRTdHJpbmcgfSBmcm9tIFwic3JjL3V0aWxzXCI7XG5pbXBvcnQgeyBnZXRCYWNrbGlua3MgfSBmcm9tIFwic3JjL3N0YXRlXCI7XG5cbi8qIG5ldyBwbGFjZWhvbGRlciAqL1xuY2xhc3MgUmVmZXJlbmNlV2lkZ2V0IGV4dGVuZHMgV2lkZ2V0VHlwZSB7XG5cdGNvbnN0cnVjdG9yKFxuXHRcdHByaXZhdGUgbmFtZTogc3RyaW5nLFxuXHRcdHByaXZhdGUgdmlldzogRWRpdG9yVmlldyxcblx0XHRwcml2YXRlIHBvczogbnVtYmVyXG5cdCkge1xuXHRcdHN1cGVyKCk7XG5cdH1cblxuXHRlcShvdGhlcjogUmVmZXJlbmNlV2lkZ2V0KSB7XG5cdFx0cmV0dXJuIHRoaXMubmFtZSA9PT0gb3RoZXIubmFtZTtcblx0fVxuXG5cdGFzeW5jIHVwZGF0ZU5hbWUobmFtZTogc3RyaW5nKSB7XG5cdFx0Y29uc3QgZnJvbSA9IHRoaXMucG9zO1xuXHRcdC8vIHRleHQgbGVuZ3RoIGZvciB0aGVzZSB0d28gc3RhdGVzIGlzIGRpZmZlcmVudFxuXHRcdC8vIGNvbnN0IHRvID0gdGhpcy5wb3MgKyBuYW1lLmxlbmd0aCArICh0b2dnbGUgPT0gXCJ0XCIgPyAzIDogLTMpO1xuXHRcdGNvbnN0IHRvID0gdGhpcy5wb3MgKyBuYW1lLmxlbmd0aDtcblx0XHRjb25zdCB0cmFuc2FjdGlvbiA9IHRoaXMudmlldy5zdGF0ZS51cGRhdGUoe1xuXHRcdFx0Y2hhbmdlczogeyBmcm9tLCB0bywgaW5zZXJ0OiBuYW1lIH0sXG5cdFx0fSk7XG5cdFx0dGhpcy52aWV3LmRpc3BhdGNoKHRyYW5zYWN0aW9uKTtcblxuXHRcdGF3YWl0IHVwZGF0ZUJhY2tsaW5rTWFya1Bvc2l0aW9ucygpO1xuXHRcdHRoaXMubmFtZSA9IG5hbWU7XG5cdH1cblxuXHRnZXRWaWV3KCkge1xuXHRcdHJldHVybiB0aGlzLnZpZXc7XG5cdH1cblxuXHR0b0RPTSgpIHtcblx0XHRjb25zdCByZWdleCA9IC9cXFtcdTIxOTdcXF1cXCh1cm46KFteKV0qKVxcKS9nO1xuXHRcdGxldCBjb250ZW50ID0gcmVnZXguZXhlYyh0aGlzLm5hbWUpO1xuXHRcdGlmICghY29udGVudCkgdGhyb3cgbmV3IEVycm9yKFwiSW52YWxpZCByZWZlcmVuY2VcIik7XG5cdFx0Y29uc3QgW3ByZWZpeCwgdGV4dCwgc3VmZml4LCBmaWxlLCBmcm9tLCB0bywgcG9ydGFsLCB0b2dnbGUgPSBcImZcIl0gPVxuXHRcdFx0Y29udGVudFsxXS5zcGxpdChcIjpcIik7XG5cblx0XHRjb25zdCB7IHNwYW4sIHN2ZyB9ID0gY3JlYXRlUmVmZXJlbmNlSWNvbihcblx0XHRcdHBvcnRhbCA9PSBcInBvcnRhbFwiID8gXCJpbmxpbmUgcmVmZXJlbmNlIHdpZGdldCB8KnxcIiA6IG51bGxcblx0XHQpO1xuXG5cdFx0aWYgKGNvbnRlbnQpIHNwYW4uc2V0QXR0cmlidXRlKFwiZGF0YVwiLCBjb250ZW50WzFdKTtcblx0XHRzcGFuLmNsYXNzTGlzdC5hZGQoXCJyZWZlcmVuY2UtZGF0YS1zcGFuXCIpO1xuXG5cdFx0Y29uc3QgY29udGFpbmVyU3BhbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzcGFuXCIpO1xuXHRcdGNvbnRhaW5lclNwYW4uY2xhc3NMaXN0LmFkZChcInJlZmVyZW5jZS1jb250YWluZXItc3BhblwiKTtcblx0XHRjb25zdCByZWZlcmVuY2VTcGFuID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInNwYW5cIik7XG5cdFx0Ly8gYWRkIGNsYXNzXG5cdFx0cmVmZXJlbmNlU3Bhbi5jbGFzc0xpc3QuYWRkKFwicmVmZXJlbmNlLXNwYW5cIik7XG5cblx0XHRyZWZlcmVuY2VTcGFuLmlubmVySFRNTCA9IGRlY29kZVVSSUNvbXBvbmVudFN0cmluZyh0ZXh0KTtcblx0XHRyZWZlcmVuY2VTcGFuLmNsYXNzTGlzdC50b2dnbGUoXCJyZWZlcmVuY2Utc3Bhbi1oaWRkZW5cIiwgdG9nZ2xlID09PSBcImZcIik7XG5cblx0XHRjb250YWluZXJTcGFuLmFwcGVuZENoaWxkKHJlZmVyZW5jZVNwYW4pO1xuXHRcdGNvbnRhaW5lclNwYW4uYXBwZW5kQ2hpbGQoc3Bhbik7XG5cblx0XHRjb25zdCBvYnNlcnZlciA9IG5ldyBNdXRhdGlvbk9ic2VydmVyKGFzeW5jIChtdXRhdGlvbnNMaXN0KSA9PiB7XG5cdFx0XHRmb3IgKGNvbnN0IG11dGF0aW9uIG9mIG11dGF0aW9uc0xpc3QpIHtcblx0XHRcdFx0aWYgKFxuXHRcdFx0XHRcdG11dGF0aW9uLnR5cGUgPT09IFwiYXR0cmlidXRlc1wiICYmXG5cdFx0XHRcdFx0bXV0YXRpb24uYXR0cmlidXRlTmFtZSA9PT0gXCJjbGFzc1wiXG5cdFx0XHRcdCkge1xuXHRcdFx0XHRcdC8vIEhhbmRsZSBzdHlsZSBjaGFuZ2VzIGhlcmVcblx0XHRcdFx0XHRsZXQgbmV3VG9nZ2xlID0gcmVmZXJlbmNlU3Bhbi5jbGFzc0xpc3QuY29udGFpbnMoXG5cdFx0XHRcdFx0XHRcInJlZmVyZW5jZS1zcGFuLWhpZGRlblwiXG5cdFx0XHRcdFx0KVxuXHRcdFx0XHRcdFx0PyBcImZcIlxuXHRcdFx0XHRcdFx0OiBcInRcIjtcblx0XHRcdFx0XHRsZXQgcmVmZXJlbmNlID0gYFtcdTIxOTddKHVybjoke3ByZWZpeH06JHt0ZXh0fToke3N1ZmZpeH06JHtmaWxlfToke2Zyb219OiR7dG99OiR7cG9ydGFsfToke25ld1RvZ2dsZX0pYDtcblxuXHRcdFx0XHRcdGF3YWl0IHRoaXMudXBkYXRlTmFtZShyZWZlcmVuY2UpO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fSk7XG5cblx0XHRvYnNlcnZlci5vYnNlcnZlKHJlZmVyZW5jZVNwYW4sIHsgYXR0cmlidXRlczogdHJ1ZSB9KTtcblxuXHRcdGNvbnRhaW5lclNwYW4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIChldikgPT4ge1xuXHRcdFx0aWYgKGV2Lm1ldGFLZXkgfHwgZXYuY3RybEtleSkge1xuXHRcdFx0XHRyZWZlcmVuY2VTcGFuLmNsYXNzTGlzdC50b2dnbGUoXCJyZWZlcmVuY2Utc3Bhbi1oaWRkZW5cIik7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRvcGVuUmVmZXJlbmNlKGV2KTtcblx0XHRcdH1cblx0XHR9KTtcblxuXHRcdHJldHVybiBjb250YWluZXJTcGFuO1xuXHR9XG59XG5cbmNvbnN0IHJlZmVyZW5jZURlY29yYXRpb24gPSAoXG5cdG1hdGNoOiBSZWdFeHBFeGVjQXJyYXksXG5cdHZpZXc6IEVkaXRvclZpZXcsXG5cdHBvczogbnVtYmVyXG4pID0+IHtcblx0bGV0IGRlY29yYXRpb24gPSBEZWNvcmF0aW9uLnJlcGxhY2Uoe1xuXHRcdHdpZGdldDogbmV3IFJlZmVyZW5jZVdpZGdldChtYXRjaFswXSwgdmlldywgcG9zKSxcblx0fSk7XG5cdHJldHVybiBkZWNvcmF0aW9uO1xufTtcblxuY29uc3QgcmVmZXJlbmNlTWF0Y2hlciA9IG5ldyBNYXRjaERlY29yYXRvcih7XG5cdC8vIHJlZ2V4cDogL1xcW1xcdTIxOTdcXF1cXCh1cm46W1xcc1xcU15cXCldKlxcKS9nLFxuXHQvLyByZWdleHA6IC9cXFtcXHUyMTk3XFxdXFwodXJuOihbXjpdKjopezUsNn1bXjpdKlxcKS9nLFxuXHQvLyByZWdleHA6IC9cXFtcXHUyMTk3XFxdXFwodXJuOihbXjpdKjopezZ9W146KV0qXFwpL2csXG5cdHJlZ2V4cDogL1xcW1xcdTIxOTdcXF1cXCh1cm46KFteOl0qOil7N31bXjopXSpcXCkvZyxcblx0ZGVjb3JhdGlvbjogKG1hdGNoLCB2aWV3LCBwb3MpID0+IHtcblx0XHRyZXR1cm4gcmVmZXJlbmNlRGVjb3JhdGlvbihtYXRjaCwgdmlldywgcG9zKTtcblx0fSxcbn0pO1xuXG5leHBvcnQgY29uc3QgcmVmZXJlbmNlUmVzb3VyY2VzID0gVmlld1BsdWdpbi5mcm9tQ2xhc3MoXG5cdGNsYXNzIHtcblx0XHRyZWZlcmVuY2VSZXNvdXJjZXM6IERlY29yYXRpb25TZXQ7XG5cdFx0Y29uc3RydWN0b3IodmlldzogRWRpdG9yVmlldykge1xuXHRcdFx0dGhpcy5yZWZlcmVuY2VSZXNvdXJjZXMgPSByZWZlcmVuY2VNYXRjaGVyLmNyZWF0ZURlY28odmlldyk7XG5cdFx0fVxuXHRcdHVwZGF0ZSh1cGRhdGU6IFZpZXdVcGRhdGUpIHtcblx0XHRcdHRoaXMucmVmZXJlbmNlUmVzb3VyY2VzID0gcmVmZXJlbmNlTWF0Y2hlci51cGRhdGVEZWNvKFxuXHRcdFx0XHR1cGRhdGUsXG5cdFx0XHRcdHRoaXMucmVmZXJlbmNlUmVzb3VyY2VzXG5cdFx0XHQpO1xuXHRcdH1cblx0XHRkZXN0cm95KCkge1xuXHRcdFx0dGhpcy5yZWZlcmVuY2VSZXNvdXJjZXMgPSBEZWNvcmF0aW9uLm5vbmU7XG5cdFx0fVxuXHR9LFxuXHR7XG5cdFx0ZGVjb3JhdGlvbnM6IChpbnN0YW5jZSkgPT4gaW5zdGFuY2UucmVmZXJlbmNlUmVzb3VyY2VzLFxuXHRcdHByb3ZpZGU6IChwbHVnaW4pID0+XG5cdFx0XHRFZGl0b3JWaWV3LmF0b21pY1Jhbmdlcy5vZigodmlldykgPT4ge1xuXHRcdFx0XHRyZXR1cm4gdmlldy5wbHVnaW4ocGx1Z2luKT8ucmVmZXJlbmNlUmVzb3VyY2VzIHx8IERlY29yYXRpb24ubm9uZTtcblx0XHRcdH0pLFxuXHR9XG4pO1xuIiwgImltcG9ydCB7IFBsdWdpbiwgTWFya2Rvd25WaWV3LCBFZGl0b3IgfSBmcm9tIFwib2JzaWRpYW5cIjtcbmltcG9ydCB7XG5cdHByb2Nlc3NVUkksXG5cdHBhcnNlRWRpdG9yUG9zaXRpb24sXG5cdGVuY29kZVVSSUNvbXBvbmVudFN0cmluZyxcblx0Z2V0UHJlZml4QW5kU3VmZml4LFxufSBmcm9tIFwiLi91dGlsc1wiO1xuXG4vLyBbXHUyMTk3XSh1cm46QWxzby06IGhvcGVmdWxseSBmaXggdGhlIG11bHRpLWxpbmUgcmVmZXJlbmNlOi0lMEEtIFVSTnM6MTEtMjMgVG9kby5tZClcbi8vIFtcdTIxOTddKHVybjpQUkVGSVgtOlRFWFQ6LVNVRkZJWDpGSUxFOlNUQVJUSU5ERVg6RU5ESU5ERVgpXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gdXBkYXRlQ2xpcGJvYXJkKFxuXHR0b2dnbGU6IGJvb2xlYW4gPSBmYWxzZSxcblx0b25seTogYm9vbGVhbiA9IGZhbHNlXG4pIHtcblx0Y29uc3QgdmlldyA9IHRoaXMuYXBwLndvcmtzcGFjZS5nZXRBY3RpdmVWaWV3T2ZUeXBlKE1hcmtkb3duVmlldyk7XG5cdC8vIE1ha2Ugc3VyZSB0aGUgdXNlciBpcyBlZGl0aW5nIGEgTWFya2Rvd24gZmlsZS5cblx0aWYgKHZpZXcpIHtcblx0XHRsZXQgc2VsZWN0aW9uID0gdmlldy5lZGl0b3IuZ2V0U2VsZWN0aW9uKCk7XG5cdFx0aWYgKHZpZXcuZmlsZSkge1xuXHRcdFx0Y29uc3QgdGV4dCA9IHZpZXcuZGF0YTtcblx0XHRcdGNvbnN0IGZyb20gPSB2aWV3LmVkaXRvci5wb3NUb09mZnNldCh2aWV3LmVkaXRvci5nZXRDdXJzb3IoXCJmcm9tXCIpKTtcblx0XHRcdGNvbnN0IHRvID0gdmlldy5lZGl0b3IucG9zVG9PZmZzZXQodmlldy5lZGl0b3IuZ2V0Q3Vyc29yKFwidG9cIikpO1xuXHRcdFx0Y29uc3QgeyBwcmVmaXgsIHN1ZmZpeCB9ID0gZ2V0UHJlZml4QW5kU3VmZml4KHRleHQsIGZyb20sIHRvKTtcblx0XHRcdGxldCByZWZlcmVuY2UgPSBgW1x1MjE5N10odXJuOiR7ZW5jb2RlVVJJQ29tcG9uZW50U3RyaW5nKFxuXHRcdFx0XHRwcmVmaXhcblx0XHRcdCl9LToke2VuY29kZVVSSUNvbXBvbmVudFN0cmluZyhzZWxlY3Rpb24pfTotJHtlbmNvZGVVUklDb21wb25lbnRTdHJpbmcoXG5cdFx0XHRcdHN1ZmZpeFxuXHRcdFx0KX06JHtlbmNvZGVVUklDb21wb25lbnRTdHJpbmcodmlldy5maWxlLnBhdGgpfToke2Zyb219OiR7dG99OiR7XG5cdFx0XHRcdG9ubHkgPyBcInBvcnRhbFwiIDogXCJuby1wb3J0YWxcIlxuXHRcdFx0fToke3RvZ2dsZSA/IFwidFwiIDogXCJmXCJ9KWA7XG5cblx0XHRcdC8vIFdyaXRlIHRoZSBzZWxlY3RlZCB0ZXh0IHRvIHRoZSBjbGlwYm9hcmRcblx0XHRcdGF3YWl0IG5hdmlnYXRvci5jbGlwYm9hcmQud3JpdGVUZXh0KHJlZmVyZW5jZSk7XG5cdFx0fVxuXHR9XG59XG4iXSwKICAibWFwcGluZ3MiOiAiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUEsSUFBQUEsbUJBQXFEOzs7QUNBckQsSUFBQUMsZ0JBS087OztBQ0xQLElBQUFDLG1CQUEyRDs7O0FDQTNELElBQU8sZ0JBQVE7OztBQ0VmLFNBQVMsU0FBUyxNQUFNO0FBQ3RCLFNBQU8sT0FBTyxTQUFTLFlBQVksY0FBTSxLQUFLLElBQUk7QUFDcEQ7QUFFQSxJQUFPLG1CQUFROzs7QUNBZixJQUFNLFlBQVksQ0FBQztBQUVuQixTQUFTLElBQUksR0FBRyxJQUFJLEtBQUssRUFBRSxHQUFHO0FBQzVCLFlBQVUsTUFBTSxJQUFJLEtBQU8sU0FBUyxFQUFFLEVBQUUsTUFBTSxDQUFDLENBQUM7QUFDbEQ7QUFFTyxTQUFTLGdCQUFnQixLQUFLLFNBQVMsR0FBRztBQUcvQyxTQUFPLFVBQVUsSUFBSSxTQUFT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V0FBVyxJQUFJLFVBQVU7QUFDdkQsY0FBTSxVQUNMLFVBQUssSUFBSSxVQUFVLG9CQUFvQiw2QkFBWSxNQUFuRCxtQkFBc0Q7QUFDdkQsWUFBSSxDQUFDO0FBQVE7QUFDYixjQUFNLFNBQVMsT0FBTyxVQUFVO0FBR2hDLGNBQU0sVUFBVSxPQUFPLE9BQU8sRUFBRSxHQUFHO0FBQ25DLGNBQU0sUUFBUSxRQUFRLGlCQUFpQixVQUFVO0FBQ2pELGNBQU0sY0FBYyxNQUFNLE9BQU8sSUFBSTtBQUVyQyxjQUFNLFFBQVEsTUFBTTtBQUFBLFVBQ25CLFlBQVksaUJBQWlCLGlCQUFpQjtBQUFBLFFBQy9DO0FBRUEsWUFDQyxNQUFNO0FBQUEsVUFBTSxDQUFDLFNBQ1osS0FBSyxVQUFVLFNBQVMsdUJBQXVCO0FBQUEsUUFDaEQsR0FDQztBQUNELGdCQUFNLFFBQVEsQ0FBQyxTQUFTO0FBQ3ZCLGlCQUFLLFVBQVUsT0FBTyx5QkFBeUIsS0FBSztBQUFBLFVBQ3JELENBQUM7QUFDRCxjQUFJLHdCQUFPLHVCQUF1QjtBQUFBLFFBQ25DLE9BQU87QUFDTixnQkFBTSxRQUFRLENBQUMsU0FBMEI7QUFDeEMsa0JBQU0sUUFBUSxDQUFDRyxVQUFTO0FBQ3ZCLGNBQUFBLE1BQUssVUFBVSxPQUFPLHlCQUF5QixJQUFJO0FBQUEsWUFDcEQsQ0FBQztBQUFBLFVBQ0YsQ0FBQztBQUNELGNBQUksd0JBQU8sdUJBQXVCO0FBQUEsUUFDbkM7QUFBQSxNQUtEO0FBQUEsSUFDRCxDQUFDO0FBQUEsRUFrREY7QUFBQSxFQUVBLFdBQVc7QUFBQSxFQUFDO0FBQ2I7IiwKICAibmFtZXMiOiBbImltcG9ydF9vYnNpZGlhbiIsICJpbXBvcnRfc3RhdGUiLCAiaW1wb3J0X29ic2lkaWFuIiwgImltcG9ydF9vYnNpZGlhbiIsICJpbXBvcnRfb2JzaWRpYW4iLCAiaW1wb3J0X3N0YXRlIiwgImYiLCAiaW1wb3J0X3ZpZXciLCAiZGF0YVN0cmluZyIsICJjdXJzb3JWaWV3cG9ydCIsICJsZWFmSWQiLCAib3JpZ2luYWxMZWFmSWQiLCAiZWRpdG9yVmlldyIsICJvcmlnaW5hbExlYWYiLCAiZGVjb2RlVVJJQ29tcG9uZW50U3RyaW5nIiwgImRvY3VtZW50IiwgImhhbmRsZVJlbW92ZUhvdmVyZWRDdXJzb3IiLCAic3ZnIiwgImhhbmRsZVJlbW92ZUhvdmVyZWRDdXJzb3IiLCAidXBkYXRlSG92ZXJlZEN1cnNvciIsICJnZXRMZWFmQkJveEVsZW1lbnRzIiwgInVwZGF0ZUJhY2tsaW5rTWFya1Bvc2l0aW9uIiwgImJhY2tsaW5rcyIsICJ1cGRhdGVCYWNrbGlua01hcmtQb3NpdGlvbnMiLCAiaGFuZGxlUmVtb3ZlSG92ZXJlZEN1cnNvciIsICJiYWNrbGlua3MiLCAidGV4dCIsICJpbmRleCIsICJoYW5kbGVSZW1vdmVIb3ZlcmVkQ3Vyc29yIiwgInVwZGF0ZUJhY2tsaW5rTWFya1Bvc2l0aW9ucyIsICJzdGF0ZSIsICJzdGF0ZSIsICJ0aGF0IiwgInVwZGF0ZUhvdmVyZWRDdXJzb3IiLCAiZ2V0QmFja2xpbmtzIiwgImltcG9ydF92aWV3IiwgImltcG9ydF92aWV3IiwgInVwZGF0ZUJhY2tsaW5rTWFya1Bvc2l0aW9ucyIsICJkZWNvZGVVUklDb21wb25lbnRTdHJpbmciLCAiaW1wb3J0X29ic2lkaWFuIiwgImltcG9ydF92aWV3IiwgInVwZGF0ZUJhY2tsaW5rTWFya1Bvc2l0aW9ucyIsICJoYW5kbGVSZW1vdmVIb3ZlcmVkQ3Vyc29yIiwgImdldEJhY2tsaW5rcyIsICJzcGFuIl0KfQo=
